{"code":"!function(e){var t={};function n(l){if(t[l])return t[l].exports;var r=t[l]={i:l,l:!1,exports:{}};return e[l].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,l){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(n.r(l),Object.defineProperty(l,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var r in e)n.d(l,r,function(t){return e[t]}.bind(null,r));return l},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t,n){\"use strict\";function l(e,t,n,l){if(\"moveLocation\"===e){if(void 0===l)return void console.log(\"You must provide behavior for the moveLocation\");let e=document.createElementNS(\"http://www.w3.org/2000/svg\",\"circle\");return e.setAttribute(\"cx\",50*t+25),e.setAttribute(\"cy\",50*n+25),e.setAttribute(\"r\",14),e.setAttribute(\"class\",\"moveLocation\"),e.setAttribute(\"onclick\",'\"event.stopPropogation()\"'),e.addEventListener(\"click\",l),A.appendChild(e),e}if(\"checkCircle\"!==e){if(void 0===l)return void console.log(\"You must provide behavior for the piece!\");let r=document.createElementNS(\"http://www.w3.org/2000/svg\",\"image\");return r.setAttribute(\"href\",e),r.setAttribute(\"x\",50*t),r.setAttribute(\"y\",50*n),r.setAttribute(\"width\",50),r.setAttribute(\"height\",50),r.setAttribute(\"onclick\",'\"event.stopPropogation()\"'),r.addEventListener(\"click\",l),A.appendChild(r),r}}function r(e){return e.getAttribute(\"href\").slice(0,e.getAttribute(\"href\").length-4).toLowerCase().split(\"_\")[1]}function i(e){return e.getAttribute(\"href\").slice(0,e.getAttribute(\"href\").length-4).toLowerCase().split(\"_\")[0]}function o(e){switch(e){case 0:return\"a\";case 1:return\"b\";case 2:return\"c\";case 3:return\"d\";case 4:return\"e\";case 5:return\"f\";case 6:return\"g\";case 7:return\"h\"}}function u(e){let t=[[],[],[],[],[],[],[],[]];for(let e=0;e<8;e++)for(let n=0;n<8;n++)t[n][e]=!1;for(let n=0;n<8;n++)for(let l=0;l<8;l++)if(null!==e[l][n]&&\"black\"!==r(e[l][n]))switch(i(e[l][n])){case\"pawn\":d(n,l,t,\"white\");break;case\"knight\":a(n,l,t);break;case\"bishop\":c(n,l,t,e);break;case\"rook\":h(n,l,t,e);break;case\"queen\":h(n,l,t,e),c(n,l,t,e);case\"king\":p(n,l,t)}return t}function m(e){let t=[[],[],[],[],[],[],[],[]];for(let e=0;e<8;e++)for(let n=0;n<8;n++)t[n][e]=!1;for(let n=0;n<8;n++)for(let l=0;l<8;l++)if(null!==e[l][n]&&\"white\"!==r(e[l][n]))switch(i(e[l][n])){case\"pawn\":d(n,l,t,\"black\");break;case\"knight\":a(n,l,t);break;case\"bishop\":c(n,l,t,e);break;case\"rook\":h(n,l,t,e);break;case\"queen\":h(n,l,t,e),c(n,l,t,e);break;case\"king\":p(n,l,t)}return t}function d(e,t,n,l){\"white\"===l?(e-1>=0&&(n[t-1][e-1]=!0),e+1<8&&(n[t-1][e+1]=!0)):(e-1>=0&&(n[t+1][e-1]=!0),e+1<8&&(n[t+1][e+1]=!0))}function a(e,t,n){t+2<8&&e+1<8&&(n[t+2][e+1]=!0),t+2<8&&e-1>=0&&(n[t+2][e-1]=!0),t-2>=0&&e+1<8&&(n[t-2][e+1]=!0),t-2>=0&&e-1>=0&&(n[t-2][e-1]=!0),t+1<8&&e+2<8&&(n[t+1][e+2]=!0),t+1<8&&e-2>=0&&(n[t+1][e-2]=!0),t-1>=0&&e+2<8&&(n[t-1][e+2]=!0),t-1>=0&&e-2>=0&&(n[t-1][e-2]=!0)}function c(e,t,n,l){for(let r=1;e+r<8&&t+r<8&&(n[t+r][e+r]=!0,null===l[t+r][e+r]);r++);for(let r=1;e-r>=0&&t-r>=0&&(n[t-r][e-r]=!0,null===l[t-r][e-r]);r++);for(let r=1;e-r>=0&&t+r<8&&(n[t+r][e-r]=!0,null===l[t+r][e-r]);r++);for(let r=1;e+r<8&&t-r>=0&&(n[t-r][e+r]=!0,null===l[t-r][e+r]);r++);}function h(e,t,n,l){for(let r=1;e+r<8&&(n[t][e+r]=!0,null===l[t][e+r]);r++);for(let r=1;e-r>=0&&(n[t][e-r]=!0,null===l[t][e-r]);r++);for(let r=1;t+r<8&&(n[t+r][e]=!0,null===l[t+r][e]);r++);for(let r=1;t-r>=0&&(n[t-r][e]=!0,null===l[t-r][e]);r++);}function p(e,t,n){t+1<8&&e+1<8&&(n[t+1][e+1]=!0),t+1<8&&e-1>=0&&(n[t+1][e-1]=!0),t-1>=0&&e+1<8&&(n[t-1][e+1]=!0),t-1>=0&&e-1>=0&&(n[t-1][e-1]=!0),t+1<8&&(n[t+1][e]=!0),t-1>=0&&(n[t-1][e]=!0),e+1<8&&(n[t][e+1]=!0),e-1>=0&&(n[t][e-1]=!0)}function f(e,t,n,i){for(let d=e+1;d<8;d++){let a=l=>{let r=!1;R.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),R.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<K.length;)A.removeChild(K.shift());if(null!==b[t][d]&&(r=!0,A.removeChild(b[t][d])),b[t][d]=b[t][e],b[t][e]=null,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let e=document.createElement(\"tr\"),n=document.createElement(\"td\");n.textContent=++N.moveCount,e.appendChild(n),(n=document.createElement(\"td\")).textContent=(i?\"Q\":\"R\")+(r?\"x\":\"\")+o(d)+String(8-t),e.appendChild(n),document.getElementById(\"moveHistory\").appendChild(e),N.prevTR=e}else{let e=document.createElement(\"td\");(e=document.createElement(\"td\")).textContent=(i?\"Q\":\"R\")+(r?\"x\":\"\")+o(d)+String(8-t),N.prevTR.appendChild(e),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}\"white\"===n?0===e?B.wLeft=!0:B.wRight=!0:0===e?B.bLeft=!0:B.bRight=!0};if(null!==b[t][d]){if(r(b[t][d])!==n){let r=!1,i=Array.from(b,e=>Array.from(e));i[t][d]=i[t][e],i[t][e]=null,\"white\"===n?m(i)[H.y][H.x]&&(r=!0):u(i)[I.y][I.x]&&(r=!0),r||K.push(l(\"moveLocation\",d,t,a))}break}let c=!1,h=Array.from(b,e=>Array.from(e));h[t][d]=h[t][e],h[t][e]=null,\"white\"===n?m(h)[H.y][H.x]&&(c=!0):u(h)[I.y][I.x]&&(c=!0),c||K.push(l(\"moveLocation\",d,t,a))}for(let d=e-1;d>=0;d--){let a=l=>{let r=!1;R.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),R.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<K.length;)A.removeChild(K.shift());if(null!==b[t][d]&&(r=!0,A.removeChild(b[t][d])),b[t][d]=b[t][e],b[t][e]=null,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let e=document.createElement(\"tr\"),n=document.createElement(\"td\");n.textContent=++N.moveCount,e.appendChild(n),(n=document.createElement(\"td\")).textContent=(i?\"Q\":\"R\")+(r?\"x\":\"\")+o(d)+String(8-t),e.appendChild(n),document.getElementById(\"moveHistory\").appendChild(e),N.prevTR=e}else{let e=document.createElement(\"td\");(e=document.createElement(\"td\")).textContent=(i?\"Q\":\"R\")+(r?\"x\":\"\")+o(d)+String(8-t),N.prevTR.appendChild(e),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}\"white\"===n?0===e?B.wLeft=!0:B.wRight=!0:0===e?B.bLeft=!0:B.bRight=!0};if(null!==b[t][d]){if(r(b[t][d])!==n){let r=!1,i=Array.from(b,e=>Array.from(e));i[t][d]=i[t][e],i[t][e]=null,\"white\"===n?m(i)[H.y][H.x]&&(r=!0):u(i)[I.y][I.x]&&(r=!0),r||K.push(l(\"moveLocation\",d,t,a))}break}let c=!1,h=Array.from(b,e=>Array.from(e));h[t][d]=h[t][e],h[t][e]=null,\"white\"===n?m(h)[H.y][H.x]&&(c=!0):u(h)[I.y][I.x]&&(c=!0),c||K.push(l(\"moveLocation\",d,t,a))}for(let d=t+1;d<8;d++){let a=l=>{let r=!1;R.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),R.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<K.length;)A.removeChild(K.shift());if(null!==b[d][e]&&(r=!0,A.removeChild(b[d][e])),b[d][e]=b[t][e],b[t][e]=null,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let t=document.createElement(\"tr\"),n=document.createElement(\"td\");n.textContent=++N.moveCount,t.appendChild(n),(n=document.createElement(\"td\")).textContent=(i?\"Q\":\"R\")+(r?\"x\":\"\")+o(e)+String(8-d),t.appendChild(n),document.getElementById(\"moveHistory\").appendChild(t),N.prevTR=t}else{let t=document.createElement(\"td\");(t=document.createElement(\"td\")).textContent=(i?\"Q\":\"R\")+(r?\"x\":\"\")+o(e)+String(8-d),N.prevTR.appendChild(t),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}\"white\"===n?0===e?B.wLeft=!0:B.wRight=!0:0===e?B.bLeft=!0:B.bRight=!0};if(null!==b[d][e]){if(r(b[d][e])!==n){let r=!1,i=Array.from(b,e=>Array.from(e));i[d][e]=i[t][e],i[t][e]=null,\"white\"===n?m(i)[H.y][H.x]&&(r=!0):u(i)[I.y][I.x]&&(r=!0),r||K.push(l(\"moveLocation\",e,d,a))}break}let c=!1,h=Array.from(b,e=>Array.from(e));h[d][e]=h[t][e],h[t][e]=null,\"white\"===n?m(h)[H.y][H.x]&&(c=!0):u(h)[I.y][I.x]&&(c=!0),c||K.push(l(\"moveLocation\",e,d,a))}for(let d=t-1;d>=0;d--){let a=l=>{let r=!1;R.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),R.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<K.length;)A.removeChild(K.shift());if(null!==b[d][e]&&(r=!0,A.removeChild(b[d][e])),b[d][e]=b[t][e],b[t][e]=null,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let t=document.createElement(\"tr\"),n=document.createElement(\"td\");n.textContent=++N.moveCount,t.appendChild(n),(n=document.createElement(\"td\")).textContent=(i?\"Q\":\"R\")+(r?\"x\":\"\")+o(e)+String(8-d),t.appendChild(n),document.getElementById(\"moveHistory\").appendChild(t),N.prevTR=t}else{let t=document.createElement(\"td\");(t=document.createElement(\"td\")).textContent=(i?\"Q\":\"R\")+(r?\"x\":\"\")+o(e)+String(8-d),N.prevTR.appendChild(t),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}\"white\"===n?0===e?B.wLeft=!0:B.wRight=!0:0===e?B.bLeft=!0:B.bRight=!0};if(null!==b[d][e]){if(r(b[d][e])!==n){let r=!1,i=Array.from(b,e=>Array.from(e));i[d][e]=i[t][e],i[t][e]=null,\"white\"===n?m(i)[H.y][H.x]&&(r=!0):u(i)[I.y][I.x]&&(r=!0),r||K.push(l(\"moveLocation\",e,d,a))}break}let c=!1,h=Array.from(b,e=>Array.from(e));h[d][e]=h[t][e],h[t][e]=null,\"white\"===n?m(h)[H.y][H.x]&&(c=!0):u(h)[I.y][I.x]&&(c=!0),c||K.push(l(\"moveLocation\",e,d,a))}}function y(e,t,n,i){for(let d=1;t+d<8&&e+d<8;d++){let a=n=>{let l=!1;R.setAttribute(\"x\",n.target.getAttribute(\"cx\")-25),R.setAttribute(\"y\",n.target.getAttribute(\"cy\")-25);for(let e=0;e<K.length;)A.removeChild(K.shift());if(null!==b[t+d][e+d]&&(l=!0,A.removeChild(b[t+d][e+d])),b[t+d][e+d]=b[t][e],b[t][e]=null,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let n=document.createElement(\"tr\"),r=document.createElement(\"td\");r.textContent=++N.moveCount,n.appendChild(r),(r=document.createElement(\"td\")).textContent=(i?\"Q\":\"B\")+(l?\"x\":\"\")+o(e+d)+String(8-(t+d)),n.appendChild(r),document.getElementById(\"moveHistory\").appendChild(n),N.prevTR=n}else{let n=document.createElement(\"td\");(n=document.createElement(\"td\")).textContent=(i?\"Q\":\"B\")+(l?\"x\":\"\")+o(e+d)+String(8-(t+d)),N.prevTR.appendChild(n),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}};if(null!==b[t+d][e+d]){if(r(b[t+d][e+d])!==n){let r=!1,i=Array.from(b,e=>Array.from(e));i[t+d][e+d]=i[t][e],i[t][e]=null,\"white\"===n?m(i)[H.y][H.x]&&(r=!0):u(i)[I.y][I.x]&&(r=!0),r||K.push(l(\"moveLocation\",e+d,t+d,a))}break}let c=!1,h=Array.from(b,e=>Array.from(e));h[t+d][e+d]=h[t][e],h[t][e]=null,\"white\"===n?m(h)[H.y][H.x]&&(c=!0):u(h)[I.y][I.x]&&(c=!0),c||K.push(l(\"moveLocation\",e+d,t+d,a))}for(let d=1;t-d>=0&&e-d>=0;d++){let a=n=>{let l=!1;R.setAttribute(\"x\",n.target.getAttribute(\"cx\")-25),R.setAttribute(\"y\",n.target.getAttribute(\"cy\")-25);for(let e=0;e<K.length;)A.removeChild(K.shift());if(null!==b[t-d][e-d]&&(l=!0,A.removeChild(b[t-d][e-d])),b[t-d][e-d]=b[t][e],b[t][e]=null,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let n=document.createElement(\"tr\"),r=document.createElement(\"td\");r.textContent=++N.moveCount,n.appendChild(r),(r=document.createElement(\"td\")).textContent=(i?\"Q\":\"B\")+(l?\"x\":\"\")+o(e-d)+String(8-(t-d)),n.appendChild(r),document.getElementById(\"moveHistory\").appendChild(n),N.prevTR=n}else{let n=document.createElement(\"td\");(n=document.createElement(\"td\")).textContent=(i?\"Q\":\"B\")+(l?\"x\":\"\")+o(e-d)+String(8-(t-d)),N.prevTR.appendChild(n),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}};if(null!==b[t-d][e-d]){if(r(b[t-d][e-d])!==n){let r=!1,i=Array.from(b,e=>Array.from(e));i[t-d][e-d]=i[t][e],i[t][e]=null,\"white\"===n?m(i)[H.y][H.x]&&(r=!0):u(i)[I.y][I.x]&&(r=!0),r||K.push(l(\"moveLocation\",e-d,t-d,a))}break}let c=!1,h=Array.from(b,e=>Array.from(e));h[t-d][e-d]=h[t][e],h[t][e]=null,\"white\"===n?m(h)[H.y][H.x]&&(c=!0):u(h)[I.y][I.x]&&(c=!0),c||K.push(l(\"moveLocation\",e-d,t-d,a))}for(let d=1;t+d<8&&e-d>=0;d++){let a=n=>{let l=!1;R.setAttribute(\"x\",n.target.getAttribute(\"cx\")-25),R.setAttribute(\"y\",n.target.getAttribute(\"cy\")-25);for(let e=0;e<K.length;)A.removeChild(K.shift());if(null!==b[t+d][e-d]&&(l=!0,A.removeChild(b[t+d][e-d])),b[t+d][e-d]=b[t][e],b[t][e]=null,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let n=document.createElement(\"tr\"),r=document.createElement(\"td\");r.textContent=++N.moveCount,n.appendChild(r),(r=document.createElement(\"td\")).textContent=(i?\"Q\":\"B\")+(l?\"x\":\"\")+o(e-d)+String(8-(t+d)),n.appendChild(r),document.getElementById(\"moveHistory\").appendChild(n),N.prevTR=n}else{let n=document.createElement(\"td\");(n=document.createElement(\"td\")).textContent=(i?\"Q\":\"B\")+(l?\"x\":\"\")+o(e-d)+String(8-(t+d)),N.prevTR.appendChild(n),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}};if(null!==b[t+d][e-d]){if(r(b[t+d][e-d])!==n){let r=!1,i=Array.from(b,e=>Array.from(e));i[t+d][e-d]=i[t][e],i[t][e]=null,\"white\"===n?m(i)[H.y][H.x]&&(r=!0):u(i)[I.y][I.x]&&(r=!0),r||K.push(l(\"moveLocation\",e-d,t+d,a))}break}let c=!1,h=Array.from(b,e=>Array.from(e));h[t+d][e-d]=h[t][e],h[t][e]=null,\"white\"===n?m(h)[H.y][H.x]&&(c=!0):u(h)[I.y][I.x]&&(c=!0),c||K.push(l(\"moveLocation\",e-d,t+d,a))}for(let d=1;t-d>=0&&e+d<8;d++){let a=n=>{let l=!1;R.setAttribute(\"x\",n.target.getAttribute(\"cx\")-25),R.setAttribute(\"y\",n.target.getAttribute(\"cy\")-25);for(let e=0;e<K.length;)A.removeChild(K.shift());if(null!==b[t-d][e+d]&&(l=!0,A.removeChild(b[t-d][e+d])),b[t-d][e+d]=b[t][e],b[t][e]=null,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let n=document.createElement(\"tr\"),r=document.createElement(\"td\");r.textContent=++N.moveCount,n.appendChild(r),(r=document.createElement(\"td\")).textContent=(i?\"Q\":\"B\")+(l?\"x\":\"\")+o(e+d)+String(8-(t-d)),n.appendChild(r),document.getElementById(\"moveHistory\").appendChild(n),N.prevTR=n}else{let n=document.createElement(\"td\");(n=document.createElement(\"td\")).textContent=(i?\"Q\":\"B\")+(l?\"x\":\"\")+o(e+d)+String(8-(t-d)),N.prevTR.appendChild(n),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}};if(null!==b[t-d][e+d]){if(r(b[t-d][e+d])!==n){let r=!1,i=Array.from(b,e=>Array.from(e));i[t-d][e+d]=i[t][e],i[t][e]=null,\"white\"===n?m(i)[H.y][H.x]&&(r=!0):u(i)[I.y][I.x]&&(r=!0),r||K.push(l(\"moveLocation\",e+d,t-d,a))}break}let c=!1,h=Array.from(b,e=>Array.from(e));h[t-d][e+d]=h[t][e],h[t][e]=null,\"white\"===n?m(h)[H.y][H.x]&&(c=!0):u(h)[I.y][I.x]&&(c=!0),c||K.push(l(\"moveLocation\",e+d,t-d,a))}}function g(e,t,n){let l=\"white\"===n;if(null===b[l?t-1:t+1][e]){let n=Array.from(b,e=>Array.from(e));if(n[l?t-1:t+1][e]=n[t][e],n[t][e]=null,l){if(!m(n)[whiteKing.y][whiteKing.x])return console.log(\"up1\",e,t),!0}else if(!u(n)[blackKing.y][blackKing.x])return console.log(\"up1\",e,t),!0;if(null===b[l?t-2:t+2][e])if((n=Array.from(b,e=>Array.from(e)))[l?t-2:t+2][e]=n[t][e],n[t][e]=null,l){if(!m(n)[whiteKing.y][whiteKing.x])return console.log(\"up2\",e,t),!0}else if(!u(n)[blackKing.y][blackKing.x])return console.log(\"up2\",e,t),!0}if(e+1<8&&null!==b[l?t-1:t+1][e+1]&&r(b[l?t-1:t+1][e+1])!==n){let n=Array.from(b,e=>Array.from(e));if(n[l?t-1:t+1][e+1]=n[t][e],n[t][e]=null,l){if(!m(n)[whiteKing.y][whiteKing.x])return console.log(\"up1right1\",e,t),!0}else if(!u(n)[blackKing.y][blackKing.x])return console.log(\"up1right1\",e,t),!0}if(e-1>=0&&null!==b[l?t-1:t+1][e-1]&&r(b[l?t-1:t+1][e-1])!==n){let n=Array.from(b,e=>Array.from(e));if(n[l?t-1:t+1][e-1]=n[t][e],n[t][e]=null,l){if(!m(n)[whiteKing.y][whiteKing.x])return console.log(\"up1left1\",e,t),!0}else if(!u(n)[blackKing.y][blackKing.x])return console.log(\"up1left1\",e,t),!0}if(epMove.x===e-1&&epMove.y===t&&null===b[l?t-1:t+1][e-1]){let n=Array.from(b,e=>Array.from(e));if(n[l?t-1:t+1][e-1]=n[t][e],n[t][e]=null,n[t][e-1]=null,l){if(!m(n)[whiteKing.y][whiteKing.x])return console.log(\"epleft\",e,t),!0}else if(!u(n)[blackKing.y][blackKing.x])return console.log(\"epleft\",e,t),!0}if(epMove.x===e+1&&epMove.y===t&&null==b[l?t-1:t+1][e+1]){let n=Array.from(b,e=>Array.from(e));if(n[l?t-1:t+1][e-1]=n[t][e],n[t][e]=null,n[t][e+1]=null,l){if(!m(n)[whiteKing.y][whiteKing.x])return console.log(\"epright\",e,t),!0}else if(!u(n)[blackKing.y][blackKing.x])return console.log(\"epright\",e,t),!0}return!1}function v(e,t,n){if(t<=5&&e<=6&&(null===b[t+2][e+1]||r(b[t+2][e+1])!==n)){let l=Array.from(b,e=>Array.from(e));if(l[t+2][e+1]=l[t][e],l[t][e]=null,\"white\"===n){if(!m(l)[whiteKing.y][whiteKing.x])return!0}else if(!u(l)[blackKing.y][blackKing.x])return!0}if(t>=2&&e>=1&&(null===b[t-2][e-1]||r(b[t-2][e-1])!==n)){let l=Array.from(b,e=>Array.from(e));if(l[t-2][e-1]=l[t][e],l[t][e]=null,\"white\"===n){if(!m(l)[whiteKing.y][whiteKing.x])return!0}else if(!u(l)[blackKing.y][blackKing.x])return!0}if(t<=5&&e>=1&&(null===b[t+2][e-1]||r(b[t+2][e-1])!==n)){let l=Array.from(b,e=>Array.from(e));if(l[t+2][e-1]=l[t][e],l[t][e]=null,\"white\"===n){if(!m(l)[whiteKing.y][whiteKing.x])return!0}else if(!u(l)[blackKing.y][blackKing.x])return!0}if(t>=2&&e<=6&&(null===b[t-2][e+1]||r(b[t-2][e+1])!==n)){let l=Array.from(b,e=>Array.from(e));if(l[t-2][e+1]=l[t][e],l[t][e]=null,\"white\"===n){if(!m(l)[whiteKing.y][whiteKing.x])return!0}else if(!u(l)[blackKing.y][blackKing.x])return!0}if(t<=6&&e<=5&&(null===b[t+1][e+2]||r(b[t+1][e+2])!==n)){let l=Array.from(b,e=>Array.from(e));if(l[t+1][e+2]=l[t][e],l[t][e]=null,\"white\"===n){if(!m(l)[whiteKing.y][whiteKing.x])return!0}else if(!u(l)[blackKing.y][blackKing.x])return!0}if(t>=1&&e>=2&&(null===b[t-1][e-2]||r(b[t-1][e-2])!==n)){let l=Array.from(b,e=>Array.from(e));if(l[t-1][e-2]=l[t][e],l[t][e]=null,\"white\"===n){if(!m(l)[whiteKing.y][whiteKing.x])return!0}else if(!u(l)[blackKing.y][blackKing.x])return!0}if(t>=1&&e<=5&&(null===b[t-1][e+2]||r(b[t-1][e+2])!==n)){let l=Array.from(b,e=>Array.from(e));if(l[t-1][e+2]=l[t][e],l[t][e]=null,\"white\"===n){if(!m(l)[whiteKing.y][whiteKing.x])return!0}else if(!u(l)[blackKing.y][blackKing.x])return!0}if(t<=6&&e>=2&&(null===b[t+1][e-2]||r(b[t+1][e-2])!==n)){let l=Array.from(b,e=>Array.from(e));if(l[t+1][e-2]=l[t][e],l[t][XMLHttpRequestUpload]=null,\"white\"===n){if(!m(l)[whiteKing.y][whiteKing.x])return!0}else if(!u(l)[blackKing.y][blackKing.x])return!0}return!1}function C(e,t,n){for(let l=1;t+l<8&&e+l<8;l++){if(null===b[t+l][e+l]||r(b[t+l][e+l])!==n){let r=Array.from(b,e=>Array.from(e));if(r[t+l][e+l]=r[t][e],r[t][e]=null,\"white\"===n){if(!m(r)[whiteKing.y][whiteKing.x])return!0}else if(!u(r)[blackKing.y][blackKing.x])return!0}if(null!==b[t+l][e+1])break}for(let l=1;t-l>=0&&e-l>=0;l++){if(null===b[t-l][e-l]||r(b[t-l][e-l])!==n){let r=Array.from(b,e=>Array.from(e));if(r[t-l][e-l]=r[t][e],r[t][e]=null,\"white\"===n){if(!m(r)[whiteKing.y][whiteKing.x])return!0}else if(!u(r)[blackKing.y][blackKing.x])return!0}if(null!==b[t-l][e-l])break}for(let l=1;t+l<8&&e-l>=0;l++){if(null===b[t+l][e-l]||r(b[t+l][e-l])!==n){let r=Array.from(b,e=>Array.from(e));if(r[t+l][e-l]=r[t][e],r[t][e]=null,\"white\"===n){if(!m(r)[whiteKing.y][whiteKing.x])return!0}else if(!u(r)[blackKing.y][blackKing.x])return!0}if(null===b[t+l][e-l])break}for(let l=1;t-l>=0&&e+l<8;l++){if(null===b[t-l][e+l]||r(b[t-l][e+l])!==n){let r=Array.from(b,e=>Array.from(e));if(r[t-l][e+l]=r[t][e],r[t][e]=null,\"white\"===n){if(!m(r)[whiteKing.y][whiteKing.x])return!0}else if(!u(r)[blackKing.y][blackKing.x])return!0}if(null!==b[t-l][e-l])break}return!1}function x(e,t,n){for(let l=e+1;l<8;l++){if(null!==b[t][l]){if(r(b[t][l])!==n){let r=Array.from(b,e=>Array.from(e));if(r[t][l]=r[t][e],r[t][e]=null,\"white\"===n){if(!m(r)[whiteKing.y][whiteKing.x])return!0}else if(!u(r)[blackKing.y][blackKing.x])return!0}break}let i=Array.from(b,e=>Array.from(e));if(i[t][l]=i[t][e],i[t][e]=null,\"white\"===n){if(!m(i)[whiteKing.y][whiteKing.x])return!0}else if(!u(i)[blackKing.y][blackKing.x])return!0}for(let l=e-1;l>=0;l--){if(null!==b[t][l]){if(r(b[t][l])!==n){let r=Array.from(b,e=>Array.from(e));if(r[t][l]=r[t][e],r[t][e]=null,\"white\"===n){if(!m(r)[whiteKing.y][whiteKing.x])return!0}else if(!u(r)[blackKing.y][blackKing.x])return!0}break}let i=Array.from(b,e=>Array.from(e));if(i[t][l]=i[t][e],i[t][e]=null,\"white\"===n){if(!m(i)[whiteKing.y][whiteKing.x])return!0}else if(!u(i)[blackKing.y][blackKing.x])return!0}for(let l=t+1;l<8;l++){if(null!==b[l][e]){if(r(b[l][e])!==n){let r=Array.from(b,e=>Array.from(e));if(r[l][e]=r[t][e],r[t][e]=null,\"white\"===n){if(!m(r)[whiteKing.y][whiteKing.x])return!0}else if(!u(r)[blackKing.y][blackKing.x])return!0}break}let i=Array.from(b,e=>Array.from(e));if(i[l][e]=i[t][e],i[t][e]=null,\"white\"===n){if(!m(i)[whiteKing.y][whiteKing.x])return!0}else if(!u(i)[blackKing.y][blackKing.x])return!0}for(let l=t-1;l>=0;l--){if(null!==b[l][e]){if(r(b[l][e])!==n){let r=Array.from(b,e=>Array.from(e));if(r[l][e]=r[t][e],r[t][e]=null,\"white\"===n){if(!m(r)[whiteKing.y][whiteKing.x])return!0}else if(!u(r)[blackKing.y][blackKing.x])return!0}break}let i=Array.from(b,e=>Array.from(e));if(i[l][e]=i[t][e],i[t][e]=null,\"white\"===n){if(!m(i)[whiteKing.y][whiteKing.x])return!0}else if(!u(i)[blackKing.y][blackKing.x])return!0}return!1}function s(e,t,n){if(t+1<8&&e+1<8&&null!==b[t+1][e+1]&&r(b[t+1][e+1])!==n){let l=Array.from(b,e=>Array.from(e));if(l[t+1][e+1]=l[t][e],l[t][e]=null,\"white\"===n){if(!m(l)[whiteKing.y+1][whiteKing.x+1])return!0}else if(!u(l)[blackKing.y+1][blackKing.x+1])return!0}else if(t+1<8&&e+1<8&&null===b[t+1][e+1]){let l=Array.from(b,e=>Array.from(e));if(l[t+1][e+1]=l[t][e],l[t][e]=null,\"white\"===n){if(!m(l)[whiteKing.y+1][whiteKing.x+1])return!0}else if(!u(l)[blackKing.y+1][blackKing.x+1])return!0}if(t-1>=0&&e-1>=0&&null!==b[t-1][e-1]&&r(b[t-1][e-1])!==n){let l=Array.from(b,e=>Array.from(e));if(l[t-1][e-1]=l[t][e],l[t][e]=null,\"white\"===n){if(!m(l)[whiteKing.y-1][whiteKing.x-1])return!0}else if(!u(l)[blackKing.y-1][blackKing.x-1])return!0}else if(t-1>=0&&e-1>=0&&null===b[t-1][e-1]){let l=Array.from(b,e=>Array.from(e));if(l[t-1][e-1]=l[t][e],l[t][e]=null,\"white\"===n){if(!m(l)[whiteKing.y-1][whiteKing.x-1])return!0}else if(!u(l)[blackKing.y-1][blackKing.x-1])return!0}if(t-1>=0&&e+1<8&&null!==b[t-1][e+1]&&r(b[t-1][e+1])!==n){let l=Array.from(b,e=>Array.from(e));if(l[t-1][e-1]=l[t][e],l[t][e]=null,\"white\"===n){if(!m(l)[whiteKing.y-1][whiteKing.x-1])return!0}else if(!u(l)[blackKing.y-1][blackKing.x-1])return!0}else if(t-1>=0&&e+1<8&&null===b[t-1][e+1]){let l=Array.from(b,e=>Array.from(e));if(l[t-1][e+1]=l[t][e],l[t][e]=null,\"white\"===n){if(!m(l)[whiteKing.y-1][whiteKing.x+1])return!0}else if(!u(l)[blackKing.y-1][blackKing.x+1])return!0}if(t+1<8&&e-1>=0&&null!==b[t+1][e-1]&&r(b[t+1][e-1])!==n){let l=Array.from(b,e=>Array.from(e));if(l[t+1][e-1]=l[t][e],l[t][e]=null,\"white\"===n){if(!m(l)[whiteKing.y+1][whiteKing.x-1])return!0}else if(!u(l)[blackKing.y+1][blackKing.x-1])return!0}else if(t+1<8&&e-1>=0&&null===b[t+1][e-1]){let l=Array.from(b,e=>Array.from(e));if(l[t+1][e-1]=l[t][e],l[t][e]=null,\"white\"===n){if(!m(l)[whiteKing.y+1][whiteKing.x-1])return!0}else if(!u(l)[blackKing.y+1][blackKing.x-1])return!0}if(t+1<8&&null!==b[t+1][e]&&r(b[t+1][e])!==n){let l=Array.from(b,e=>Array.from(e));if(l[t+1][e]=l[t][e],l[t][e]=null,\"white\"===n){if(!m(l)[whiteKing.y+1][whiteKing.x])return!0}else if(!u(l)[blackKing.y+1][blackKing.x])return!0}else if(t+1<8&&null===b[t+1][e]){let l=Array.from(b,e=>Array.from(e));if(l[t+1][e]=l[t][e],l[t][e]=null,\"white\"===n){if(!m(l)[whiteKing.y+1][whiteKing.x])return!0}else if(!u(l)[blackKing.y+1][blackKing.x])return!0}if(t-1>=0&&null!==b[t-1][e]&&r(b[t-1][e])!==n){let l=Array.from(b,e=>Array.from(e));if(l[t-1][e]=l[t][e],l[t][e]=null,\"white\"===n){if(!m(l)[whiteKing.y-1][whiteKing.x])return!0}else if(!u(l)[blackKing.y-1][blackKing.x])return!0}else if(t-1>=0&&null===b[t-1][e]){let l=Array.from(b,e=>Array.from(e));if(l[t-1][e]=l[t][e],l[t][e]=null,\"white\"===n){if(!m(l)[whiteKing.y-1][whiteKing.x])return!0}else if(!u(l)[blackKing.y-1][blackKing.x])return!0}if(e+1<8&&null!==b[t][e+1]&&r(b[t][e+1])!==n){let l=Array.from(b,e=>Array.from(e));if(l[t][e+1]=l[t][e],l[t][e]=null,\"white\"===n){if(!m(l)[whiteKing.y][whiteKing.x+1])return!0}else if(!u(l)[blackKing.y][blackKing.x+1])return!0}else if(e+1<8&&null===b[t][e+1]){let l=Array.from(b,e=>Array.from(e));if(l[t][e+1]=l[t][e],l[t][e]=null,\"white\"===n){if(!m(l)[whiteKing.y][whiteKing.x+1])return!0}else if(!u(l)[blackKing.y][blackKing.x+1])return!0}if(e-1>=0&&null!==b[t][e-1]&&r(b[t][e-1])!==n){let l=Array.from(b,e=>Array.from(e));if(l[t][e-1]=l[t][e],l[t][e]=null,\"white\"===n){if(!m(l)[whiteKing.y][whiteKing.x-1])return!0}else if(!u(l)[blackKing.y][blackKing.x-1])return!0}else if(e-1>=0&&null===b[t][e-1]){let l=Array.from(b,e=>Array.from(e));if(l[t][e-1]=l[t][e],l[t][e]=null,\"white\"===n){if(!m(l)[whiteKing.y][whiteKing.x-1])return!0}else if(!u(l)[blackKing.y][blackKing.x-1])return!0}return!1}n.r(t),n.d(t,\"board\",function(){return b}),n.d(t,\"g\",function(){return A}),n.d(t,\"shownPiece\",function(){return R}),n.d(t,\"shownLocations\",function(){return K}),n.d(t,\"kingMoved\",function(){return T}),n.d(t,\"rookMoved\",function(){return B}),n.d(t,\"epMove\",function(){return S}),n.d(t,\"blackKing\",function(){return I}),n.d(t,\"whiteKing\",function(){return H}),n.d(t,\"pieceBehavior\",function(){return Q}),n.d(t,\"data\",function(){return N}),n.d(t,\"updateControls\",function(){return O});const b=[[],[],[],[],[],[],[],[]];var w,A,E=[[],[],[],[],[],[],[],[]],k=[[],[],[],[],[],[],[],[]],R=null;const K=[],T={white:!1,black:!1},B={bLeft:!1,bRight:!1,wLeft:!1,wRight:!1},S={x:-1,y:-1},I={x:4,y:0},H={x:4,y:7};var L=null;let _=null;const Q=e=>{let t=Number(e.target.getAttribute(\"x\")),n=Number(e.target.getAttribute(\"y\")),d=i(e.target),a=r(e.target);for(let e=0;e<K.length;)A.removeChild(K.shift());R=e.target,function(e,t,n,i){if(i!==N.moveColor)return;switch(n){case\"pawn\":!function(e,t,n){let i=\"white\"===n;if(null===b[i?t-1:t+1][e]){let n=!1,r=Array.from(b,e=>Array.from(e));if(r[i?t-1:t+1][e]=r[t][e],r[t][e]=null,i?m(r)[H.y][H.x]&&(n=!0):u(r)[I.y][I.x]&&(n=!0),!n)if(t===(i?1:6)){let n=n=>{for(let e=0;e<K.length;)A.removeChild(K.shift());if(A.removeChild(b[t][e]),b[t][e]=null,b[i?t-1:t+1][e]=l(i?\"Queen_White.png\":\"Queen_Black.png\",e,i?t-1:t+1,Q),N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let n=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++N.moveCount,n.appendChild(l),(l=document.createElement(\"td\")).textContent=o(e)+String(8-(t-1))+\"=Q\",n.appendChild(l),document.getElementById(\"moveHistory\").appendChild(n),N.prevTR=n}else{let n=document.createElement(\"td\");(n=document.createElement(\"td\")).textContent=o(e)+String(8-(t+1))+\"=Q\",N.prevTR.appendChild(n),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}};K.push(l(\"moveLocation\",e,t,n))}else{let n=n=>{R.setAttribute(\"x\",n.target.getAttribute(\"cx\")-25),R.setAttribute(\"y\",n.target.getAttribute(\"cy\")-25);for(let e=0;e<K.length;)A.removeChild(K.shift());if(b[i?t-1:t+1][e]=b[t][e],b[t][e]=null,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let n=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++N.moveCount,n.appendChild(l),(l=document.createElement(\"td\")).textContent=o(e)+String(8-(t-1)),n.appendChild(l),document.getElementById(\"moveHistory\").appendChild(n),N.prevTR=n}else{let n=document.createElement(\"td\");(n=document.createElement(\"td\")).textContent=o(e)+String(8-(t+1)),N.prevTR.appendChild(n),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}};K.push(l(\"moveLocation\",e,i?t-1:t+1,n))}if(n=!1,(r=Array.from(b,e=>Array.from(e)))[i?t-2:t+2][e]=r[t][e],r[t][e]=null,i?m(r)[H.y][H.x]&&(n=!0):u(r)[I.y][I.x]&&(n=!0),!n&&t===(i?6:1)&&null===b[i?t-2:t+2][e]){let n=n=>{R.setAttribute(\"x\",n.target.getAttribute(\"cx\")-25),R.setAttribute(\"y\",n.target.getAttribute(\"cy\")-25);for(let e=0;e<K.length;)A.removeChild(K.shift());if(b[i?t-2:t+2][e]=b[t][e],b[t][e]=null,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=e,S.y=i?t-2:t+2,O(),null===N.prevTR){let n=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++N.moveCount,n.appendChild(l),(l=document.createElement(\"td\")).textContent=o(e)+String(8-(t-2)),n.appendChild(l),document.getElementById(\"moveHistory\").appendChild(n),N.prevTR=n}else{let n=document.createElement(\"td\");(n=document.createElement(\"td\")).textContent=o(e)+String(8-(t+2)),N.prevTR.appendChild(n),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}};K.push(l(\"moveLocation\",e,i?t-2:t+2,n))}}if(e+1<8&&null!==b[i?t-1:t+1][e+1]&&r(b[i?t-1:t+1][e+1])!==n){let n=!1,r=Array.from(b,e=>Array.from(e));if(r[i?t-1:t+1][e+1]=r[t][e],r[t][e]=null,i?m(r)[H.y][H.x]&&(n=!0):u(r)[I.y][I.x]&&(n=!0),!n)if(t===(i?1:6)){let n=n=>{for(let e=0;e<K.length;)A.removeChild(K.shift());A.removeChild(b[t][e]),b[t][e]=null;let r=l(i?\"Queen_White.png\":\"Queen_Black.png\",e+1,i?t-1:t+1,Q);if(A.appendChild(r),A.removeChild(b[i?t-1:t+1][e+1]),b[i?t-1:t+1][e+1]=r,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let n=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++N.moveCount,n.appendChild(l),(l=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e+1)+String(8-(t-1)+\"=Q\"),n.appendChild(l),document.getElementById(\"moveHistory\").appendChild(n),N.prevTR=n}else{let n=document.createElement(\"td\");(n=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e+1)+String(8-(t+1)+\"=Q\"),N.prevTR.appendChild(n),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}};K.push(l(\"moveLocation\",e+1,i?t-1:t+1,n))}else{let n=n=>{R.setAttribute(\"x\",n.target.getAttribute(\"cx\")-25),R.setAttribute(\"y\",n.target.getAttribute(\"cy\")-25);for(let e=0;e<K.length;)A.removeChild(K.shift());let l=b[i?t-1:t+1][e+1];if(A.removeChild(l),b[i?t-1:t+1][e+1]=null,b[i?t-1:t+1][e+1]=b[t][e],b[t][e]=null,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let n=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++N.moveCount,n.appendChild(l),(l=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e+1)+String(8-(t-1)),n.appendChild(l),document.getElementById(\"moveHistory\").appendChild(n),N.prevTR=n}else{let n=document.createElement(\"td\");(n=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e+1)+String(8-(t+1)),N.prevTR.appendChild(n),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}};K.push(l(\"moveLocation\",e+1,i?t-1:t+1,n))}}if(e-1>=0&&null!==b[i?t-1:t+1][e-1]&&r(b[i?t-1:t+1][e-1])!==n){let n=!1,r=Array.from(b,e=>Array.from(e));if(r[i?t-1:t+1][e-1]=r[t][e],r[t][e]=null,i?m(r)[H.y][H.x]&&(n=!0):u(r)[I.y][I.x]&&(n=!0),!n)if(t===(i?1:6)){let n=n=>{for(let e=0;e<K.length;)A.removeChild(K.shift());A.removeChild(b[t][e]),b[t][e]=null;let r=l(i?\"Queen_White.png\":\"Queen_Black.png\",e-1,i?t-1:t+1,Q);if(A.appendChild(r),A.removeChild(b[i?t-1:t+1][e-1]),b[i?t-1:t+1][e-1]=r,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let n=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++N.moveCount,n.appendChild(l),(l=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e-1)+String(8-(t-1)+\"=Q\"),n.appendChild(l),document.getElementById(\"moveHistory\").appendChild(n),N.prevTR=n}else{let n=document.createElement(\"td\");(n=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e-1)+String(8-(t+1)+\"=Q\"),N.prevTR.appendChild(n),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}};K.push(l(\"moveLocation\",e-1,i?t-1:t+1,n))}else{let n=n=>{R.setAttribute(\"x\",n.target.getAttribute(\"cx\")-25),R.setAttribute(\"y\",n.target.getAttribute(\"cy\")-25);for(let e=0;e<K.length;)A.removeChild(K.shift());if(A.removeChild(b[i?t-1:t+1][e-1]),b[i?t-1:t+1][e-1]=null,b[i?t-1:t+1][e-1]=b[t][e],b[t][e]=null,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let n=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++N.moveCount,n.appendChild(l),(l=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e-1)+String(8-(t-1)),n.appendChild(l),document.getElementById(\"moveHistory\").appendChild(n),N.prevTR=n}else{let n=document.createElement(\"td\");(n=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e-1)+String(8-(t+1)),N.prevTR.appendChild(n),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}};K.push(l(\"moveLocation\",e-1,i?t-1:t+1,n))}}if(S.x===e-1&&S.y===t&&null===b[i?t-1:t+1][e-1]){let n=!1,r=Array.from(b,e=>Array.from(e));if(r[i?t-1:t+1][e-1]=r[t][e],r[t][e]=null,r[t][e-1]=null,i?m(r)[H.y][H.x]&&(n=!0):u(r)[I.y][I.x]&&(n=!0),!n){let n=n=>{R.setAttribute(\"x\",n.target.getAttribute(\"cx\")-25),R.setAttribute(\"y\",n.target.getAttribute(\"cy\")-25);for(let e=0;e<K.length;)A.removeChild(K.shift());if(A.removeChild(b[t][e-1]),b[t][e-1]=null,b[i?t-1:t+1][e-1]=b[t][e],b[t][e]=null,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let n=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++N.moveCount,n.appendChild(l),(l=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e-1)+String(8-(t-1)),n.appendChild(l),document.getElementById(\"moveHistory\").appendChild(n),N.prevTR=n}else{let n=document.createElement(\"td\");(n=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e-1)+String(8-(t+1)),N.prevTR.appendChild(n),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}};K.push(l(\"moveLocation\",e-1,i?t-1:t+1,n))}}if(S.x===e+1&&S.y===t&&null==b[i?t-1:t+1][e+1]){let n=!1,r=Array.from(b,e=>Array.from(e));if(r[i?t-1:t+1][e-1]=r[t][e],r[t][e]=null,r[t][e+1]=null,i?m(r)[H.y][H.x]&&(n=!0):u(r)[I.y][I.x]&&(n=!0),!n){let n=n=>{R.setAttribute(\"x\",n.target.getAttribute(\"cx\")-25),R.setAttribute(\"y\",n.target.getAttribute(\"cy\")-25);for(let e=0;e<K.length;)A.removeChild(K.shift());if(A.removeChild(b[t][e+1]),b[t][e+1]=null,b[i?t-1:t+1][e+1]=b[t][e],b[t][e]=null,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let n=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++N.moveCount,n.appendChild(l),(l=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e+1)+String(8-(t-1)),n.appendChild(l),document.getElementById(\"moveHistory\").appendChild(n),N.prevTR=n}else{let n=document.createElement(\"td\");(n=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e+1)+String(8-(t+1)),N.prevTR.appendChild(n),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}};K.push(l(\"moveLocation\",e+1,i?t-1:t+1,n))}}}(e/50,t/50,i);break;case\"knight\":!function(e,t,n){if(t<=5&&e<=6&&(null===b[t+2][e+1]||r(b[t+2][e+1])!==n)){let r=!1,i=Array.from(b,e=>Array.from(e));if(i[t+2][e+1]=i[t][e],i[t][e]=null,\"white\"===n?m(i)[H.y][H.x]&&(r=!0):u(i)[I.y][I.x]&&(r=!0),!r){let n=n=>{let l=!1;R.setAttribute(\"x\",n.target.getAttribute(\"cx\")-25),R.setAttribute(\"y\",n.target.getAttribute(\"cy\")-25);for(let e=0;e<K.length;)A.removeChild(K.shift());if(null!==b[t+2][e+1]&&(l=!0,A.removeChild(b[t+2][e+1])),b[t+2][e+1]=b[t][e],b[t][e]=null,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let n=document.createElement(\"tr\"),r=document.createElement(\"td\");r.textContent=++N.moveCount,n.appendChild(r),(r=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(e+1)+String(8-(t+2)),n.appendChild(r),document.getElementById(\"moveHistory\").appendChild(n),N.prevTR=n}else{let n=document.createElement(\"td\");(n=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(e+1)+String(8-(t+2)),N.prevTR.appendChild(n),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}};K.push(l(\"moveLocation\",e+1,t+2,n))}}if(t>=2&&e>=1&&(null===b[t-2][e-1]||r(b[t-2][e-1])!==n)){let r=!1,i=Array.from(b,e=>Array.from(e));if(i[t-2][e-1]=i[t][e],i[t][e]=null,\"white\"===n?m(i)[H.y][H.x]&&(r=!0):u(i)[I.y][I.x]&&(r=!0),!r){let n=n=>{let l=!1;R.setAttribute(\"x\",n.target.getAttribute(\"cx\")-25),R.setAttribute(\"y\",n.target.getAttribute(\"cy\")-25);for(let e=0;e<K.length;)A.removeChild(K.shift());if(null!==b[t-2][e-1]&&(l=!0,A.removeChild(b[t-2][e-1])),b[t-2][e-1]=b[t][e],b[t][e]=null,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let n=document.createElement(\"tr\"),r=document.createElement(\"td\");r.textContent=++N.moveCount,n.appendChild(r),(r=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(e-1)+String(8-(t-2)),n.appendChild(r),document.getElementById(\"moveHistory\").appendChild(n),N.prevTR=n}else{let n=document.createElement(\"td\");(n=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(e-1)+String(8-(t-2)),N.prevTR.appendChild(n),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}};K.push(l(\"moveLocation\",e-1,t-2,n))}}if(t<=5&&e>=1&&(null===b[t+2][e-1]||r(b[t+2][e-1])!==n)){let r=!1,i=Array.from(b,e=>Array.from(e));if(i[t+2][e-1]=i[t][e],i[t][e]=null,\"white\"===n?m(i)[H.y][H.x]&&(r=!0):u(i)[I.y][I.x]&&(r=!0),!r){let n=n=>{let l=!1;R.setAttribute(\"x\",n.target.getAttribute(\"cx\")-25),R.setAttribute(\"y\",n.target.getAttribute(\"cy\")-25);for(let e=0;e<K.length;)A.removeChild(K.shift());if(null!==b[t+2][e-1]&&(l=!0,A.removeChild(b[t+2][e-1])),b[t+2][e-1]=b[t][e],b[t][e]=null,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let n=document.createElement(\"tr\"),r=document.createElement(\"td\");r.textContent=++N.moveCount,n.appendChild(r),(r=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(e-1)+String(8-(t+2)),n.appendChild(r),document.getElementById(\"moveHistory\").appendChild(n),N.prevTR=n}else{let n=document.createElement(\"td\");(n=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(e-1)+String(8-(t+2)),N.prevTR.appendChild(n),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}};K.push(l(\"moveLocation\",e-1,t+2,n))}}if(t>=2&&e<=6&&(null===b[t-2][e+1]||r(b[t-2][e+1])!==n)){let r=!1,i=Array.from(b,e=>Array.from(e));if(i[t-2][e+1]=i[t][e],i[t][e]=null,\"white\"===n?m(i)[H.y][H.x]&&(r=!0):u(i)[I.y][I.x]&&(r=!0),!r){let n=n=>{let l=!1;R.setAttribute(\"x\",n.target.getAttribute(\"cx\")-25),R.setAttribute(\"y\",n.target.getAttribute(\"cy\")-25);for(let e=0;e<K.length;)A.removeChild(K.shift());if(null!==b[t-2][e+1]&&(l=!0,A.removeChild(b[t-2][e+1])),b[t-2][e+1]=b[t][e],b[t][e]=null,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let n=document.createElement(\"tr\"),r=document.createElement(\"td\");r.textContent=++N.moveCount,n.appendChild(r),(r=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(e+1)+String(8-(t-2)),n.appendChild(r),document.getElementById(\"moveHistory\").appendChild(n),N.prevTR=n}else{let n=document.createElement(\"td\");(n=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(e+1)+String(8-(t-2)),N.prevTR.appendChild(n),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}};K.push(l(\"moveLocation\",e+1,t-2,n))}}if(t<=6&&e<=5&&(null===b[t+1][e+2]||r(b[t+1][e+2])!==n)){let r=!1,i=Array.from(b,e=>Array.from(e));if(i[t+1][e+2]=i[t][e],i[t][e]=null,\"white\"===n?m(i)[H.y][H.x]&&(r=!0):u(i)[I.y][I.x]&&(r=!0),!r){let n=n=>{let l=!1;R.setAttribute(\"x\",n.target.getAttribute(\"cx\")-25),R.setAttribute(\"y\",n.target.getAttribute(\"cy\")-25);for(let e=0;e<K.length;)A.removeChild(K.shift());if(null!==b[t+1][e+2]&&(l=!0,A.removeChild(b[t+1][e+2])),b[t+1][e+2]=b[t][e],b[t][e]=null,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let n=document.createElement(\"tr\"),r=document.createElement(\"td\");r.textContent=++N.moveCount,n.appendChild(r),(r=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(e+2)+String(8-(t+1)),n.appendChild(r),document.getElementById(\"moveHistory\").appendChild(n),N.prevTR=n}else{let n=document.createElement(\"td\");(n=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(e+2)+String(8-(t+1)),N.prevTR.appendChild(n),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}};K.push(l(\"moveLocation\",e+2,t+1,n))}}if(t>=1&&e>=2&&(null===b[t-1][e-2]||r(b[t-1][e-2])!==n)){let r=!1,i=Array.from(b,e=>Array.from(e));if(i[t-1][e-2]=i[t][e],i[t][e]=null,\"white\"===n?m(i)[H.y][H.x]&&(r=!0):u(i)[I.y][I.x]&&(r=!0),!r){let n=n=>{let l=!1;R.setAttribute(\"x\",n.target.getAttribute(\"cx\")-25),R.setAttribute(\"y\",n.target.getAttribute(\"cy\")-25);for(let e=0;e<K.length;)A.removeChild(K.shift());if(null!==b[t-1][e-2]&&(l=!0,A.removeChild(b[t-1][e-2])),b[t-1][e-2]=b[t][e],b[t][e]=null,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let n=document.createElement(\"tr\"),r=document.createElement(\"td\");r.textContent=++N.moveCount,n.appendChild(r),(r=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(e-2)+String(8-(t-1)),n.appendChild(r),document.getElementById(\"moveHistory\").appendChild(n),N.prevTR=n}else{let n=document.createElement(\"td\");(n=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(e-2)+String(8-(t-1)),N.prevTR.appendChild(n),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}};K.push(l(\"moveLocation\",e-2,t-1,n))}}if(t>=1&&e<=5&&(null===b[t-1][e+2]||r(b[t-1][e+2])!==n)){let r=!1,i=Array.from(b,e=>Array.from(e));if(i[t-1][e+2]=i[t][e],i[t][e]=null,\"white\"===n?m(i)[H.y][H.x]&&(r=!0):u(i)[I.y][I.x]&&(r=!0),!r){let n=n=>{let l=!1;R.setAttribute(\"x\",n.target.getAttribute(\"cx\")-25),R.setAttribute(\"y\",n.target.getAttribute(\"cy\")-25);for(let e=0;e<K.length;)A.removeChild(K.shift());if(null!==b[t-1][e+2]&&(l=!0,A.removeChild(b[t-1][e+2])),b[t-1][e+2]=b[t][e],b[t][e]=null,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let n=document.createElement(\"tr\"),r=document.createElement(\"td\");r.textContent=++N.moveCount,n.appendChild(r),(r=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(e+2)+String(8-(t-1)),n.appendChild(r),document.getElementById(\"moveHistory\").appendChild(n),N.prevTR=n}else{let n=document.createElement(\"td\");(n=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(e+2)+String(8-(t-1)),N.prevTR.appendChild(n),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}};K.push(l(\"moveLocation\",e+2,t-1,n))}}if(t<=6&&e>=2&&(null===b[t+1][e-2]||r(b[t+1][e-2])!==n)){let r=!1,i=Array.from(b,e=>Array.from(e));if(i[t+1][e-2]=i[t][e],i[t][e]=null,\"white\"===n?m(i)[H.y][H.x]&&(r=!0):u(i)[I.y][I.x]&&(r=!0),!r){let n=n=>{let l=!1;R.setAttribute(\"x\",n.target.getAttribute(\"cx\")-25),R.setAttribute(\"y\",n.target.getAttribute(\"cy\")-25);for(let e=0;e<K.length;)A.removeChild(K.shift());if(null!==b[t+1][e-2]&&(l=!0,A.removeChild(b[t+1][e-2])),b[t+1][e-2]=b[t][e],b[t][e]=null,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let n=document.createElement(\"tr\"),r=document.createElement(\"td\");r.textContent=++N.moveCount,n.appendChild(r),(r=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(e-2)+String(8-(t+1)),n.appendChild(r),document.getElementById(\"moveHistory\").appendChild(n),N.prevTR=n}else{let n=document.createElement(\"td\");(n=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(e-2)+String(8-(t+1)),N.prevTR.appendChild(n),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}};K.push(l(\"moveLocation\",e-2,t+1,n))}}}(e/50,t/50,i);break;case\"rook\":f(e/50,t/50,i,!1);break;case\"bishop\":y(e/50,t/50,i,!1);break;case\"queen\":f(e/50,t/50,i,!0),y(e/50,t/50,i,!0);break;case\"king\":!function(e,t,n){if(t+1<8&&e+1<8&&(null!==b[t+1][e+1]&&r(b[t+1][e+1])!==n||null===b[t+1][e+1])){let r=!1,i=Array.from(b,e=>Array.from(e));if(i[t+1][e+1]=i[t][e],i[t][e]=null,\"white\"===n?m(i)[H.y+1][H.x+1]&&(r=!0):u(i)[I.y+1][I.x+1]&&(r=!0),!r){let r=l=>{let r=!1;R.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),R.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<K.length;)A.removeChild(K.shift());if(null!==b[t+1][e+1]&&(r=!0,A.removeChild(b[t+1][e+1])),b[t+1][e+1]=b[t][e],b[t][e]=null,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let n=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++N.moveCount,n.appendChild(l),(l=document.createElement(\"td\")).textContent=\"K\"+(r?\"x\":\"\")+o(e+1)+String(8-(t+1)),n.appendChild(l),document.getElementById(\"moveHistory\").appendChild(n),N.prevTR=n}else{let n=document.createElement(\"td\");(n=document.createElement(\"td\")).textContent=\"K\"+(r?\"x\":\"\")+o(e+1)+String(8-(t+1)),N.prevTR.appendChild(n),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}\"white\"===n?(T.white=!0,H.x=e+1,H.y=t+1):(T.black=!0,I.x=e+1,I.y=t+1)};K.push(l(\"moveLocation\",e+1,t+1,r))}}if(t-1>=0&&e-1>=0&&(null!==b[t-1][e-1]&&r(b[t-1][e-1])!==n||null===b[t-1][e-1])){let r=!1,i=Array.from(b,e=>Array.from(e));if(i[t-1][e-1]=i[t][e],i[t][e]=null,\"white\"===n?m(i)[H.y-1][H.x-1]&&(r=!0):u(i)[I.y-1][I.x-1]&&(r=!0),!r){let r=l=>{let r=!1;R.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),R.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<K.length;)A.removeChild(K.shift());if(null!==b[t-1][e-1]&&(r=!0,A.removeChild(b[t-1][e-1])),b[t-1][e-1]=b[t][e],b[t][e]=null,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let n=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++N.moveCount,n.appendChild(l),(l=document.createElement(\"td\")).textContent=\"K\"+(r?\"x\":\"\")+o(e-1)+String(8-(t-1)),n.appendChild(l),document.getElementById(\"moveHistory\").appendChild(n),N.prevTR=n}else{let n=document.createElement(\"td\");(n=document.createElement(\"td\")).textContent=\"K\"+(r?\"x\":\"\")+o(e-1)+String(8-(t-1)),N.prevTR.appendChild(n),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}\"white\"===n?(T.white=!0,H.x=e-1,H.y=t-1):(T.black=!0,I.x=e-1,I.y=t-1)};K.push(l(\"moveLocation\",e-1,t-1,r))}}if(t-1>=0&&e+1<8&&(null!==b[t-1][e+1]&&r(b[t-1][e+1])!==n||null===b[t-1][e+1])){let r=!1,i=Array.from(b,e=>Array.from(e));if(i[t-1][e+1]=i[t][e],i[t][e]=null,\"white\"===n?m(i)[H.y-1][H.x-1]&&(r=!0):u(i)[I.y-1][I.x-1]&&(r=!0),!r){let r=l=>{let r=!1;R.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),R.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<K.length;)A.removeChild(K.shift());if(null!==b[t-1][e+1]&&(r=!0,A.removeChild(b[t-1][e+1])),b[t-1][e+1]=b[t][e],b[t][e]=null,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let n=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++N.moveCount,n.appendChild(l),(l=document.createElement(\"td\")).textContent=\"K\"+(r?\"x\":\"\")+o(e+1)+String(8-(t-1)),n.appendChild(l),document.getElementById(\"moveHistory\").appendChild(n),N.prevTR=n}else{let n=document.createElement(\"td\");(n=document.createElement(\"td\")).textContent=\"K\"+(r?\"x\":\"\")+o(e+1)+String(8-(t-1)),N.prevTR.appendChild(n),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}\"white\"===n?(T.white=!0,H.x=e+1,H.y=t-1):(T.black=!0,I.x=e+1,I.y=t-1)};K.push(l(\"moveLocation\",e+1,t-1,r))}}if(t+1<8&&e-1>=0&&(null!==b[t+1][e-1]&&r(b[t+1][e-1])!==n||null===b[t+1][e-1])){let r=!1,i=Array.from(b,e=>Array.from(e));if(i[t+1][e-1]=i[t][e],i[t][e]=null,\"white\"===n?m(i)[H.y+1][H.x-1]&&(r=!0):u(i)[I.y+1][I.x-1]&&(r=!0),!r){let r=l=>{let r=!0;R.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),R.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<K.length;)A.removeChild(K.shift());if(null!==b[t+1][e-1]&&(r=!1,A.removeChild(b[t+1][e-1])),b[t+1][e-1]=b[t][e],b[t][e]=null,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let n=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++N.moveCount,n.appendChild(l),(l=document.createElement(\"td\")).textContent=\"K\"+(r?\"x\":\"\")+o(e-1)+String(8-(t+1)),n.appendChild(l),document.getElementById(\"moveHistory\").appendChild(n),N.prevTR=n}else{let n=document.createElement(\"td\");(n=document.createElement(\"td\")).textContent=\"K\"+(r?\"x\":\"\")+o(e-1)+String(8-(t+1)),N.prevTR.appendChild(n),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}\"white\"===n?(T.white=!0,H.x=e-1,H.y=t+1):(T.black=!0,I.x=e-1,I.y=t+1)};K.push(l(\"moveLocation\",e-1,t+1,r))}}if(t+1<8&&(null!==b[t+1][e]&&r(b[t+1][e])!==n||null===b[t+1][e])){let r=!1,i=Array.from(b,e=>Array.from(e));if(i[t+1][e]=i[t][e],i[t][e]=null,\"white\"===n?m(i)[H.y+1][H.x]&&(r=!0):u(i)[I.y+1][I.x]&&(r=!0),!r){let r=l=>{let r=!1;R.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),R.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<K.length;)A.removeChild(K.shift());if(null!==b[t+1][e]&&(r=!0,A.removeChild(b[t+1][e])),b[t+1][e]=b[t][e],b[t][e]=null,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let n=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++N.moveCount,n.appendChild(l),(l=document.createElement(\"td\")).textContent=\"K\"+(r?\"x\":\"\")+o(e)+String(8-(t+1)),n.appendChild(l),document.getElementById(\"moveHistory\").appendChild(n),N.prevTR=n}else{let n=document.createElement(\"td\");(n=document.createElement(\"td\")).textContent=\"K\"+(r?\"x\":\"\")+o(e)+String(8-(t+1)),N.prevTR.appendChild(n),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}\"white\"===n?(T.white=!0,H.x=e,H.y=t+1):(T.black=!0,I.x=e,I.y=t+1)};K.push(l(\"moveLocation\",e,t+1,r))}}if(t-1>=0&&(null!==b[t-1][e]&&r(b[t-1][e])!==n||null===b[t-1][e])){let r=!1,i=Array.from(b,e=>Array.from(e));if(i[t-1][e]=i[t][e],i[t][e]=null,\"white\"===n?m(i)[H.y-1][H.x]&&(r=!0):u(i)[I.y-1][I.x]&&(r=!0),!r){let r=l=>{let r=!1;R.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),R.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<K.length;)A.removeChild(K.shift());if(null!==b[t-1][e]&&(r=!0,A.removeChild(b[t-1][e])),b[t-1][e]=b[t][e],b[t][e]=null,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let n=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++N.moveCount,n.appendChild(l),(l=document.createElement(\"td\")).textContent=\"K\"+(r?\"x\":\"\")+o(e)+String(8-(t-1)),n.appendChild(l),document.getElementById(\"moveHistory\").appendChild(n),N.prevTR=n}else{let n=document.createElement(\"td\");(n=document.createElement(\"td\")).textContent=\"K\"+(r?\"x\":\"\")+o(e)+String(8-(t-1)),N.prevTR.appendChild(n),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}\"white\"===n?(T.white=!0,H.x=e,H.y=t-1):(T.black=!0,I.x=e,I.y=t-1)};K.push(l(\"moveLocation\",e,t-1,r))}}if(e+1<8&&(null!==b[t][e+1]&&r(b[t][e+1])!==n||null===b[t][e+1])){let r=!1,i=Array.from(b,e=>Array.from(e));if(i[t][e+1]=i[t][e],i[t][e]=null,\"white\"===n?m(i)[H.y][H.x+1]&&(r=!0):u(i)[I.y][I.x+1]&&(r=!0),!r){let r=l=>{let r=!1;R.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),R.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<K.length;)A.removeChild(K.shift());if(null!==b[t][e+1]&&(r=!0,A.removeChild(b[t][e+1])),b[t][e+1]=b[t][e],b[t][e]=null,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let n=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++N.moveCount,n.appendChild(l),(l=document.createElement(\"td\")).textContent=\"K\"+(r?\"x\":\"\")+o(e+1)+String(8-t),n.appendChild(l),document.getElementById(\"moveHistory\").appendChild(n),N.prevTR=n}else{let n=document.createElement(\"td\");(n=document.createElement(\"td\")).textContent=\"K\"+(r?\"x\":\"\")+o(e+1)+String(8-t),N.prevTR.appendChild(n),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}\"white\"===n?(T.white=!0,H.x=e+1,H.y=t):(T.black=!0,I.x=e+1,I.y=t)};K.push(l(\"moveLocation\",e+1,t,r))}}if(e-1>=0&&(null!==b[t][e-1]&&r(b[t][e-1])!==n||null===b[t][e-1])){let r=!1,i=Array.from(b,e=>Array.from(e));if(i[t][e-1]=i[t][e],i[t][e]=null,\"white\"===n?m(i)[H.y][H.x-1]&&(r=!0):u(i)[I.y][I.x-1]&&(r=!0),!r){let r=l=>{let r=!1;R.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),R.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<K.length;)A.removeChild(K.shift());if(null!==b[t][e-1]&&(r=!0,A.removeChild(b[t][e-1])),b[t][e-1]=b[t][e],b[t][e]=null,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let n=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++N.moveCount,n.appendChild(l),(l=document.createElement(\"td\")).textContent=\"K\"+(r?\"x\":\"\")+o(e-1)+String(8-t),n.appendChild(l),document.getElementById(\"moveHistory\").appendChild(n),N.prevTR=n}else{let n=document.createElement(\"td\");(n=document.createElement(\"td\")).textContent=\"K\"+(r?\"x\":\"\")+o(e-1)+String(8-t),N.prevTR.appendChild(n),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}\"white\"===n?(T.white=!0,H.x=e-1,H.y=t):(T.black=!0,I.x=e-1,I.y=t)};K.push(l(\"moveLocation\",e-1,t,r))}}let i=\"white\"===n?T.white:T.black;if(!i&&!N.inCheck){if(!(i=\"white\"===n?B.wLeft:B.bLeft)&&null===b[\"white\"===n?7:0][1]&&null===b[\"white\"===n?7:0][2]&&null===b[\"white\"===n?7:0][3]){let r=l=>{R.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),R.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<K.length;)A.removeChild(K.shift());let r=b[\"white\"===n?7:0][0];if(r.setAttribute(\"x\",50*(e-1)),b[t][e-2]=b[t][e],b[t][e-1]=r,b[t][e]=null,b[\"white\"===n?7:0][0]=null,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let e=document.createElement(\"tr\"),t=document.createElement(\"td\");t.textContent=++N.moveCount,e.appendChild(t),(t=document.createElement(\"td\")).textContent=\"O-O-O\",e.appendChild(t),document.getElementById(\"moveHistory\").appendChild(e),N.prevTR=e}else{let e=document.createElement(\"td\");(e=document.createElement(\"td\")).textContent=\"O-O-O\",N.prevTR.appendChild(e),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}\"white\"===n?(T.white=!0,H.x=e-2,H.y=t,B.wLeft=!0):(T.black=!0,I.x=e-2,I.y=t,B.bLeft=!0)};K.push(l(\"moveLocation\",e-2,t,r))}if(!(i=(\"white\"===n?B.wRight:B.bRight)||(\"white\"===n?T.white:T.black))&&null===b[\"white\"===n?7:0][5]&&null===b[\"white\"===n?7:0][6]){let r=l=>{R.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),R.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<K.length;)A.removeChild(K.shift());let r=b[\"white\"===n?7:0][7];if(r.setAttribute(\"x\",50*(e+1)),b[t][e+2]=b[t][e],b[t][e+1]=r,b[t][e]=null,b[\"white\"===n?7:0][7]=null,N.moveColor=\"white\"===N.moveColor?\"black\":\"white\",S.x=-1,S.y=-1,O(),null===N.prevTR){let e=document.createElement(\"tr\"),t=document.createElement(\"td\");t.textContent=++N.moveCount,e.appendChild(t),(t=document.createElement(\"td\")).textContent=\"O-O\",e.appendChild(t),document.getElementById(\"moveHistory\").appendChild(e),N.prevTR=e}else{let e=document.createElement(\"td\");(e=document.createElement(\"td\")).textContent=\"O-O\",N.prevTR.appendChild(e),document.getElementById(\"moveHistory\").appendChild(N.prevTR),N.prevTR=null}\"white\"===n?(T.white=!0,H.x=e+2,H.y=t,B.wRight=!0):(T.black=!0,I.x=e+2,I.y=t,B.bRight=!0)};K.push(l(\"moveLocation\",e+2,t,r))}}}(e/50,t/50,i)}}(t,n,d,a)},N={moveCount:0,prevTR:null,moveColor:\"white\",inCheck:!1};function O(){E=u(b),k=m(b)}window.addEventListener(\"load\",e=>{w=document.getElementById(\"board\"),A=document.getElementById(\"g\");for(let e=0;e<64;e++){let t=document.createElementNS(\"http://www.w3.org/2000/svg\",\"rect\");t.setAttribute(\"x\",50*Math.floor(e/8)),t.setAttribute(\"y\",e%8*50),t.setAttribute(\"width\",\"50\"),t.setAttribute(\"height\",\"50\"),t.setAttribute(\"class\",\"tile\"),t.setAttribute(\"fill\",(Math.floor(e/8)+e%8)%2==0?\"white\":\"black\"),A.appendChild(t)}!function(){for(let e=0;e<8;e++)b[6][e]=l(\"Pawn_White.png\",e,6,Q),b[1][e]=l(\"Pawn_Black.png\",e,1,Q);for(let e=0;e<8;e++)b[2][e]=null,b[3][e]=null,b[4][e]=null,b[5][e]=null;b[0][0]=l(\"Rook_Black.png\",0,0,Q),b[7][0]=l(\"Rook_White.png\",0,7,Q),b[0][7]=l(\"Rook_Black.png\",7,0,Q),b[7][7]=l(\"Rook_White.png\",7,7,Q),b[0][6]=l(\"Knight_Black.png\",6,0,Q),b[7][6]=l(\"Knight_White.png\",6,7,Q),b[0][1]=l(\"Knight_Black.png\",1,0,Q),b[7][1]=l(\"Knight_White.png\",1,7,Q),b[0][5]=l(\"Bishop_Black.png\",5,0,Q),b[7][5]=l(\"Bishop_White.png\",5,7,Q),b[0][2]=l(\"Bishop_Black.png\",2,0,Q),b[7][2]=l(\"Bishop_White.png\",2,7,Q),b[0][4]=l(\"King_Black.png\",4,0,Q),b[7][4]=l(\"King_White.png\",4,7,Q),b[0][3]=l(\"Queen_Black.png\",3,0,Q),b[7][3]=l(\"Queen_White.png\",3,7,Q)}(),O();let t=setInterval(()=>{if(N.inCheck&&function(){for(let e=0;e<8;e++)for(let t=0;t<8;t++)if(null!==b[t][e]&&r(b[t][e])===N.moveColor)switch(i(b[t][e])){case\"pawn\":if(g(e,t,N.moveColor))return!1;break;case\"knight\":if(v(e,t,N.moveColor))return!1;break;case\"bishop\":if(C(e,t,N.moveColor))return!1;break;case\"rook\":if(x(e,t,N.moveColor))return!1;break;case\"queen\":if(C(e,t,N.moveColor)||x(e,t,N.moveColor))return!1;break;case\"king\":if(s(e,t,N.moveColor))return!1}return!0}()&&(alert(\"Game Over!\\n\"+(\"white\"===N.moveColor?\"Black\":\"White\")+\" wins!\"),clearInterval(t)),\"white\"===N.moveColor)if(k[H.y][H.x]){null!==L&&(A.removeChild(L),L=null);let e=document.createElementNS(\"http://www.w3.org/2000/svg\",\"circle\");e.setAttribute(\"cx\",50*H.x+25),e.setAttribute(\"cy\",50*H.y+25),e.setAttribute(\"r\",25),e.setAttribute(\"fill\",\"url(#grad1)\"),e.setAttribute(\"id\",\"checkCircle\"),e.addEventListener(\"click\",e=>{_=e}),A.appendChild(e),L=e,N.inCheck=!0}else null!==L?(A.removeChild(L),L=null,N.inCheck=!1):N.inCheck=!1;else if(\"black\"===N.moveColor)if(E[I.y][I.x]){null!==L&&(A.removeChild(L),L=null);let e=document.createElementNS(\"http://www.w3.org/2000/svg\",\"circle\");e.setAttribute(\"cx\",50*I.x+25),e.setAttribute(\"cy\",50*I.y+25),e.setAttribute(\"r\",25),e.setAttribute(\"fill\",\"url(#grad1)\"),e.setAttribute(\"id\",\"checkCircle\"),e.addEventListener(\"click\",e=>{_=e}),A.appendChild(e),L=e,N.inCheck=!0}else null!==L?(A.removeChild(L),L=null,N.inCheck=!1):N.inCheck=!1;null!==_&&(b[\"white\"===N.moveColor?H.y:I.y][\"white\"===N.moveColor?H.x:I.x].dispatchEvent(_),_=null);let e=Number(function(e){let t=0;return e.forEach(e=>{e.forEach(e=>{null!==e&&(t+=(\"white\"===r(e)?1:-1)*function(e){switch(e){case\"pawn\":return 1;case\"bishop\":case\"knight\":return 3;case\"rook\":return 5;case\"queen\":return 9;default:return 1e5}}(i(e)))})}),t}(b));document.getElementById(\"materialcounter\").textContent=\"Material: \"+(e>0?\"+\":\"\")+String(e)},250)}),document.addEventListener(\"click\",e=>{if(e.target===document.body||e.target===w||\"tile\"===e.target.getAttribute(\"class\")){R=null;for(let e=0;e<K.length;)A.removeChild(K.shift())}})}]);","extractedComments":[]}