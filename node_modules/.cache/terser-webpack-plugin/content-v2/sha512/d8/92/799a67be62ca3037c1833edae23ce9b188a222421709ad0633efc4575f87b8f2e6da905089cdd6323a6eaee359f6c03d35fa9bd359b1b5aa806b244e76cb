{"code":"!function(e){var t={};function r(l){if(t[l])return t[l].exports;var n=t[l]={i:l,l:!1,exports:{}};return e[l].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,l){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(r.r(l),Object.defineProperty(l,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var n in e)r.d(l,n,function(t){return e[t]}.bind(null,n));return l},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=0)}([function(e,t,r){\"use strict\";function l(e){return e.getAttribute(\"href\").slice(0,e.getAttribute(\"href\").length-4).toLowerCase().split(\"_\")[1]}function n(e){return e.getAttribute(\"href\").slice(0,e.getAttribute(\"href\").length-4).toLowerCase().split(\"_\")[0]}function o(e){switch(e){case 0:return\"a\";case 1:return\"b\";case 2:return\"c\";case 3:return\"d\";case 4:return\"e\";case 5:return\"f\";case 6:return\"g\";case 7:return\"h\"}}function i(e,t,r,n){if(\"moveLocation\"===e){if(void 0===n)return void console.error(\"You must provide behavior for the moveLocation\");let e=document.createElementNS(\"http://www.w3.org/2000/svg\",\"circle\");return e.setAttribute(\"cx\",50*t+25),e.setAttribute(\"cy\",50*r+25),e.setAttribute(\"r\",14),e.setAttribute(\"class\",\"moveLocation\"),e.setAttribute(\"onclick\",'\"event.stopPropogation()\"'),e.addEventListener(\"click\",n),e.addEventListener(\"click\",e=>{for(let e=0;e<64;e++)b[e%8][Math.floor(e/8)]=null}),w.appendChild(e),b[r][t]=e,e}if(\"checkCircle\"===e){let e=document.createElementNS(\"http://www.w3.org/2000/svg\",\"circle\");return e.setAttribute(\"cx\",50*t+25),e.setAttribute(\"cy\",50*r+25),e.setAttribute(\"r\",25),e.setAttribute(\"fill\",\"url(#grad1)\"),e.setAttribute(\"id\",\"checkCircle\"),e.addEventListener(\"click\",e=>{K.clickEvent=e}),w.appendChild(e),K.check=e,K.inCheck=!0,w.removeChild(A[r][t]),void w.appendChild(A[r][t])}if(\"tile\"===e){let e=document.createElementNS(\"http://www.w3.org/2000/svg\",\"rect\");return e.setAttribute(\"x\",t),e.setAttribute(\"y\",r),e.setAttribute(\"width\",\"50\"),e.setAttribute(\"height\",\"50\"),e.setAttribute(\"class\",\"tile\"),e.setAttribute(\"fill\",(t/50+r/50)%2==0?\"white\":\"black\"),e.addEventListener(\"mouseover\",t=>{K.hoverTile=e}),e.addEventListener(\"mouseout\",e=>{K.hoverTile=null}),w.appendChild(e),e}{if(void 0===n)return void console.error(\"You must provide behavior for the piece!\");let o=document.createElementNS(\"http://www.w3.org/2000/svg\",\"image\"),i=e=>{o.setAttribute(\"x\",e.pageX-75),o.setAttribute(\"y\",e.pageY-75)},u=-1,m=!1,d=-1;return o.setAttribute(\"href\",e),o.setAttribute(\"x\",50*t),o.setAttribute(\"y\",50*r),o.setAttribute(\"width\",50),o.setAttribute(\"height\",50),o.setAttribute(\"onclick\",'\"event.stopPropogation()\"'),o.addEventListener(\"mousedown\",n),o.addEventListener(\"mousedown\",e=>{K.moveColor!==l(o)||m||(m=!0,w.removeChild(o),w.appendChild(o),o.addEventListener(\"mousemove\",i),u=o.getAttribute(\"x\"),d=o.getAttribute(\"y\"))}),o.addEventListener(\"mouseup\",e=>{m&&(o.removeEventListener(\"mousemove\",i),null!==b[Math.floor(e.pageY/50-1)][Math.floor(e.pageX/50-1)]?b[Math.floor(e.pageY/50-1)][Math.floor(e.pageX/50-1)].dispatchEvent(new MouseEvent(\"click\")):(o.setAttribute(\"x\",u),o.setAttribute(\"y\",d)),m=!1)}),w.appendChild(o),o}}function u(e){let t=[[],[],[],[],[],[],[],[]];for(let e=0;e<8;e++)for(let r=0;r<8;r++)t[r][e]=!1;for(let r=0;r<8;r++)for(let o=0;o<8;o++)if(null!==e[o][r]&&\"black\"!==l(e[o][r]))switch(n(e[o][r])){case\"pawn\":d(r,o,t,\"white\");break;case\"knight\":a(r,o,t);break;case\"bishop\":c(r,o,t,e);break;case\"rook\":h(r,o,t,e);break;case\"queen\":h(r,o,t,e),c(r,o,t,e);case\"king\":p(r,o,t)}return t}function m(e){let t=[[],[],[],[],[],[],[],[]];for(let e=0;e<8;e++)for(let r=0;r<8;r++)t[r][e]=!1;for(let r=0;r<8;r++)for(let o=0;o<8;o++)if(null!==e[o][r]&&\"white\"!==l(e[o][r]))switch(n(e[o][r])){case\"pawn\":d(r,o,t,\"black\");break;case\"knight\":a(r,o,t);break;case\"bishop\":c(r,o,t,e);break;case\"rook\":h(r,o,t,e);break;case\"queen\":h(r,o,t,e),c(r,o,t,e);break;case\"king\":p(r,o,t)}return t}function d(e,t,r,l){\"white\"===l?(e-1>=0&&(r[t-1][e-1]=!0),e+1<8&&(r[t-1][e+1]=!0)):(e-1>=0&&(r[t+1][e-1]=!0),e+1<8&&(r[t+1][e+1]=!0))}function a(e,t,r){t+2<8&&e+1<8&&(r[t+2][e+1]=!0),t+2<8&&e-1>=0&&(r[t+2][e-1]=!0),t-2>=0&&e+1<8&&(r[t-2][e+1]=!0),t-2>=0&&e-1>=0&&(r[t-2][e-1]=!0),t+1<8&&e+2<8&&(r[t+1][e+2]=!0),t+1<8&&e-2>=0&&(r[t+1][e-2]=!0),t-1>=0&&e+2<8&&(r[t-1][e+2]=!0),t-1>=0&&e-2>=0&&(r[t-1][e-2]=!0)}function c(e,t,r,l){for(let n=1;e+n<8&&t+n<8&&(r[t+n][e+n]=!0,null===l[t+n][e+n]);n++);for(let n=1;e-n>=0&&t-n>=0&&(r[t-n][e-n]=!0,null===l[t-n][e-n]);n++);for(let n=1;e-n>=0&&t+n<8&&(r[t+n][e-n]=!0,null===l[t+n][e-n]);n++);for(let n=1;e+n<8&&t-n>=0&&(r[t-n][e+n]=!0,null===l[t-n][e+n]);n++);}function h(e,t,r,l){for(let n=1;e+n<8&&(r[t][e+n]=!0,null===l[t][e+n]);n++);for(let n=1;e-n>=0&&(r[t][e-n]=!0,null===l[t][e-n]);n++);for(let n=1;t+n<8&&(r[t+n][e]=!0,null===l[t+n][e]);n++);for(let n=1;t-n>=0&&(r[t-n][e]=!0,null===l[t-n][e]);n++);}function p(e,t,r){t+1<8&&e+1<8&&(r[t+1][e+1]=!0),t+1<8&&e-1>=0&&(r[t+1][e-1]=!0),t-1>=0&&e+1<8&&(r[t-1][e+1]=!0),t-1>=0&&e-1>=0&&(r[t-1][e-1]=!0),t+1<8&&(r[t+1][e]=!0),t-1>=0&&(r[t-1][e]=!0),e+1<8&&(r[t][e+1]=!0),e-1>=0&&(r[t][e-1]=!0)}function f(e,t,r,n){for(let d=e+1;d<8;d++){let a=l=>{let i=!1;k.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),k.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<B.length;)w.removeChild(B.shift());if(null!==A[t][d]&&(i=!0,w.removeChild(A[t][d])),A[t][d]=A[t][e],A[t][e]=null,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let e=document.createElement(\"tr\"),r=document.createElement(\"td\");r.textContent=++K.moveCount,e.appendChild(r),(r=document.createElement(\"td\")).textContent=(n?\"Q\":\"R\")+(i?\"x\":\"\")+o(d)+String(8-t),e.appendChild(r),document.getElementById(\"moveHistory\").appendChild(e),K.prevTR=e}else{let e=document.createElement(\"td\");(e=document.createElement(\"td\")).textContent=(n?\"Q\":\"R\")+(i?\"x\":\"\")+o(d)+String(8-t),K.prevTR.appendChild(e),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}\"white\"===r?0===e?S.wLeft=!0:S.wRight=!0:0===e?S.bLeft=!0:S.bRight=!0};if(null!==A[t][d]){if(l(A[t][d])!==r){let l=!1,n=Array.from(A,e=>Array.from(e));n[t][d]=n[t][e],n[t][e]=null,\"white\"===r?m(n)[_.y][_.x]&&(l=!0):u(n)[H.y][H.x]&&(l=!0),l||B.push(i(\"moveLocation\",d,t,a))}break}let c=!1,h=Array.from(A,e=>Array.from(e));h[t][d]=h[t][e],h[t][e]=null,\"white\"===r?m(h)[_.y][_.x]&&(c=!0):u(h)[H.y][H.x]&&(c=!0),c||B.push(i(\"moveLocation\",d,t,a))}for(let d=e-1;d>=0;d--){let a=l=>{let i=!1;k.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),k.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<B.length;)w.removeChild(B.shift());if(null!==A[t][d]&&(i=!0,w.removeChild(A[t][d])),A[t][d]=A[t][e],A[t][e]=null,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let e=document.createElement(\"tr\"),r=document.createElement(\"td\");r.textContent=++K.moveCount,e.appendChild(r),(r=document.createElement(\"td\")).textContent=(n?\"Q\":\"R\")+(i?\"x\":\"\")+o(d)+String(8-t),e.appendChild(r),document.getElementById(\"moveHistory\").appendChild(e),K.prevTR=e}else{let e=document.createElement(\"td\");(e=document.createElement(\"td\")).textContent=(n?\"Q\":\"R\")+(i?\"x\":\"\")+o(d)+String(8-t),K.prevTR.appendChild(e),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}\"white\"===r?0===e?S.wLeft=!0:S.wRight=!0:0===e?S.bLeft=!0:S.bRight=!0};if(null!==A[t][d]){if(l(A[t][d])!==r){let l=!1,n=Array.from(A,e=>Array.from(e));n[t][d]=n[t][e],n[t][e]=null,\"white\"===r?m(n)[_.y][_.x]&&(l=!0):u(n)[H.y][H.x]&&(l=!0),l||B.push(i(\"moveLocation\",d,t,a))}break}let c=!1,h=Array.from(A,e=>Array.from(e));h[t][d]=h[t][e],h[t][e]=null,\"white\"===r?m(h)[_.y][_.x]&&(c=!0):u(h)[H.y][H.x]&&(c=!0),c||B.push(i(\"moveLocation\",d,t,a))}for(let d=t+1;d<8;d++){let a=l=>{let i=!1;k.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),k.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<B.length;)w.removeChild(B.shift());if(null!==A[d][e]&&(i=!0,w.removeChild(A[d][e])),A[d][e]=A[t][e],A[t][e]=null,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let t=document.createElement(\"tr\"),r=document.createElement(\"td\");r.textContent=++K.moveCount,t.appendChild(r),(r=document.createElement(\"td\")).textContent=(n?\"Q\":\"R\")+(i?\"x\":\"\")+o(e)+String(8-d),t.appendChild(r),document.getElementById(\"moveHistory\").appendChild(t),K.prevTR=t}else{let t=document.createElement(\"td\");(t=document.createElement(\"td\")).textContent=(n?\"Q\":\"R\")+(i?\"x\":\"\")+o(e)+String(8-d),K.prevTR.appendChild(t),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}\"white\"===r?0===e?S.wLeft=!0:S.wRight=!0:0===e?S.bLeft=!0:S.bRight=!0};if(null!==A[d][e]){if(l(A[d][e])!==r){let l=!1,n=Array.from(A,e=>Array.from(e));n[d][e]=n[t][e],n[t][e]=null,\"white\"===r?m(n)[_.y][_.x]&&(l=!0):u(n)[H.y][H.x]&&(l=!0),l||B.push(i(\"moveLocation\",e,d,a))}break}let c=!1,h=Array.from(A,e=>Array.from(e));h[d][e]=h[t][e],h[t][e]=null,\"white\"===r?m(h)[_.y][_.x]&&(c=!0):u(h)[H.y][H.x]&&(c=!0),c||B.push(i(\"moveLocation\",e,d,a))}for(let d=t-1;d>=0;d--){let a=l=>{let i=!1;k.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),k.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<B.length;)w.removeChild(B.shift());if(null!==A[d][e]&&(i=!0,w.removeChild(A[d][e])),A[d][e]=A[t][e],A[t][e]=null,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let t=document.createElement(\"tr\"),r=document.createElement(\"td\");r.textContent=++K.moveCount,t.appendChild(r),(r=document.createElement(\"td\")).textContent=(n?\"Q\":\"R\")+(i?\"x\":\"\")+o(e)+String(8-d),t.appendChild(r),document.getElementById(\"moveHistory\").appendChild(t),K.prevTR=t}else{let t=document.createElement(\"td\");(t=document.createElement(\"td\")).textContent=(n?\"Q\":\"R\")+(i?\"x\":\"\")+o(e)+String(8-d),K.prevTR.appendChild(t),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}\"white\"===r?0===e?S.wLeft=!0:S.wRight=!0:0===e?S.bLeft=!0:S.bRight=!0};if(null!==A[d][e]){if(l(A[d][e])!==r){let l=!1,n=Array.from(A,e=>Array.from(e));n[d][e]=n[t][e],n[t][e]=null,\"white\"===r?m(n)[_.y][_.x]&&(l=!0):u(n)[H.y][H.x]&&(l=!0),l||B.push(i(\"moveLocation\",e,d,a))}break}let c=!1,h=Array.from(A,e=>Array.from(e));h[d][e]=h[t][e],h[t][e]=null,\"white\"===r?m(h)[_.y][_.x]&&(c=!0):u(h)[H.y][H.x]&&(c=!0),c||B.push(i(\"moveLocation\",e,d,a))}}function y(e,t,r,n){for(let d=1;t+d<8&&e+d<8;d++){let a=r=>{let l=!1;k.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),k.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<B.length;)w.removeChild(B.shift());if(null!==A[t+d][e+d]&&(l=!0,w.removeChild(A[t+d][e+d])),A[t+d][e+d]=A[t][e],A[t][e]=null,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let r=document.createElement(\"tr\"),i=document.createElement(\"td\");i.textContent=++K.moveCount,r.appendChild(i),(i=document.createElement(\"td\")).textContent=(n?\"Q\":\"B\")+(l?\"x\":\"\")+o(e+d)+String(8-(t+d)),r.appendChild(i),document.getElementById(\"moveHistory\").appendChild(r),K.prevTR=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=(n?\"Q\":\"B\")+(l?\"x\":\"\")+o(e+d)+String(8-(t+d)),K.prevTR.appendChild(r),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}};if(null!==A[t+d][e+d]){if(l(A[t+d][e+d])!==r){let l=!1,n=Array.from(A,e=>Array.from(e));n[t+d][e+d]=n[t][e],n[t][e]=null,\"white\"===r?m(n)[_.y][_.x]&&(l=!0):u(n)[H.y][H.x]&&(l=!0),l||B.push(i(\"moveLocation\",e+d,t+d,a))}break}let c=!1,h=Array.from(A,e=>Array.from(e));h[t+d][e+d]=h[t][e],h[t][e]=null,\"white\"===r?m(h)[_.y][_.x]&&(c=!0):u(h)[H.y][H.x]&&(c=!0),c||B.push(i(\"moveLocation\",e+d,t+d,a))}for(let d=1;t-d>=0&&e-d>=0;d++){let a=r=>{let l=!1;k.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),k.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<B.length;)w.removeChild(B.shift());if(null!==A[t-d][e-d]&&(l=!0,w.removeChild(A[t-d][e-d])),A[t-d][e-d]=A[t][e],A[t][e]=null,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let r=document.createElement(\"tr\"),i=document.createElement(\"td\");i.textContent=++K.moveCount,r.appendChild(i),(i=document.createElement(\"td\")).textContent=(n?\"Q\":\"B\")+(l?\"x\":\"\")+o(e-d)+String(8-(t-d)),r.appendChild(i),document.getElementById(\"moveHistory\").appendChild(r),K.prevTR=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=(n?\"Q\":\"B\")+(l?\"x\":\"\")+o(e-d)+String(8-(t-d)),K.prevTR.appendChild(r),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}};if(null!==A[t-d][e-d]){if(l(A[t-d][e-d])!==r){let l=!1,n=Array.from(A,e=>Array.from(e));n[t-d][e-d]=n[t][e],n[t][e]=null,\"white\"===r?m(n)[_.y][_.x]&&(l=!0):u(n)[H.y][H.x]&&(l=!0),l||B.push(i(\"moveLocation\",e-d,t-d,a))}break}let c=!1,h=Array.from(A,e=>Array.from(e));h[t-d][e-d]=h[t][e],h[t][e]=null,\"white\"===r?m(h)[_.y][_.x]&&(c=!0):u(h)[H.y][H.x]&&(c=!0),c||B.push(i(\"moveLocation\",e-d,t-d,a))}for(let d=1;t+d<8&&e-d>=0;d++){let a=r=>{let l=!1;k.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),k.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<B.length;)w.removeChild(B.shift());if(null!==A[t+d][e-d]&&(l=!0,w.removeChild(A[t+d][e-d])),A[t+d][e-d]=A[t][e],A[t][e]=null,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let r=document.createElement(\"tr\"),i=document.createElement(\"td\");i.textContent=++K.moveCount,r.appendChild(i),(i=document.createElement(\"td\")).textContent=(n?\"Q\":\"B\")+(l?\"x\":\"\")+o(e-d)+String(8-(t+d)),r.appendChild(i),document.getElementById(\"moveHistory\").appendChild(r),K.prevTR=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=(n?\"Q\":\"B\")+(l?\"x\":\"\")+o(e-d)+String(8-(t+d)),K.prevTR.appendChild(r),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}};if(null!==A[t+d][e-d]){if(l(A[t+d][e-d])!==r){let l=!1,n=Array.from(A,e=>Array.from(e));n[t+d][e-d]=n[t][e],n[t][e]=null,\"white\"===r?m(n)[_.y][_.x]&&(l=!0):u(n)[H.y][H.x]&&(l=!0),l||B.push(i(\"moveLocation\",e-d,t+d,a))}break}let c=!1,h=Array.from(A,e=>Array.from(e));h[t+d][e-d]=h[t][e],h[t][e]=null,\"white\"===r?m(h)[_.y][_.x]&&(c=!0):u(h)[H.y][H.x]&&(c=!0),c||B.push(i(\"moveLocation\",e-d,t+d,a))}for(let d=1;t-d>=0&&e+d<8;d++){let a=r=>{let l=!1;k.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),k.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<B.length;)w.removeChild(B.shift());if(null!==A[t-d][e+d]&&(l=!0,w.removeChild(A[t-d][e+d])),A[t-d][e+d]=A[t][e],A[t][e]=null,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let r=document.createElement(\"tr\"),i=document.createElement(\"td\");i.textContent=++K.moveCount,r.appendChild(i),(i=document.createElement(\"td\")).textContent=(n?\"Q\":\"B\")+(l?\"x\":\"\")+o(e+d)+String(8-(t-d)),r.appendChild(i),document.getElementById(\"moveHistory\").appendChild(r),K.prevTR=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=(n?\"Q\":\"B\")+(l?\"x\":\"\")+o(e+d)+String(8-(t-d)),K.prevTR.appendChild(r),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}};if(null!==A[t-d][e+d]){if(l(A[t-d][e+d])!==r){let l=!1,n=Array.from(A,e=>Array.from(e));n[t-d][e+d]=n[t][e],n[t][e]=null,\"white\"===r?m(n)[_.y][_.x]&&(l=!0):u(n)[H.y][H.x]&&(l=!0),l||B.push(i(\"moveLocation\",e+d,t-d,a))}break}let c=!1,h=Array.from(A,e=>Array.from(e));h[t-d][e+d]=h[t][e],h[t][e]=null,\"white\"===r?m(h)[_.y][_.x]&&(c=!0):u(h)[H.y][H.x]&&(c=!0),c||B.push(i(\"moveLocation\",e+d,t-d,a))}}function v(e,t,r){let n=\"white\"===r;if(null===A[n?t-1:t+1][e]){let r=Array.from(A,e=>Array.from(e));if(r[n?t-1:t+1][e]=r[t][e],r[t][e]=null,n){if(!m(r)[_.y][_.x])return console.log(\"up1\",e,t),!0}else if(!u(r)[H.y][H.x])return console.log(\"up1\",e,t),!0;if(null===A[n?t-2:t+2][e])if((r=Array.from(A,e=>Array.from(e)))[n?t-2:t+2][e]=r[t][e],r[t][e]=null,n){if(!m(r)[_.y][_.x])return console.log(\"up2\",e,t),!0}else if(!u(r)[H.y][H.x])return console.log(\"up2\",e,t),!0}if(e+1<8&&null!==A[n?t-1:t+1][e+1]&&l(A[n?t-1:t+1][e+1])!==r){let r=Array.from(A,e=>Array.from(e));if(r[n?t-1:t+1][e+1]=r[t][e],r[t][e]=null,n){if(!m(r)[_.y][_.x])return console.log(\"up1right1\",e,t),!0}else if(!u(r)[H.y][H.x])return console.log(\"up1right1\",e,t),!0}if(e-1>=0&&null!==A[n?t-1:t+1][e-1]&&l(A[n?t-1:t+1][e-1])!==r){let r=Array.from(A,e=>Array.from(e));if(r[n?t-1:t+1][e-1]=r[t][e],r[t][e]=null,n){if(!m(r)[_.y][_.x])return console.log(\"up1left1\",e,t),!0}else if(!u(r)[H.y][H.x])return console.log(\"up1left1\",e,t),!0}if(I.x===e-1&&I.y===t&&null===A[n?t-1:t+1][e-1]){let r=Array.from(A,e=>Array.from(e));if(r[n?t-1:t+1][e-1]=r[t][e],r[t][e]=null,r[t][e-1]=null,n){if(!m(r)[_.y][_.x])return console.log(\"epleft\",e,t),!0}else if(!u(r)[H.y][H.x])return console.log(\"epleft\",e,t),!0}if(I.x===e+1&&I.y===t&&null==A[n?t-1:t+1][e+1]){let r=Array.from(A,e=>Array.from(e));if(r[n?t-1:t+1][e-1]=r[t][e],r[t][e]=null,r[t][e+1]=null,n){if(!m(r)[_.y][_.x])return console.log(\"epright\",e,t),!0}else if(!u(r)[H.y][H.x])return console.log(\"epright\",e,t),!0}return!1}function C(e,t,r){if(t<=5&&e<=6&&(null===A[t+2][e+1]||l(A[t+2][e+1])!==r)){let l=Array.from(A,e=>Array.from(e));if(l[t+2][e+1]=l[t][e],l[t][e]=null,\"white\"===r){if(!m(l)[_.y][_.x])return!0}else if(!u(l)[H.y][H.x])return!0}if(t>=2&&e>=1&&(null===A[t-2][e-1]||l(A[t-2][e-1])!==r)){let l=Array.from(A,e=>Array.from(e));if(l[t-2][e-1]=l[t][e],l[t][e]=null,\"white\"===r){if(!m(l)[_.y][_.x])return!0}else if(!u(l)[H.y][H.x])return!0}if(t<=5&&e>=1&&(null===A[t+2][e-1]||l(A[t+2][e-1])!==r)){let l=Array.from(A,e=>Array.from(e));if(l[t+2][e-1]=l[t][e],l[t][e]=null,\"white\"===r){if(!m(l)[_.y][_.x])return!0}else if(!u(l)[H.y][H.x])return!0}if(t>=2&&e<=6&&(null===A[t-2][e+1]||l(A[t-2][e+1])!==r)){let l=Array.from(A,e=>Array.from(e));if(l[t-2][e+1]=l[t][e],l[t][e]=null,\"white\"===r){if(!m(l)[_.y][_.x])return!0}else if(!u(l)[H.y][H.x])return!0}if(t<=6&&e<=5&&(null===A[t+1][e+2]||l(A[t+1][e+2])!==r)){let l=Array.from(A,e=>Array.from(e));if(l[t+1][e+2]=l[t][e],l[t][e]=null,\"white\"===r){if(!m(l)[_.y][_.x])return!0}else if(!u(l)[H.y][H.x])return!0}if(t>=1&&e>=2&&(null===A[t-1][e-2]||l(A[t-1][e-2])!==r)){let l=Array.from(A,e=>Array.from(e));if(l[t-1][e-2]=l[t][e],l[t][e]=null,\"white\"===r){if(!m(l)[_.y][_.x])return!0}else if(!u(l)[H.y][H.x])return!0}if(t>=1&&e<=5&&(null===A[t-1][e+2]||l(A[t-1][e+2])!==r)){let l=Array.from(A,e=>Array.from(e));if(l[t-1][e+2]=l[t][e],l[t][e]=null,\"white\"===r){if(!m(l)[_.y][_.x])return!0}else if(!u(l)[H.y][H.x])return!0}if(t<=6&&e>=2&&(null===A[t+1][e-2]||l(A[t+1][e-2])!==r)){let l=Array.from(A,e=>Array.from(e));if(l[t+1][e-2]=l[t][e],l[t][XMLHttpRequestUpload]=null,\"white\"===r){if(!m(l)[_.y][_.x])return!0}else if(!u(l)[H.y][H.x])return!0}return!1}function x(e,t,r){for(let n=1;t+n<8&&e+n<8;n++){if(null===A[t+n][e+n]||l(A[t+n][e+n])!==r){let l=Array.from(A,e=>Array.from(e));if(l[t+n][e+n]=l[t][e],l[t][e]=null,\"white\"===r){if(!m(l)[_.y][_.x])return!0}else if(!u(l)[H.y][H.x])return!0}if(null!==A[t+n][e+1])break}for(let n=1;t-n>=0&&e-n>=0;n++){if(null===A[t-n][e-n]||l(A[t-n][e-n])!==r){let l=Array.from(A,e=>Array.from(e));if(l[t-n][e-n]=l[t][e],l[t][e]=null,\"white\"===r){if(!m(l)[_.y][_.x])return!0}else if(!u(l)[H.y][H.x])return!0}if(null!==A[t-n][e-n])break}for(let n=1;t+n<8&&e-n>=0;n++){if(null===A[t+n][e-n]||l(A[t+n][e-n])!==r){let l=Array.from(A,e=>Array.from(e));if(l[t+n][e-n]=l[t][e],l[t][e]=null,\"white\"===r){if(!m(l)[_.y][_.x])return!0}else if(!u(l)[H.y][H.x])return!0}if(null===A[t+n][e-n])break}for(let n=1;t-n>=0&&e+n<8;n++){if(null===A[t-n][e+n]||l(A[t-n][e+n])!==r){let l=Array.from(A,e=>Array.from(e));if(l[t-n][e+n]=l[t][e],l[t][e]=null,\"white\"===r){if(!m(l)[_.y][_.x])return!0}else if(!u(l)[H.y][H.x])return!0}if(null!==A[t-n][e-n])break}return!1}function s(e,t,r){for(let n=e+1;n<8;n++){if(null!==A[t][n]){if(l(A[t][n])!==r){let l=Array.from(A,e=>Array.from(e));if(l[t][n]=l[t][e],l[t][e]=null,\"white\"===r){if(!m(l)[_.y][_.x])return!0}else if(!u(l)[H.y][H.x])return!0}break}let o=Array.from(A,e=>Array.from(e));if(o[t][n]=o[t][e],o[t][e]=null,\"white\"===r){if(!m(o)[_.y][_.x])return!0}else if(!u(o)[H.y][H.x])return!0}for(let n=e-1;n>=0;n--){if(null!==A[t][n]){if(l(A[t][n])!==r){let l=Array.from(A,e=>Array.from(e));if(l[t][n]=l[t][e],l[t][e]=null,\"white\"===r){if(!m(l)[_.y][_.x])return!0}else if(!u(l)[H.y][H.x])return!0}break}let o=Array.from(A,e=>Array.from(e));if(o[t][n]=o[t][e],o[t][e]=null,\"white\"===r){if(!m(o)[_.y][_.x])return!0}else if(!u(o)[H.y][H.x])return!0}for(let n=t+1;n<8;n++){if(null!==A[n][e]){if(l(A[n][e])!==r){let l=Array.from(A,e=>Array.from(e));if(l[n][e]=l[t][e],l[t][e]=null,\"white\"===r){if(!m(l)[_.y][_.x])return!0}else if(!u(l)[H.y][H.x])return!0}break}let o=Array.from(A,e=>Array.from(e));if(o[n][e]=o[t][e],o[t][e]=null,\"white\"===r){if(!m(o)[_.y][_.x])return!0}else if(!u(o)[H.y][H.x])return!0}for(let n=t-1;n>=0;n--){if(null!==A[n][e]){if(l(A[n][e])!==r){let l=Array.from(A,e=>Array.from(e));if(l[n][e]=l[t][e],l[t][e]=null,\"white\"===r){if(!m(l)[_.y][_.x])return!0}else if(!u(l)[H.y][H.x])return!0}break}let o=Array.from(A,e=>Array.from(e));if(o[n][e]=o[t][e],o[t][e]=null,\"white\"===r){if(!m(o)[_.y][_.x])return!0}else if(!u(o)[H.y][H.x])return!0}return!1}function g(e,t,r){if(t+1<8&&e+1<8&&null!==A[t+1][e+1]&&l(A[t+1][e+1])!==r){let l=Array.from(A,e=>Array.from(e));if(l[t+1][e+1]=l[t][e],l[t][e]=null,\"white\"===r){if(!m(l)[_.y+1][_.x+1])return!0}else if(!u(l)[H.y+1][H.x+1])return!0}else if(t+1<8&&e+1<8&&null===A[t+1][e+1]){let l=Array.from(A,e=>Array.from(e));if(l[t+1][e+1]=l[t][e],l[t][e]=null,\"white\"===r){if(!m(l)[_.y+1][_.x+1])return!0}else if(!u(l)[H.y+1][H.x+1])return!0}if(t-1>=0&&e-1>=0&&null!==A[t-1][e-1]&&l(A[t-1][e-1])!==r){let l=Array.from(A,e=>Array.from(e));if(l[t-1][e-1]=l[t][e],l[t][e]=null,\"white\"===r){if(!m(l)[_.y-1][_.x-1])return!0}else if(!u(l)[H.y-1][H.x-1])return!0}else if(t-1>=0&&e-1>=0&&null===A[t-1][e-1]){let l=Array.from(A,e=>Array.from(e));if(l[t-1][e-1]=l[t][e],l[t][e]=null,\"white\"===r){if(!m(l)[_.y-1][_.x-1])return!0}else if(!u(l)[H.y-1][H.x-1])return!0}if(t-1>=0&&e+1<8&&null!==A[t-1][e+1]&&l(A[t-1][e+1])!==r){let l=Array.from(A,e=>Array.from(e));if(l[t-1][e-1]=l[t][e],l[t][e]=null,\"white\"===r){if(!m(l)[_.y-1][_.x-1])return!0}else if(!u(l)[H.y-1][H.x-1])return!0}else if(t-1>=0&&e+1<8&&null===A[t-1][e+1]){let l=Array.from(A,e=>Array.from(e));if(l[t-1][e+1]=l[t][e],l[t][e]=null,\"white\"===r){if(!m(l)[_.y-1][_.x+1])return!0}else if(!u(l)[H.y-1][H.x+1])return!0}if(t+1<8&&e-1>=0&&null!==A[t+1][e-1]&&l(A[t+1][e-1])!==r){let l=Array.from(A,e=>Array.from(e));if(l[t+1][e-1]=l[t][e],l[t][e]=null,\"white\"===r){if(!m(l)[_.y+1][_.x-1])return!0}else if(!u(l)[H.y+1][H.x-1])return!0}else if(t+1<8&&e-1>=0&&null===A[t+1][e-1]){let l=Array.from(A,e=>Array.from(e));if(l[t+1][e-1]=l[t][e],l[t][e]=null,\"white\"===r){if(!m(l)[_.y+1][_.x-1])return!0}else if(!u(l)[H.y+1][H.x-1])return!0}if(t+1<8&&null!==A[t+1][e]&&l(A[t+1][e])!==r){let l=Array.from(A,e=>Array.from(e));if(l[t+1][e]=l[t][e],l[t][e]=null,\"white\"===r){if(!m(l)[_.y+1][_.x])return!0}else if(!u(l)[H.y+1][H.x])return!0}else if(t+1<8&&null===A[t+1][e]){let l=Array.from(A,e=>Array.from(e));if(l[t+1][e]=l[t][e],l[t][e]=null,\"white\"===r){if(!m(l)[_.y+1][_.x])return!0}else if(!u(l)[H.y+1][H.x])return!0}if(t-1>=0&&null!==A[t-1][e]&&l(A[t-1][e])!==r){let l=Array.from(A,e=>Array.from(e));if(l[t-1][e]=l[t][e],l[t][e]=null,\"white\"===r){if(!m(l)[_.y-1][_.x])return!0}else if(!u(l)[H.y-1][H.x])return!0}else if(t-1>=0&&null===A[t-1][e]){let l=Array.from(A,e=>Array.from(e));if(l[t-1][e]=l[t][e],l[t][e]=null,\"white\"===r){if(!m(l)[_.y-1][_.x])return!0}else if(!u(l)[H.y-1][H.x])return!0}if(e+1<8&&null!==A[t][e+1]&&l(A[t][e+1])!==r){let l=Array.from(A,e=>Array.from(e));if(l[t][e+1]=l[t][e],l[t][e]=null,\"white\"===r){if(!m(l)[_.y][_.x+1])return!0}else if(!u(l)[H.y][H.x+1])return!0}else if(e+1<8&&null===A[t][e+1]){let l=Array.from(A,e=>Array.from(e));if(l[t][e+1]=l[t][e],l[t][e]=null,\"white\"===r){if(!m(l)[_.y][_.x+1])return!0}else if(!u(l)[H.y][H.x+1])return!0}if(e-1>=0&&null!==A[t][e-1]&&l(A[t][e-1])!==r){let l=Array.from(A,e=>Array.from(e));if(l[t][e-1]=l[t][e],l[t][e]=null,\"white\"===r){if(!m(l)[_.y][_.x-1])return!0}else if(!u(l)[H.y][H.x-1])return!0}else if(e-1>=0&&null===A[t][e-1]){let l=Array.from(A,e=>Array.from(e));if(l[t][e-1]=l[t][e],l[t][e]=null,\"white\"===r){if(!m(l)[_.y][_.x-1])return!0}else if(!u(l)[H.y][H.x-1])return!0}return!1}r.r(t),r.d(t,\"board\",function(){return A}),r.d(t,\"moveLocations\",function(){return b}),r.d(t,\"boardElement\",function(){return E}),r.d(t,\"g\",function(){return w}),r.d(t,\"shownPiece\",function(){return k}),r.d(t,\"shownLocations\",function(){return B}),r.d(t,\"kingMoved\",function(){return L}),r.d(t,\"rookMoved\",function(){return S}),r.d(t,\"epMove\",function(){return I}),r.d(t,\"blackKing\",function(){return H}),r.d(t,\"whiteKing\",function(){return _}),r.d(t,\"pieceBehavior\",function(){return Q}),r.d(t,\"data\",function(){return K}),r.d(t,\"updateControls\",function(){return N});const A=[[],[],[],[],[],[],[],[]],b=[[],[],[],[],[],[],[],[]];var E,w,R=[[],[],[],[],[],[],[],[]],T=[[],[],[],[],[],[],[],[]],k=null;const B=[],L={white:!1,black:!1},S={bLeft:!1,bRight:!1,wLeft:!1,wRight:!1},I={x:-1,y:-1},H={x:4,y:0},_={x:4,y:7},Q=e=>{let t=Number(e.target.getAttribute(\"x\")),r=Number(e.target.getAttribute(\"y\")),d=n(e.target),a=l(e.target);for(let e=0;e<B.length;)w.removeChild(B.shift());k=e.target,function(e,t,r,n){if(n!==K.moveColor)return;switch(r){case\"pawn\":!function(e,t,r){let n=\"white\"===r;if(null===A[n?t-1:t+1][e]){let r=!1,l=Array.from(A,e=>Array.from(e));if(l[n?t-1:t+1][e]=l[t][e],l[t][e]=null,n?m(l)[_.y][_.x]&&(r=!0):u(l)[H.y][H.x]&&(r=!0),!r)if(t===(n?1:6)){let r=r=>{for(let e=0;e<B.length;)w.removeChild(B.shift());if(w.removeChild(A[t][e]),A[t][e]=null,A[n?t-1:t+1][e]=i(n?\"Queen_White.png\":\"Queen_Black.png\",e,n?t-1:t+1,Q),K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let r=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++K.moveCount,r.appendChild(l),(l=document.createElement(\"td\")).textContent=o(e)+String(8-(t-1))+\"=Q\",r.appendChild(l),document.getElementById(\"moveHistory\").appendChild(r),K.prevTR=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=o(e)+String(8-(t+1))+\"=Q\",K.prevTR.appendChild(r),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}};B.push(i(\"moveLocation\",e,t,r))}else{let r=r=>{k.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),k.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<B.length;)w.removeChild(B.shift());if(A[n?t-1:t+1][e]=A[t][e],A[t][e]=null,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let r=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++K.moveCount,r.appendChild(l),(l=document.createElement(\"td\")).textContent=o(e)+String(8-(t-1)),r.appendChild(l),document.getElementById(\"moveHistory\").appendChild(r),K.prevTR=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=o(e)+String(8-(t+1)),K.prevTR.appendChild(r),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}};B.push(i(\"moveLocation\",e,n?t-1:t+1,r))}if(r=!1,(l=Array.from(A,e=>Array.from(e)))[n?t-2:t+2][e]=l[t][e],l[t][e]=null,n?m(l)[_.y][_.x]&&(r=!0):u(l)[H.y][H.x]&&(r=!0),!r&&t===(n?6:1)&&null===A[n?t-2:t+2][e]){let r=r=>{k.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),k.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<B.length;)w.removeChild(B.shift());if(A[n?t-2:t+2][e]=A[t][e],A[t][e]=null,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=e,I.y=n?t-2:t+2,N(),null===K.prevTR){let r=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++K.moveCount,r.appendChild(l),(l=document.createElement(\"td\")).textContent=o(e)+String(8-(t-2)),r.appendChild(l),document.getElementById(\"moveHistory\").appendChild(r),K.prevTR=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=o(e)+String(8-(t+2)),K.prevTR.appendChild(r),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}};B.push(i(\"moveLocation\",e,n?t-2:t+2,r))}}if(e+1<8&&null!==A[n?t-1:t+1][e+1]&&l(A[n?t-1:t+1][e+1])!==r){let r=!1,l=Array.from(A,e=>Array.from(e));if(l[n?t-1:t+1][e+1]=l[t][e],l[t][e]=null,n?m(l)[_.y][_.x]&&(r=!0):u(l)[H.y][H.x]&&(r=!0),!r)if(t===(n?1:6)){let r=r=>{for(let e=0;e<B.length;)w.removeChild(B.shift());w.removeChild(A[t][e]),A[t][e]=null;let l=i(n?\"Queen_White.png\":\"Queen_Black.png\",e+1,n?t-1:t+1,Q);if(w.appendChild(l),w.removeChild(A[n?t-1:t+1][e+1]),A[n?t-1:t+1][e+1]=l,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let r=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++K.moveCount,r.appendChild(l),(l=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e+1)+String(8-(t-1)+\"=Q\"),r.appendChild(l),document.getElementById(\"moveHistory\").appendChild(r),K.prevTR=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e+1)+String(8-(t+1)+\"=Q\"),K.prevTR.appendChild(r),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}};B.push(i(\"moveLocation\",e+1,n?t-1:t+1,r))}else{let r=r=>{k.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),k.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<B.length;)w.removeChild(B.shift());let l=A[n?t-1:t+1][e+1];if(w.removeChild(l),A[n?t-1:t+1][e+1]=null,A[n?t-1:t+1][e+1]=A[t][e],A[t][e]=null,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let r=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++K.moveCount,r.appendChild(l),(l=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e+1)+String(8-(t-1)),r.appendChild(l),document.getElementById(\"moveHistory\").appendChild(r),K.prevTR=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e+1)+String(8-(t+1)),K.prevTR.appendChild(r),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}};B.push(i(\"moveLocation\",e+1,n?t-1:t+1,r))}}if(e-1>=0&&null!==A[n?t-1:t+1][e-1]&&l(A[n?t-1:t+1][e-1])!==r){let r=!1,l=Array.from(A,e=>Array.from(e));if(l[n?t-1:t+1][e-1]=l[t][e],l[t][e]=null,n?m(l)[_.y][_.x]&&(r=!0):u(l)[H.y][H.x]&&(r=!0),!r)if(t===(n?1:6)){let r=r=>{for(let e=0;e<B.length;)w.removeChild(B.shift());w.removeChild(A[t][e]),A[t][e]=null;let l=i(n?\"Queen_White.png\":\"Queen_Black.png\",e-1,n?t-1:t+1,Q);if(w.appendChild(l),w.removeChild(A[n?t-1:t+1][e-1]),A[n?t-1:t+1][e-1]=l,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let r=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++K.moveCount,r.appendChild(l),(l=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e-1)+String(8-(t-1)+\"=Q\"),r.appendChild(l),document.getElementById(\"moveHistory\").appendChild(r),K.prevTR=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e-1)+String(8-(t+1)+\"=Q\"),K.prevTR.appendChild(r),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}};B.push(i(\"moveLocation\",e-1,n?t-1:t+1,r))}else{let r=r=>{k.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),k.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<B.length;)w.removeChild(B.shift());if(w.removeChild(A[n?t-1:t+1][e-1]),A[n?t-1:t+1][e-1]=null,A[n?t-1:t+1][e-1]=A[t][e],A[t][e]=null,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let r=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++K.moveCount,r.appendChild(l),(l=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e-1)+String(8-(t-1)),r.appendChild(l),document.getElementById(\"moveHistory\").appendChild(r),K.prevTR=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e-1)+String(8-(t+1)),K.prevTR.appendChild(r),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}};B.push(i(\"moveLocation\",e-1,n?t-1:t+1,r))}}if(I.x===e-1&&I.y===t&&null===A[n?t-1:t+1][e-1]){let r=!1,l=Array.from(A,e=>Array.from(e));if(l[n?t-1:t+1][e-1]=l[t][e],l[t][e]=null,l[t][e-1]=null,n?m(l)[_.y][_.x]&&(r=!0):u(l)[H.y][H.x]&&(r=!0),!r){let r=r=>{k.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),k.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<B.length;)w.removeChild(B.shift());if(w.removeChild(A[t][e-1]),A[t][e-1]=null,A[n?t-1:t+1][e-1]=A[t][e],A[t][e]=null,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let r=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++K.moveCount,r.appendChild(l),(l=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e-1)+String(8-(t-1)),r.appendChild(l),document.getElementById(\"moveHistory\").appendChild(r),K.prevTR=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e-1)+String(8-(t+1)),K.prevTR.appendChild(r),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}};B.push(i(\"moveLocation\",e-1,n?t-1:t+1,r))}}if(I.x===e+1&&I.y===t&&null==A[n?t-1:t+1][e+1]){let r=!1,l=Array.from(A,e=>Array.from(e));if(l[n?t-1:t+1][e-1]=l[t][e],l[t][e]=null,l[t][e+1]=null,n?m(l)[_.y][_.x]&&(r=!0):u(l)[H.y][H.x]&&(r=!0),!r){let r=r=>{k.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),k.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<B.length;)w.removeChild(B.shift());if(w.removeChild(A[t][e+1]),A[t][e+1]=null,A[n?t-1:t+1][e+1]=A[t][e],A[t][e]=null,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let r=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++K.moveCount,r.appendChild(l),(l=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e+1)+String(8-(t-1)),r.appendChild(l),document.getElementById(\"moveHistory\").appendChild(r),K.prevTR=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e+1)+String(8-(t+1)),K.prevTR.appendChild(r),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}};B.push(i(\"moveLocation\",e+1,n?t-1:t+1,r))}}}(e/50,t/50,n);break;case\"knight\":!function(e,t,r){if(t<=5&&e<=6&&(null===A[t+2][e+1]||l(A[t+2][e+1])!==r)){let l=!1,n=Array.from(A,e=>Array.from(e));if(n[t+2][e+1]=n[t][e],n[t][e]=null,\"white\"===r?m(n)[_.y][_.x]&&(l=!0):u(n)[H.y][H.x]&&(l=!0),!l){let r=r=>{let l=!1;k.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),k.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<B.length;)w.removeChild(B.shift());if(null!==A[t+2][e+1]&&(l=!0,w.removeChild(A[t+2][e+1])),A[t+2][e+1]=A[t][e],A[t][e]=null,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let r=document.createElement(\"tr\"),n=document.createElement(\"td\");n.textContent=++K.moveCount,r.appendChild(n),(n=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(e+1)+String(8-(t+2)),r.appendChild(n),document.getElementById(\"moveHistory\").appendChild(r),K.prevTR=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(e+1)+String(8-(t+2)),K.prevTR.appendChild(r),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}};B.push(i(\"moveLocation\",e+1,t+2,r))}}if(t>=2&&e>=1&&(null===A[t-2][e-1]||l(A[t-2][e-1])!==r)){let l=!1,n=Array.from(A,e=>Array.from(e));if(n[t-2][e-1]=n[t][e],n[t][e]=null,\"white\"===r?m(n)[_.y][_.x]&&(l=!0):u(n)[H.y][H.x]&&(l=!0),!l){let r=r=>{let l=!1;k.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),k.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<B.length;)w.removeChild(B.shift());if(null!==A[t-2][e-1]&&(l=!0,w.removeChild(A[t-2][e-1])),A[t-2][e-1]=A[t][e],A[t][e]=null,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let r=document.createElement(\"tr\"),n=document.createElement(\"td\");n.textContent=++K.moveCount,r.appendChild(n),(n=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(e-1)+String(8-(t-2)),r.appendChild(n),document.getElementById(\"moveHistory\").appendChild(r),K.prevTR=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(e-1)+String(8-(t-2)),K.prevTR.appendChild(r),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}};B.push(i(\"moveLocation\",e-1,t-2,r))}}if(t<=5&&e>=1&&(null===A[t+2][e-1]||l(A[t+2][e-1])!==r)){let l=!1,n=Array.from(A,e=>Array.from(e));if(n[t+2][e-1]=n[t][e],n[t][e]=null,\"white\"===r?m(n)[_.y][_.x]&&(l=!0):u(n)[H.y][H.x]&&(l=!0),!l){let r=r=>{let l=!1;k.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),k.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<B.length;)w.removeChild(B.shift());if(null!==A[t+2][e-1]&&(l=!0,w.removeChild(A[t+2][e-1])),A[t+2][e-1]=A[t][e],A[t][e]=null,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let r=document.createElement(\"tr\"),n=document.createElement(\"td\");n.textContent=++K.moveCount,r.appendChild(n),(n=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(e-1)+String(8-(t+2)),r.appendChild(n),document.getElementById(\"moveHistory\").appendChild(r),K.prevTR=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(e-1)+String(8-(t+2)),K.prevTR.appendChild(r),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}};B.push(i(\"moveLocation\",e-1,t+2,r))}}if(t>=2&&e<=6&&(null===A[t-2][e+1]||l(A[t-2][e+1])!==r)){let l=!1,n=Array.from(A,e=>Array.from(e));if(n[t-2][e+1]=n[t][e],n[t][e]=null,\"white\"===r?m(n)[_.y][_.x]&&(l=!0):u(n)[H.y][H.x]&&(l=!0),!l){let r=r=>{let l=!1;k.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),k.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<B.length;)w.removeChild(B.shift());if(null!==A[t-2][e+1]&&(l=!0,w.removeChild(A[t-2][e+1])),A[t-2][e+1]=A[t][e],A[t][e]=null,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let r=document.createElement(\"tr\"),n=document.createElement(\"td\");n.textContent=++K.moveCount,r.appendChild(n),(n=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(e+1)+String(8-(t-2)),r.appendChild(n),document.getElementById(\"moveHistory\").appendChild(r),K.prevTR=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(e+1)+String(8-(t-2)),K.prevTR.appendChild(r),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}};B.push(i(\"moveLocation\",e+1,t-2,r))}}if(t<=6&&e<=5&&(null===A[t+1][e+2]||l(A[t+1][e+2])!==r)){let l=!1,n=Array.from(A,e=>Array.from(e));if(n[t+1][e+2]=n[t][e],n[t][e]=null,\"white\"===r?m(n)[_.y][_.x]&&(l=!0):u(n)[H.y][H.x]&&(l=!0),!l){let r=r=>{let l=!1;k.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),k.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<B.length;)w.removeChild(B.shift());if(null!==A[t+1][e+2]&&(l=!0,w.removeChild(A[t+1][e+2])),A[t+1][e+2]=A[t][e],A[t][e]=null,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let r=document.createElement(\"tr\"),n=document.createElement(\"td\");n.textContent=++K.moveCount,r.appendChild(n),(n=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(e+2)+String(8-(t+1)),r.appendChild(n),document.getElementById(\"moveHistory\").appendChild(r),K.prevTR=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(e+2)+String(8-(t+1)),K.prevTR.appendChild(r),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}};B.push(i(\"moveLocation\",e+2,t+1,r))}}if(t>=1&&e>=2&&(null===A[t-1][e-2]||l(A[t-1][e-2])!==r)){let l=!1,n=Array.from(A,e=>Array.from(e));if(n[t-1][e-2]=n[t][e],n[t][e]=null,\"white\"===r?m(n)[_.y][_.x]&&(l=!0):u(n)[H.y][H.x]&&(l=!0),!l){let r=r=>{let l=!1;k.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),k.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<B.length;)w.removeChild(B.shift());if(null!==A[t-1][e-2]&&(l=!0,w.removeChild(A[t-1][e-2])),A[t-1][e-2]=A[t][e],A[t][e]=null,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let r=document.createElement(\"tr\"),n=document.createElement(\"td\");n.textContent=++K.moveCount,r.appendChild(n),(n=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(e-2)+String(8-(t-1)),r.appendChild(n),document.getElementById(\"moveHistory\").appendChild(r),K.prevTR=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(e-2)+String(8-(t-1)),K.prevTR.appendChild(r),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}};B.push(i(\"moveLocation\",e-2,t-1,r))}}if(t>=1&&e<=5&&(null===A[t-1][e+2]||l(A[t-1][e+2])!==r)){let l=!1,n=Array.from(A,e=>Array.from(e));if(n[t-1][e+2]=n[t][e],n[t][e]=null,\"white\"===r?m(n)[_.y][_.x]&&(l=!0):u(n)[H.y][H.x]&&(l=!0),!l){let r=r=>{let l=!1;k.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),k.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<B.length;)w.removeChild(B.shift());if(null!==A[t-1][e+2]&&(l=!0,w.removeChild(A[t-1][e+2])),A[t-1][e+2]=A[t][e],A[t][e]=null,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let r=document.createElement(\"tr\"),n=document.createElement(\"td\");n.textContent=++K.moveCount,r.appendChild(n),(n=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(e+2)+String(8-(t-1)),r.appendChild(n),document.getElementById(\"moveHistory\").appendChild(r),K.prevTR=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(e+2)+String(8-(t-1)),K.prevTR.appendChild(r),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}};B.push(i(\"moveLocation\",e+2,t-1,r))}}if(t<=6&&e>=2&&(null===A[t+1][e-2]||l(A[t+1][e-2])!==r)){let l=!1,n=Array.from(A,e=>Array.from(e));if(n[t+1][e-2]=n[t][e],n[t][e]=null,\"white\"===r?m(n)[_.y][_.x]&&(l=!0):u(n)[H.y][H.x]&&(l=!0),!l){let r=r=>{let l=!1;k.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),k.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<B.length;)w.removeChild(B.shift());if(null!==A[t+1][e-2]&&(l=!0,w.removeChild(A[t+1][e-2])),A[t+1][e-2]=A[t][e],A[t][e]=null,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let r=document.createElement(\"tr\"),n=document.createElement(\"td\");n.textContent=++K.moveCount,r.appendChild(n),(n=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(e-2)+String(8-(t+1)),r.appendChild(n),document.getElementById(\"moveHistory\").appendChild(r),K.prevTR=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(e-2)+String(8-(t+1)),K.prevTR.appendChild(r),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}};B.push(i(\"moveLocation\",e-2,t+1,r))}}}(e/50,t/50,n);break;case\"rook\":f(e/50,t/50,n,!1);break;case\"bishop\":y(e/50,t/50,n,!1);break;case\"queen\":f(e/50,t/50,n,!0),y(e/50,t/50,n,!0);break;case\"king\":!function(e,t,r){if(t+1<8&&e+1<8&&(null!==A[t+1][e+1]&&l(A[t+1][e+1])!==r||null===A[t+1][e+1])){let l=!1,n=Array.from(A,e=>Array.from(e));if(n[t+1][e+1]=n[t][e],n[t][e]=null,\"white\"===r?m(n)[_.y+1][_.x+1]&&(l=!0):u(n)[H.y+1][H.x+1]&&(l=!0),!l){let l=l=>{let n=!1;k.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),k.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<B.length;)w.removeChild(B.shift());if(null!==A[t+1][e+1]&&(n=!0,w.removeChild(A[t+1][e+1])),A[t+1][e+1]=A[t][e],A[t][e]=null,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let r=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++K.moveCount,r.appendChild(l),(l=document.createElement(\"td\")).textContent=\"K\"+(n?\"x\":\"\")+o(e+1)+String(8-(t+1)),r.appendChild(l),document.getElementById(\"moveHistory\").appendChild(r),K.prevTR=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=\"K\"+(n?\"x\":\"\")+o(e+1)+String(8-(t+1)),K.prevTR.appendChild(r),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}\"white\"===r?(L.white=!0,_.x=e+1,_.y=t+1):(L.black=!0,H.x=e+1,H.y=t+1)};B.push(i(\"moveLocation\",e+1,t+1,l))}}if(t-1>=0&&e-1>=0&&(null!==A[t-1][e-1]&&l(A[t-1][e-1])!==r||null===A[t-1][e-1])){let l=!1,n=Array.from(A,e=>Array.from(e));if(n[t-1][e-1]=n[t][e],n[t][e]=null,\"white\"===r?m(n)[_.y-1][_.x-1]&&(l=!0):u(n)[H.y-1][H.x-1]&&(l=!0),!l){let l=l=>{let n=!1;k.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),k.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<B.length;)w.removeChild(B.shift());if(null!==A[t-1][e-1]&&(n=!0,w.removeChild(A[t-1][e-1])),A[t-1][e-1]=A[t][e],A[t][e]=null,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let r=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++K.moveCount,r.appendChild(l),(l=document.createElement(\"td\")).textContent=\"K\"+(n?\"x\":\"\")+o(e-1)+String(8-(t-1)),r.appendChild(l),document.getElementById(\"moveHistory\").appendChild(r),K.prevTR=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=\"K\"+(n?\"x\":\"\")+o(e-1)+String(8-(t-1)),K.prevTR.appendChild(r),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}\"white\"===r?(L.white=!0,_.x=e-1,_.y=t-1):(L.black=!0,H.x=e-1,H.y=t-1)};B.push(i(\"moveLocation\",e-1,t-1,l))}}if(t-1>=0&&e+1<8&&(null!==A[t-1][e+1]&&l(A[t-1][e+1])!==r||null===A[t-1][e+1])){let l=!1,n=Array.from(A,e=>Array.from(e));if(n[t-1][e+1]=n[t][e],n[t][e]=null,\"white\"===r?m(n)[_.y-1][_.x-1]&&(l=!0):u(n)[H.y-1][H.x-1]&&(l=!0),!l){let l=l=>{let n=!1;k.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),k.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<B.length;)w.removeChild(B.shift());if(null!==A[t-1][e+1]&&(n=!0,w.removeChild(A[t-1][e+1])),A[t-1][e+1]=A[t][e],A[t][e]=null,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let r=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++K.moveCount,r.appendChild(l),(l=document.createElement(\"td\")).textContent=\"K\"+(n?\"x\":\"\")+o(e+1)+String(8-(t-1)),r.appendChild(l),document.getElementById(\"moveHistory\").appendChild(r),K.prevTR=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=\"K\"+(n?\"x\":\"\")+o(e+1)+String(8-(t-1)),K.prevTR.appendChild(r),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}\"white\"===r?(L.white=!0,_.x=e+1,_.y=t-1):(L.black=!0,H.x=e+1,H.y=t-1)};B.push(i(\"moveLocation\",e+1,t-1,l))}}if(t+1<8&&e-1>=0&&(null!==A[t+1][e-1]&&l(A[t+1][e-1])!==r||null===A[t+1][e-1])){let l=!1,n=Array.from(A,e=>Array.from(e));if(n[t+1][e-1]=n[t][e],n[t][e]=null,\"white\"===r?m(n)[_.y+1][_.x-1]&&(l=!0):u(n)[H.y+1][H.x-1]&&(l=!0),!l){let l=l=>{let n=!0;k.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),k.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<B.length;)w.removeChild(B.shift());if(null!==A[t+1][e-1]&&(n=!1,w.removeChild(A[t+1][e-1])),A[t+1][e-1]=A[t][e],A[t][e]=null,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let r=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++K.moveCount,r.appendChild(l),(l=document.createElement(\"td\")).textContent=\"K\"+(n?\"x\":\"\")+o(e-1)+String(8-(t+1)),r.appendChild(l),document.getElementById(\"moveHistory\").appendChild(r),K.prevTR=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=\"K\"+(n?\"x\":\"\")+o(e-1)+String(8-(t+1)),K.prevTR.appendChild(r),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}\"white\"===r?(L.white=!0,_.x=e-1,_.y=t+1):(L.black=!0,H.x=e-1,H.y=t+1)};B.push(i(\"moveLocation\",e-1,t+1,l))}}if(t+1<8&&(null!==A[t+1][e]&&l(A[t+1][e])!==r||null===A[t+1][e])){let l=!1,n=Array.from(A,e=>Array.from(e));if(n[t+1][e]=n[t][e],n[t][e]=null,\"white\"===r?m(n)[_.y+1][_.x]&&(l=!0):u(n)[H.y+1][H.x]&&(l=!0),!l){let l=l=>{let n=!1;k.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),k.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<B.length;)w.removeChild(B.shift());if(null!==A[t+1][e]&&(n=!0,w.removeChild(A[t+1][e])),A[t+1][e]=A[t][e],A[t][e]=null,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let r=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++K.moveCount,r.appendChild(l),(l=document.createElement(\"td\")).textContent=\"K\"+(n?\"x\":\"\")+o(e)+String(8-(t+1)),r.appendChild(l),document.getElementById(\"moveHistory\").appendChild(r),K.prevTR=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=\"K\"+(n?\"x\":\"\")+o(e)+String(8-(t+1)),K.prevTR.appendChild(r),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}\"white\"===r?(L.white=!0,_.x=e,_.y=t+1):(L.black=!0,H.x=e,H.y=t+1)};B.push(i(\"moveLocation\",e,t+1,l))}}if(t-1>=0&&(null!==A[t-1][e]&&l(A[t-1][e])!==r||null===A[t-1][e])){let l=!1,n=Array.from(A,e=>Array.from(e));if(n[t-1][e]=n[t][e],n[t][e]=null,\"white\"===r?m(n)[_.y-1][_.x]&&(l=!0):u(n)[H.y-1][H.x]&&(l=!0),!l){let l=l=>{let n=!1;k.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),k.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<B.length;)w.removeChild(B.shift());if(null!==A[t-1][e]&&(n=!0,w.removeChild(A[t-1][e])),A[t-1][e]=A[t][e],A[t][e]=null,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let r=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++K.moveCount,r.appendChild(l),(l=document.createElement(\"td\")).textContent=\"K\"+(n?\"x\":\"\")+o(e)+String(8-(t-1)),r.appendChild(l),document.getElementById(\"moveHistory\").appendChild(r),K.prevTR=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=\"K\"+(n?\"x\":\"\")+o(e)+String(8-(t-1)),K.prevTR.appendChild(r),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}\"white\"===r?(L.white=!0,_.x=e,_.y=t-1):(L.black=!0,H.x=e,H.y=t-1)};B.push(i(\"moveLocation\",e,t-1,l))}}if(e+1<8&&(null!==A[t][e+1]&&l(A[t][e+1])!==r||null===A[t][e+1])){let l=!1,n=Array.from(A,e=>Array.from(e));if(n[t][e+1]=n[t][e],n[t][e]=null,\"white\"===r?m(n)[_.y][_.x+1]&&(l=!0):u(n)[H.y][H.x+1]&&(l=!0),!l){let l=l=>{let n=!1;k.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),k.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<B.length;)w.removeChild(B.shift());if(null!==A[t][e+1]&&(n=!0,w.removeChild(A[t][e+1])),A[t][e+1]=A[t][e],A[t][e]=null,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let r=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++K.moveCount,r.appendChild(l),(l=document.createElement(\"td\")).textContent=\"K\"+(n?\"x\":\"\")+o(e+1)+String(8-t),r.appendChild(l),document.getElementById(\"moveHistory\").appendChild(r),K.prevTR=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=\"K\"+(n?\"x\":\"\")+o(e+1)+String(8-t),K.prevTR.appendChild(r),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}\"white\"===r?(L.white=!0,_.x=e+1,_.y=t):(L.black=!0,H.x=e+1,H.y=t)};B.push(i(\"moveLocation\",e+1,t,l))}}if(e-1>=0&&(null!==A[t][e-1]&&l(A[t][e-1])!==r||null===A[t][e-1])){let l=!1,n=Array.from(A,e=>Array.from(e));if(n[t][e-1]=n[t][e],n[t][e]=null,\"white\"===r?m(n)[_.y][_.x-1]&&(l=!0):u(n)[H.y][H.x-1]&&(l=!0),!l){let l=l=>{let n=!1;k.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),k.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<B.length;)w.removeChild(B.shift());if(null!==A[t][e-1]&&(n=!0,w.removeChild(A[t][e-1])),A[t][e-1]=A[t][e],A[t][e]=null,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let r=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++K.moveCount,r.appendChild(l),(l=document.createElement(\"td\")).textContent=\"K\"+(n?\"x\":\"\")+o(e-1)+String(8-t),r.appendChild(l),document.getElementById(\"moveHistory\").appendChild(r),K.prevTR=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=\"K\"+(n?\"x\":\"\")+o(e-1)+String(8-t),K.prevTR.appendChild(r),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}\"white\"===r?(L.white=!0,_.x=e-1,_.y=t):(L.black=!0,H.x=e-1,H.y=t)};B.push(i(\"moveLocation\",e-1,t,l))}}let n=\"white\"===r?L.white:L.black;if(!n&&!K.inCheck){if(!(n=\"white\"===r?S.wLeft:S.bLeft)&&null===A[\"white\"===r?7:0][1]&&null===A[\"white\"===r?7:0][2]&&null===A[\"white\"===r?7:0][3]){let l=l=>{k.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),k.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<B.length;)w.removeChild(B.shift());let n=A[\"white\"===r?7:0][0];if(n.setAttribute(\"x\",50*(e-1)),A[t][e-2]=A[t][e],A[t][e-1]=n,A[t][e]=null,A[\"white\"===r?7:0][0]=null,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let e=document.createElement(\"tr\"),t=document.createElement(\"td\");t.textContent=++K.moveCount,e.appendChild(t),(t=document.createElement(\"td\")).textContent=\"O-O-O\",e.appendChild(t),document.getElementById(\"moveHistory\").appendChild(e),K.prevTR=e}else{let e=document.createElement(\"td\");(e=document.createElement(\"td\")).textContent=\"O-O-O\",K.prevTR.appendChild(e),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}\"white\"===r?(L.white=!0,_.x=e-2,_.y=t,S.wLeft=!0):(L.black=!0,H.x=e-2,H.y=t,S.bLeft=!0)};B.push(i(\"moveLocation\",e-2,t,l))}if(!(n=(\"white\"===r?S.wRight:S.bRight)||(\"white\"===r?L.white:L.black))&&null===A[\"white\"===r?7:0][5]&&null===A[\"white\"===r?7:0][6]){let l=l=>{k.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),k.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<B.length;)w.removeChild(B.shift());let n=A[\"white\"===r?7:0][7];if(n.setAttribute(\"x\",50*(e+1)),A[t][e+2]=A[t][e],A[t][e+1]=n,A[t][e]=null,A[\"white\"===r?7:0][7]=null,K.moveColor=\"white\"===K.moveColor?\"black\":\"white\",I.x=-1,I.y=-1,N(),null===K.prevTR){let e=document.createElement(\"tr\"),t=document.createElement(\"td\");t.textContent=++K.moveCount,e.appendChild(t),(t=document.createElement(\"td\")).textContent=\"O-O\",e.appendChild(t),document.getElementById(\"moveHistory\").appendChild(e),K.prevTR=e}else{let e=document.createElement(\"td\");(e=document.createElement(\"td\")).textContent=\"O-O\",K.prevTR.appendChild(e),document.getElementById(\"moveHistory\").appendChild(K.prevTR),K.prevTR=null}\"white\"===r?(L.white=!0,_.x=e+2,_.y=t,S.wRight=!0):(L.black=!0,H.x=e+2,H.y=t,S.bRight=!0)};B.push(i(\"moveLocation\",e+2,t,l))}}}(e/50,t/50,n)}}(t,r,d,a)},K={moveCount:0,prevTR:null,moveColor:\"white\",inCheck:!1,clickEvent:null,check:null,hoverTile:null,tiles:[]};function N(){R=u(A),T=m(A)}window.addEventListener(\"load\",e=>{E=document.getElementById(\"board\"),w=document.getElementById(\"g\");for(let e=0;e<64;e++)K.tiles.push(i(\"tile\",50*Math.floor(e/8),e%8*50)),b[e%8][Math.floor(e/8)]=null;!function(){for(let e=0;e<8;e++)A[6][e]=i(\"Pawn_White.png\",e,6,Q),A[1][e]=i(\"Pawn_Black.png\",e,1,Q);for(let e=0;e<8;e++)A[2][e]=null,A[3][e]=null,A[4][e]=null,A[5][e]=null;A[0][0]=i(\"Rook_Black.png\",0,0,Q),A[7][0]=i(\"Rook_White.png\",0,7,Q),A[0][7]=i(\"Rook_Black.png\",7,0,Q),A[7][7]=i(\"Rook_White.png\",7,7,Q),A[0][6]=i(\"Knight_Black.png\",6,0,Q),A[7][6]=i(\"Knight_White.png\",6,7,Q),A[0][1]=i(\"Knight_Black.png\",1,0,Q),A[7][1]=i(\"Knight_White.png\",1,7,Q),A[0][5]=i(\"Bishop_Black.png\",5,0,Q),A[7][5]=i(\"Bishop_White.png\",5,7,Q),A[0][2]=i(\"Bishop_Black.png\",2,0,Q),A[7][2]=i(\"Bishop_White.png\",2,7,Q),A[0][4]=i(\"King_Black.png\",4,0,Q),A[7][4]=i(\"King_White.png\",4,7,Q),A[0][3]=i(\"Queen_Black.png\",3,0,Q),A[7][3]=i(\"Queen_White.png\",3,7,Q)}(),N();let t=setInterval(()=>{if(K.inCheck&&function(){for(let e=0;e<8;e++)for(let t=0;t<8;t++)if(null!==A[t][e]&&l(A[t][e])===K.moveColor)switch(n(A[t][e])){case\"pawn\":if(v(e,t,K.moveColor))return!1;break;case\"knight\":if(C(e,t,K.moveColor))return!1;break;case\"bishop\":if(x(e,t,K.moveColor))return!1;break;case\"rook\":if(s(e,t,K.moveColor))return!1;break;case\"queen\":if(x(e,t,K.moveColor)||s(e,t,K.moveColor))return!1;break;case\"king\":if(g(e,t,K.moveColor))return!1}return!0}()&&(alert(\"Game Over!\\n\"+(\"white\"===K.moveColor?\"Black\":\"White\")+\" wins!\"),clearInterval(t)),null!==K.clickEvent&&(A[\"white\"===K.moveColor?_.y:H.y][\"white\"===K.moveColor?_.x:H.x].dispatchEvent(K.clickEvent),K.clickEvent=null),\"white\"===K.moveColor)if(T[_.y][_.x]){if(null!==K.check)return;i(\"checkCircle\",_.x,_.y)}else null!==K.check?(w.removeChild(K.check),K.check=null,K.inCheck=!1):K.inCheck=!1;else if(\"black\"===K.moveColor)if(R[H.y][H.x]){if(null!==K.check)return;i(\"checkCircle\",H.x,H.y)}else null!==K.check?(w.removeChild(K.check),K.check=null,K.inCheck=!1):K.inCheck=!1;let e=Number(function(e){let t=0;return e.forEach(e=>{e.forEach(e=>{null!==e&&(t+=(\"white\"===l(e)?1:-1)*function(e){switch(e){case\"pawn\":return 1;case\"bishop\":case\"knight\":return 3;case\"rook\":return 5;case\"queen\":return 9;default:return 1e5}}(n(e)))})}),t}(A));document.getElementById(\"materialcounter\").textContent=\"Material: \"+(e>0?\"+\":\"\")+String(e)},150)}),window.addEventListener(\"click\",e=>{if(e.target===document.body||e.target===E||\"tile\"===e.target.getAttribute(\"class\")){k=null;for(let e=0;e<B.length;)w.removeChild(B.shift());for(let e=0;e<64;e++)b[e%8][Math.floor(e/8)]=null}})}]);","extractedComments":[]}