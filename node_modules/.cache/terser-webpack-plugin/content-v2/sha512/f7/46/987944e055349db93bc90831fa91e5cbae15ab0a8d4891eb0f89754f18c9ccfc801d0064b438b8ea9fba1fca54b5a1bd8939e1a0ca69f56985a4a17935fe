{"code":"!function(t){var e={};function r(l){if(e[l])return e[l].exports;var n=e[l]={i:l,l:!1,exports:{}};return t[l].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=e,r.d=function(t,e,l){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:l})},r.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var l=Object.create(null);if(r.r(l),Object.defineProperty(l,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var n in t)r.d(l,n,function(e){return t[e]}.bind(null,n));return l},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,\"a\",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p=\"\",r(r.s=0)}([function(t,e,r){\"use strict\";function l(t,e,r,l){if(\"moveLocation\"===t){if(void 0===l)return void console.log(\"You must provide behavior for the moveLocation\");let t=document.createElementNS(\"http://www.w3.org/2000/svg\",\"circle\");return t.setAttribute(\"cx\",50*e+25),t.setAttribute(\"cy\",50*r+25),t.setAttribute(\"r\",14),t.setAttribute(\"class\",\"moveLocation\"),t.setAttribute(\"onclick\",'\"event.stopPropogation()\"'),t.addEventListener(\"click\",l),f.appendChild(t),t}if(\"checkCircle\"!==t){if(void 0===l)return void console.log(\"You must provide behavior for the piece!\");let n=document.createElementNS(\"http://www.w3.org/2000/svg\",\"image\");return n.setAttribute(\"href\",t),n.setAttribute(\"x\",50*e),n.setAttribute(\"y\",50*r),n.setAttribute(\"width\",50),n.setAttribute(\"height\",50),n.setAttribute(\"onclick\",'\"event.stopPropogation()\"'),n.addEventListener(\"click\",l),f.appendChild(n),n}}function n(t){return t.getAttribute(\"href\").slice(0,t.getAttribute(\"href\").length-4).toLowerCase().split(\"_\")[1]}function i(t){return t.getAttribute(\"href\").slice(0,t.getAttribute(\"href\").length-4).toLowerCase().split(\"_\")[0]}function o(t){switch(t){case 0:return\"a\";case 1:return\"b\";case 2:return\"c\";case 3:return\"d\";case 4:return\"e\";case 5:return\"f\";case 6:return\"g\";case 7:return\"h\"}}r.r(e),r.d(e,\"g\",function(){return f});const u=[[],[],[],[],[],[],[],[]];var a,f,m=[[],[],[],[],[],[],[],[]],h=[[],[],[],[],[],[],[],[]],y=null;const c=[];const d={white:!1,black:!1},x={bLeft:!1,bRight:!1,wLeft:!1,wRight:!1};var s=\"white\";const g={x:-1,y:-1},A={x:4,y:0},p={x:4,y:7};var b=null,w=!1;let C=null;const v=t=>{let e=Number(t.target.getAttribute(\"x\")),r=Number(t.target.getAttribute(\"y\")),a=i(t.target),m=n(t.target);for(let t=0;t<c.length;)f.removeChild(c.shift());y=t.target,function(t,e,r,i){if(i!==s)return;switch(r){case\"pawn\":!function(t,e,r){let i=\"white\"===r;if(null===u[i?e-1:e+1][t]){let r=!1,n=Array.from(u,t=>Array.from(t));if(n[i?e-1:e+1][t]=n[e][t],n[e][t]=null,i?H(n)[p.y][p.x]&&(r=!0):I(n)[A.y][A.x]&&(r=!0),!r)if(e===(i?1:6)){let r=r=>{for(let t=0;t<c.length;)f.removeChild(c.shift());f.removeChild(u[e][t]),u[e][t]=null,u[i?e-1:e+1][t]=l(i?\"Queen_White.png\":\"Queen_Black.png\",t,i?e-1:e+1,v),s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S()};c.push(l(\"moveLocation\",t,e,r))}else{let r=r=>{y.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());if(u[i?e-1:e+1][t]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let r=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++E,r.appendChild(l),(l=document.createElement(\"td\")).textContent=o(t)+String(8-(e-1)),r.appendChild(l),document.getElementById(\"moveHistory\").appendChild(r),k=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=o(t)+String(8-(e+1)),k.appendChild(r),document.getElementById(\"moveHistory\").appendChild(k),k=null}};c.push(l(\"moveLocation\",t,i?e-1:e+1,r))}if((e===i||1)&&(r=!1,(n=Array.from(u,t=>Array.from(t)))[i?e-2:e+2][t]=n[e][t],n[e][t]=null,i?H(n)[p.y][p.x]&&(r=!0):I(n)[A.y][A.x]&&(r=!0),!r&&e===(i?6:1)&&null===u[i?e-2:e+2][t])){let r=r=>{y.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());if(u[i?e-2:e+2][t]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=t,g.y=i?e-2:e+2,S(),null===k){let r=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++E,r.appendChild(l),(l=document.createElement(\"td\")).textContent=o(t)+String(7-(e-2)),r.appendChild(l),document.getElementById(\"moveHistory\").appendChild(r),k=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=o(t)+String(7-(e+2)),k.appendChild(r),document.getElementById(\"moveHistory\").appendChild(k),k=null}};c.push(l(\"moveLocation\",t,i?e-2:e+2,r))}}if(t+1<8&&null!==u[i?e-1:e+1][t+1]&&n(u[i?e-1:e+1][t+1])!==r){let r=!1,n=Array.from(u,t=>Array.from(t));if(n[i?e-1:e+1][t+1]=n[e][t],n[e][t]=null,i?H(n)[p.y][p.x]&&(r=!0):I(n)[A.y][A.x]&&(r=!0),!r)if(e===(i?1:6)){let r=r=>{for(let t=0;t<c.length;)f.removeChild(c.shift());f.removeChild(u[e][t]),u[e][t]=null;let n=l(i?\"Queen_White.png\":\"Queen_Black.png\",t+1,i?e-1:e+1,v);if(f.appendChild(n),f.removeChild(u[i?e-1:e+1][t+1]),u[i?e-1:e+1][t+1]=n,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let r=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++E,r.appendChild(l),(l=document.createElement(\"td\")).textContent=o(t)+\"x\"+o(t+1)+String(7-(e-1)+\"=♕\"),r.appendChild(l),document.getElementById(\"moveHistory\").appendChild(r),k=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=o(t)+\"x\"+o(t+1)+String(7-(e+1)+\"=♛\"),k.appendChild(r),document.getElementById(\"moveHistory\").appendChild(k),k=null}};c.push(l(\"moveLocation\",t+1,i?e-1:e+1,r))}else{let r=r=>{y.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());let l=u[i?e-1:e+1][t+1];if(f.removeChild(l),u[i?e-1:e+1][t+1]=null,u[i?e-1:e+1][t+1]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let r=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++E,r.appendChild(l),(l=document.createElement(\"td\")).textContent=o(t)+\"x\"+o(t+1)+String(8-(e-1)),r.appendChild(l),document.getElementById(\"moveHistory\").appendChild(r),k=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=o(t)+\"x\"+o(t+1)+String(8-(e+1)),k.appendChild(r),document.getElementById(\"moveHistory\").appendChild(k),k=null}};c.push(l(\"moveLocation\",t+1,i?e-1:e+1,r))}}if(t-1>=0&&null!==u[i?e-1:e+1][t-1]&&n(u[i?e-1:e+1][t-1])!==r){let r=!1,n=Array.from(u,t=>Array.from(t));if(n[i?e-1:e+1][t-1]=n[e][t],n[e][t]=null,i?H(n)[p.y][p.x]&&(r=!0):I(n)[A.y][A.x]&&(r=!0),!r)if(e===(i?1:6)){let r=r=>{for(let t=0;t<c.length;)f.removeChild(c.shift());f.removeChild(u[e][t]),u[e][t]=null;let n=l(i?\"Queen_White.png\":\"Queen_Black.png\",t-1,i?e-1:e+1,v);if(f.appendChild(n),f.removeChild(u[i?e-1:e+1][t-1]),u[i?e-1:e+1][t-1]=n,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let r=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++E,r.appendChild(l),(l=document.createElement(\"td\")).textContent=o(t)+\"x\"+o(t-1)+String(7-(e-1)+\"=♕\"),r.appendChild(l),document.getElementById(\"moveHistory\").appendChild(r),k=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=o(t)+\"x\"+o(t-1)+String(7-(e+1)+\"=♛\"),k.appendChild(r),document.getElementById(\"moveHistory\").appendChild(k),k=null}};c.push(l(\"moveLocation\",t-1,i?e-1:e+1,r))}else{let r=r=>{y.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());if(f.removeChild(u[i?e-1:e+1][t-1]),u[i?e-1:e+1][t-1]=null,u[i?e-1:e+1][t-1]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let r=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++E,r.appendChild(l),(l=document.createElement(\"td\")).textContent=o(t)+\"x\"+o(t-1)+String(8-(e-1)),r.appendChild(l),document.getElementById(\"moveHistory\").appendChild(r),k=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=o(t)+\"x\"+o(t-1)+String(8-(e+1)),k.appendChild(r),document.getElementById(\"moveHistory\").appendChild(k),k=null}};c.push(l(\"moveLocation\",t-1,i?e-1:e+1,r))}}if(g.x===t-1&&g.y===e&&null===u[i?e-1:e+1][t-1]){let r=!1,n=Array.from(u,t=>Array.from(t));if(n[i?e-1:e+1][t-1]=n[e][t],n[e][t]=null,n[e][t-1]=null,i?H(n)[p.y][p.x]&&(r=!0):I(n)[A.y][A.x]&&(r=!0),!r){let r=r=>{y.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());if(f.removeChild(u[e][t-1]),u[e][t-1]=null,u[i?e-1:e+1][t-1]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let r=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++E,r.appendChild(l),(l=document.createElement(\"td\")).textContent=o(t)+\"x\"+o(t-1)+String(8-(e-1)),r.appendChild(l),document.getElementById(\"moveHistory\").appendChild(r),k=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=o(t)+\"x\"+o(t-1)+String(8-(e+1)),k.appendChild(r),document.getElementById(\"moveHistory\").appendChild(k),k=null}};c.push(l(\"moveLocation\",t-1,i?e-1:e+1,r))}}if(g.x===t+1&&g.y===e&&null==u[i?e-1:e+1][t+1]){let r=!1,n=Array.from(u,t=>Array.from(t));if(n[i?e-1:e+1][t-1]=n[e][t],n[e][t]=null,n[e][t+1]=null,i?H(n)[p.y][p.x]&&(r=!0):I(n)[A.y][A.x]&&(r=!0),!r){let r=r=>{y.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());if(f.removeChild(u[e][t+1]),u[e][t+1]=null,u[i?e-1:e+1][t+1]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let r=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++E,r.appendChild(l),(l=document.createElement(\"td\")).textContent=o(t)+\"x\"+o(t+1)+String(8-(e-1)),r.appendChild(l),document.getElementById(\"moveHistory\").appendChild(r),k=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=o(t)+\"x\"+o(t+1)+String(8-(e+1)),k.appendChild(r),document.getElementById(\"moveHistory\").appendChild(k),k=null}};c.push(l(\"moveLocation\",t+1,i?e-1:e+1,r))}}}(t/50,e/50,i);break;case\"knight\":!function(t,e,r){if(e<=5&&t<=6&&(null===u[e+2][t+1]||n(u[e+2][t+1])!==r)){let n=!1,i=Array.from(u,t=>Array.from(t));if(i[e+2][t+1]=i[e][t],i[e][t]=null,\"white\"===r?H(i)[p.y][p.x]&&(n=!0):I(i)[A.y][A.x]&&(n=!0),!n){let r=r=>{let l=!1;y.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());if(null!==u[e+2][t+1]&&(l=!0,f.removeChild(u[e+2][t+1])),u[e+2][t+1]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let r=document.createElement(\"tr\"),n=document.createElement(\"td\");n.textContent=++E,r.appendChild(n),(n=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(t+1)+String(8-(e+2)),r.appendChild(n),document.getElementById(\"moveHistory\").appendChild(r),k=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(t+1)+String(8-(e+2)),k.appendChild(r),document.getElementById(\"moveHistory\").appendChild(k),k=null}};c.push(l(\"moveLocation\",t+1,e+2,r))}}if(e>=2&&t>=1&&(null===u[e-2][t-1]||n(u[e-2][t-1])!==r)){let n=!1,i=Array.from(u,t=>Array.from(t));if(i[e-2][t-1]=i[e][t],i[e][t]=null,\"white\"===r?H(i)[p.y][p.x]&&(n=!0):I(i)[A.y][A.x]&&(n=!0),!n){let r=r=>{let l=!1;y.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());if(null!==u[e-2][t-1]&&(l=!0,f.removeChild(u[e-2][t-1])),u[e-2][t-1]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let r=document.createElement(\"tr\"),n=document.createElement(\"td\");n.textContent=++E,r.appendChild(n),(n=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(t-1)+String(8-(e-2)),r.appendChild(n),document.getElementById(\"moveHistory\").appendChild(r),k=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(t-1)+String(8-(e-2)),k.appendChild(r),document.getElementById(\"moveHistory\").appendChild(k),k=null}};c.push(l(\"moveLocation\",t-1,e-2,r))}}if(e<=5&&t>=1&&(null===u[e+2][t-1]||n(u[e+2][t-1])!==r)){let n=!1,i=Array.from(u,t=>Array.from(t));if(i[e+2][t-1]=i[e][t],i[e][t]=null,\"white\"===r?H(i)[p.y][p.x]&&(n=!0):I(i)[A.y][A.x]&&(n=!0),!n){let r=r=>{let l=!1;y.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());if(null!==u[e+2][t-1]&&(l=!0,f.removeChild(u[e+2][t-1])),u[e+2][t-1]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let r=document.createElement(\"tr\"),n=document.createElement(\"td\");n.textContent=++E,r.appendChild(n),(n=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(t-1)+String(8-(e+2)),r.appendChild(n),document.getElementById(\"moveHistory\").appendChild(r),k=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(t-1)+String(8-(e+2)),k.appendChild(r),document.getElementById(\"moveHistory\").appendChild(k),k=null}};c.push(l(\"moveLocation\",t-1,e+2,r))}}if(e>=2&&t<=6&&(null===u[e-2][t+1]||n(u[e-2][t+1])!==r)){let n=!1,i=Array.from(u,t=>Array.from(t));if(i[e-2][t+1]=i[e][t],i[e][t]=null,\"white\"===r?H(i)[p.y][p.x]&&(n=!0):I(i)[A.y][A.x]&&(n=!0),!n){let r=r=>{let l=!1;y.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());if(null!==u[e-2][t+1]&&(l=!0,f.removeChild(u[e-2][t+1])),u[e-2][t+1]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let r=document.createElement(\"tr\"),n=document.createElement(\"td\");n.textContent=++E,r.appendChild(n),(n=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(t+1)+String(8-(e-2)),r.appendChild(n),document.getElementById(\"moveHistory\").appendChild(r),k=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(t+1)+String(8-(e-2)),k.appendChild(r),document.getElementById(\"moveHistory\").appendChild(k),k=null}};c.push(l(\"moveLocation\",t+1,e-2,r))}}if(e<=6&&t<=5&&(null===u[e+1][t+2]||n(u[e+1][t+2])!==r)){let n=!1,i=Array.from(u,t=>Array.from(t));if(i[e+1][t+2]=i[e][t],i[e][t]=null,\"white\"===r?H(i)[p.y][p.x]&&(n=!0):I(i)[A.y][A.x]&&(n=!0),!n){let r=r=>{let l=!1;y.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());if(null!==u[e+1][t+2]&&(l=!0,f.removeChild(u[e+1][t+2])),u[e+1][t+2]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let r=document.createElement(\"tr\"),n=document.createElement(\"td\");n.textContent=++E,r.appendChild(n),(n=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(t+2)+String(8-(e+1)),r.appendChild(n),document.getElementById(\"moveHistory\").appendChild(r),k=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(t+2)+String(8-(e+1)),k.appendChild(r),document.getElementById(\"moveHistory\").appendChild(k),k=null}};c.push(l(\"moveLocation\",t+2,e+1,r))}}if(e>=1&&t>=2&&(null===u[e-1][t-2]||n(u[e-1][t-2])!==r)){let n=!1,i=Array.from(u,t=>Array.from(t));if(i[e-1][t-2]=i[e][t],i[e][t]=null,\"white\"===r?H(i)[p.y][p.x]&&(n=!0):I(i)[A.y][A.x]&&(n=!0),!n){let r=r=>{let l=!1;y.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());if(null!==u[e-1][t-2]&&(l=!0,f.removeChild(u[e-1][t-2])),u[e-1][t-2]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let r=document.createElement(\"tr\"),n=document.createElement(\"td\");n.textContent=++E,r.appendChild(n),(n=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(t-2)+String(8-(e-1)),r.appendChild(n),document.getElementById(\"moveHistory\").appendChild(r),k=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(t-2)+String(8-(e-1)),k.appendChild(r),document.getElementById(\"moveHistory\").appendChild(k),k=null}};c.push(l(\"moveLocation\",t-2,e-1,r))}}if(e>=1&&t<=5&&(null===u[e-1][t+2]||n(u[e-1][t+2])!==r)){let n=!1,i=Array.from(u,t=>Array.from(t));if(i[e-1][t+2]=i[e][t],i[e][t]=null,\"white\"===r?H(i)[p.y][p.x]&&(n=!0):I(i)[A.y][A.x]&&(n=!0),!n){let r=r=>{let l=!1;y.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());if(null!==u[e-1][t+2]&&(l=!0,f.removeChild(u[e-1][t+2])),u[e-1][t+2]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let r=document.createElement(\"tr\"),n=document.createElement(\"td\");n.textContent=++E,r.appendChild(n),(n=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(t+2)+String(8-(e-1)),r.appendChild(n),document.getElementById(\"moveHistory\").appendChild(r),k=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(t+2)+String(8-(e-1)),k.appendChild(r),document.getElementById(\"moveHistory\").appendChild(k),k=null}};c.push(l(\"moveLocation\",t+2,e-1,r))}}if(e<=6&&t>=2&&(null===u[e+1][t-2]||n(u[e+1][t-2])!==r)){let n=!1,i=Array.from(u,t=>Array.from(t));if(i[e+1][t-2]=i[e][t],i[e][t]=null,\"white\"===r?H(i)[p.y][p.x]&&(n=!0):I(i)[A.y][A.x]&&(n=!0),!n){let r=r=>{let l=!1;y.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());if(null!==u[e+1][t-2]&&(l=!0,f.removeChild(u[e+1][t-2])),u[e+1][t-2]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let r=document.createElement(\"tr\"),n=document.createElement(\"td\");n.textContent=++E,r.appendChild(n),(n=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(t-2)+String(8-(e+1)),r.appendChild(n),document.getElementById(\"moveHistory\").appendChild(r),k=r}else{let r=document.createElement(\"td\");(r=document.createElement(\"td\")).textContent=\"N\"+(l?\"x\":\"\")+o(t-2)+String(8-(e+1)),k.appendChild(r),document.getElementById(\"moveHistory\").appendChild(k),k=null}};c.push(l(\"moveLocation\",t-2,e+1,r))}}}(t/50,e/50,i);break;case\"rook\":L(t/50,e/50,i);break;case\"bishop\":B(t/50,e/50,i);break;case\"queen\":L(t/50,e/50,i),B(t/50,e/50,i);break;case\"king\":!function(t,e,r){if(e+1<8&&t+1<8&&null!==u[e+1][t+1]&&n(u[e+1][t+1])!==r){let n=!1,i=Array.from(u,t=>Array.from(t));if(i[e+1][t+1]=i[e][t],i[e][t]=null,\"white\"===r?H(i)[p.y+1][p.x+1]&&(n=!0):I(i)[A.y+1][A.x+1]&&(n=!0),!n){let n=l=>{y.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());f.removeChild(u[e+1][t+1]),u[e+1][t+1]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===r?(d.white=!0,p.x=t+1,p.y=e+1):(d.black=!0,A.x=t+1,A.y=e+1)};c.push(l(\"moveLocation\",t+1,e+1,n))}}else if(e+1<8&&t+1<8&&null===u[e+1][t+1]){let n=!1,i=Array.from(u,t=>Array.from(t));if(i[e+1][t+1]=i[e][t],i[e][t]=null,\"white\"===r?H(i)[p.y+1][p.x+1]&&(n=!0):I(i)[A.y+1][A.x+1]&&(n=!0),!n){let n=l=>{y.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());u[e+1][t+1]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===r?(d.white=!0,p.x=t+1,p.y=e+1):(d.black=!0,A.x=t+1,A.y=e+1)};c.push(l(\"moveLocation\",t+1,e+1,n))}}if(e-1>=0&&t-1>=0&&null!==u[e-1][t-1]&&n(u[e-1][t-1])!==r){let n=!1,i=Array.from(u,t=>Array.from(t));if(i[e-1][t-1]=i[e][t],i[e][t]=null,\"white\"===r?H(i)[p.y-1][p.x-1]&&(n=!0):I(i)[A.y-1][A.x-1]&&(n=!0),!n){let n=l=>{y.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());f.removeChild(u[e-1][t-1]),u[e-1][t-1]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===r?(d.white=!0,p.x=t-1,p.y=e-1):(d.black=!0,A.x=t-1,A.y=e-1)};c.push(l(\"moveLocation\",t-1,e-1,n))}}else if(e-1>=0&&t-1>=0&&null===u[e-1][t-1]){let n=!1,i=Array.from(u,t=>Array.from(t));if(i[e-1][t-1]=i[e][t],i[e][t]=null,\"white\"===r?H(i)[p.y-1][p.x-1]&&(n=!0):I(i)[A.y-1][A.x-1]&&(n=!0),!n){let n=l=>{y.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());u[e-1][t-1]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===r?(d.white=!0,p.x=t-1,p.y=e-1):(d.black=!0,A.x=t-1,A.y=e-1)};c.push(l(\"moveLocation\",t-1,e-1,n))}}if(e-1>=0&&t+1<8&&null!==u[e-1][t+1]&&n(u[e-1][t+1])!==r){let n=!1,i=Array.from(u,t=>Array.from(t));if(i[e-1][t+1]=i[e][t],i[e][t]=null,\"white\"===r?H(i)[p.y-1][p.x-1]&&(n=!0):I(i)[A.y-1][A.x-1]&&(n=!0),!n){let n=l=>{y.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());f.removeChild(u[e-1][t+1]),u[e-1][t+1]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===r?(d.white=!0,p.x=t+1,p.y=e-1):(d.black=!0,A.x=t+1,A.y=e-1)};c.push(l(\"moveLocation\",t+1,e-1,n))}}else if(e-1>=0&&t+1<8&&null===u[e-1][t+1]){let n=!1,i=Array.from(u,t=>Array.from(t));if(i[e-1][t+1]=i[e][t],i[e][t]=null,\"white\"===r?H(i)[p.y-1][p.x+1]&&(n=!0):I(i)[A.y-1][A.x+1]&&(n=!0),!n){let n=l=>{y.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());u[e-1][t+1]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===r?(d.white=!0,p.x=t+1,p.y=e-1):(d.black=!0,A.x=t+1,A.y=e-1)};c.push(l(\"moveLocation\",t+1,e-1,n))}}if(e+1<8&&t-1>=0&&null!==u[e+1][t-1]&&n(u[e+1][t-1])!==r){let n=!1,i=Array.from(u,t=>Array.from(t));if(i[e+1][t-1]=i[e][t],i[e][t]=null,\"white\"===r?H(i)[p.y+1][p.x-1]&&(n=!0):I(i)[A.y+1][A.x-1]&&(n=!0),!n){let n=l=>{y.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());f.removeChild(u[e+1][t-1]),u[e+1][t-1]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===r?(d.white=!0,p.x=t-1,p.y=e+1):(d.black=!0,A.x=t-1,A.y=e+1)};c.push(l(\"moveLocation\",t-1,e+1,n))}}else if(e+1<8&&t-1>=0&&null===u[e+1][t-1]){let n=!1,i=Array.from(u,t=>Array.from(t));if(i[e+1][t-1]=i[e][t],i[e][t]=null,\"white\"===r?H(i)[p.y+1][p.x-1]&&(n=!0):I(i)[A.y+1][A.x-1]&&(n=!0),!n){let n=l=>{y.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());u[e+1][t-1]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===r?(d.white=!0,p.x=t-1,p.y=e+1):(d.black=!0,A.x=t-1,A.y=e+1)};c.push(l(\"moveLocation\",t-1,e+1,n))}}if(e+1<8&&null!==u[e+1][t]&&n(u[e+1][t])!==r){let n=!1,i=Array.from(u,t=>Array.from(t));if(i[e+1][t]=i[e][t],i[e][t]=null,\"white\"===r?H(i)[p.y+1][p.x]&&(n=!0):I(i)[A.y+1][A.x]&&(n=!0),!n){let n=l=>{y.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());f.removeChild(u[e+1][t]),u[e+1][t]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===r?(d.white=!0,p.x=t,p.y=e+1):(d.black=!0,A.x=t,A.y=e+1)};c.push(l(\"moveLocation\",t,e+1,n))}}else if(e+1<8&&null===u[e+1][t]){let n=!1,i=Array.from(u,t=>Array.from(t));if(i[e+1][t]=i[e][t],i[e][t]=null,\"white\"===r?H(i)[p.y+1][p.x]&&(n=!0):I(i)[A.y+1][A.x]&&(n=!0),!n){let n=l=>{y.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());u[e+1][t]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===r?(d.white=!0,p.x=t,p.y=e+1):(d.black=!0,A.x=t,A.y=e+1)};c.push(l(\"moveLocation\",t,e+1,n))}}if(e-1>=0&&null!==u[e-1][t]&&n(u[e-1][t])!==r){let n=!1,i=Array.from(u,t=>Array.from(t));if(i[e-1][t]=i[e][t],i[e][t]=null,\"white\"===r?H(i)[p.y-1][p.x]&&(n=!0):I(i)[A.y-1][A.x]&&(n=!0),!n){let n=l=>{y.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());f.removeChild(u[e-1][t]),u[e-1][t]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===r?(d.white=!0,p.x=t,p.y=e-1):(d.black=!0,A.x=t,A.y=e-1)};c.push(l(\"moveLocation\",t,e-1,n))}}else if(e-1>=0&&null===u[e-1][t]){let n=!1,i=Array.from(u,t=>Array.from(t));if(i[e-1][t]=i[e][t],i[e][t]=null,\"white\"===r?H(i)[p.y-1][p.x]&&(n=!0):I(i)[A.y-1][A.x]&&(n=!0),!n){let n=l=>{y.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());u[e-1][t]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===r?(d.white=!0,p.x=t,p.y=e-1):(d.black=!0,A.x=t,A.y=e-1)};c.push(l(\"moveLocation\",t,e-1,n))}}if(t+1<8&&null!==u[e][t+1]&&n(u[e][t+1])!==r){let n=!1,i=Array.from(u,t=>Array.from(t));if(i[e][t+1]=i[e][t],i[e][t]=null,\"white\"===r?H(i)[p.y][p.x+1]&&(n=!0):I(i)[A.y][A.x+1]&&(n=!0),!n){let n=l=>{y.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());f.removeChild(u[e][t+1]),u[e][t+1]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===r?(d.white=!0,p.x=t+1,p.y=e):(d.black=!0,A.x=t+1,A.y=e)};c.push(l(\"moveLocation\",t+1,e,n))}}else if(t+1<8&&null===u[e][t+1]){let n=!1,i=Array.from(u,t=>Array.from(t));if(i[e][t+1]=i[e][t],i[e][t]=null,\"white\"===r?H(i)[p.y][p.x+1]&&(n=!0):I(i)[A.y][A.x+1]&&(n=!0),!n){let n=l=>{y.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());u[e][t+1]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===r?(d.white=!0,p.x=t+1,p.y=e):(d.black=!0,A.x=t+1,A.y=e)};c.push(l(\"moveLocation\",t+1,e,n))}}if(t-1>=0&&null!==u[e][t-1]&&n(u[e][t-1])!==r){let n=!1,i=Array.from(u,t=>Array.from(t));if(i[e][t-1]=i[e][t],i[e][t]=null,\"white\"===r?H(i)[p.y][p.x-1]&&(n=!0):I(i)[A.y][A.x-1]&&(n=!0),!n){let n=l=>{y.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());f.removeChild(u[e][t-1]),u[e][t-1]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===r?(d.white=!0,p.x=t-1,p.y=e):(d.black=!0,A.x=t-1,A.y=e)};c.push(l(\"moveLocation\",t-1,e,n))}}else if(t-1>=0&&null===u[e][t-1]){let n=!1,i=Array.from(u,t=>Array.from(t));if(i[e][t-1]=i[e][t],i[e][t]=null,\"white\"===r?H(i)[p.y][p.x-1]&&(n=!0):I(i)[A.y][A.x-1]&&(n=!0),!n){let n=l=>{y.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());u[e][t-1]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===r?(d.white=!0,p.x=t-1,p.y=e):(d.black=!0,A.x=t-1,A.y=e)};c.push(l(\"moveLocation\",t-1,e,n))}}let i=\"white\"===r?d.white:d.black;if(!i&&!w){if(!(i=\"white\"===r?x.wLeft:x.bLeft)&&null===u[\"white\"===r?7:0][1]&&null===u[\"white\"===r?7:0][2]&&null===u[\"white\"===r?7:0][3]){let n=l=>{y.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());let n=u[\"white\"===r?7:0][0];n.setAttribute(\"x\",50*(t-1)),u[e][t-2]=u[e][t],u[e][t-1]=n,u[e][t]=null,u[\"white\"===r?7:0][0]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===r?(d.white=!0,p.x=t-2,p.y=e,x.wLeft=!0):(d.black=!0,A.x=t-2,A.y=e,x.bLeft=!0)};c.push(l(\"moveLocation\",t-2,e,n))}if(!(i=(\"white\"===r?x.wRight:x.bRight)||(\"white\"===r?d.white:d.black))&&null===u[\"white\"===r?7:0][5]&&null===u[\"white\"===r?7:0][6]){let n=l=>{y.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());let n=u[\"white\"===r?7:0][7];n.setAttribute(\"x\",50*(t+1)),u[e][t+2]=u[e][t],u[e][t+1]=n,u[e][t]=null,u[\"white\"===r?7:0][7]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===r?(d.white=!0,p.x=t+2,p.y=e,x.wRight=!0):(d.black=!0,A.x=t+2,A.y=e,x.bRight=!0)};c.push(l(\"moveLocation\",t+2,e,n))}}}(t/50,e/50,i)}}(e,r,a,m)};let E=0,k=null;function L(t,e,r){for(let i=t+1;i<8;i++){let a=l=>{let n=!1;y.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());if(null!==u[e][i]&&(n=!0,f.removeChild(u[e][i])),u[e][i]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let t=document.createElement(\"tr\"),r=document.createElement(\"td\");r.textContent=++E,t.appendChild(r),(r=document.createElement(\"td\")).textContent=\"R\"+(n?\"x\":\"\")+o(i)+String(8-e),t.appendChild(r),document.getElementById(\"moveHistory\").appendChild(t),k=t}else{let t=document.createElement(\"td\");(t=document.createElement(\"td\")).textContent=\"R\"+(n?\"x\":\"\")+o(i)+String(8-e),k.appendChild(t),document.getElementById(\"moveHistory\").appendChild(k),k=null}\"white\"===r?0===t?x.wLeft=!0:x.wRight=!0:0===t?x.bLeft=!0:x.bRight=!0};if(null!==u[e][i]){if(n(u[e][i])!==r){let n=!1,o=Array.from(u,t=>Array.from(t));o[e][i]=o[e][t],o[e][t]=null,\"white\"===r?H(o)[p.y][p.x]&&(n=!0):I(o)[A.y][A.x]&&(n=!0),n||c.push(l(\"moveLocation\",i,e,a))}break}let m=!1,h=Array.from(u,t=>Array.from(t));h[e][i]=h[e][t],h[e][t]=null,\"white\"===r?H(h)[p.y][p.x]&&(m=!0):I(h)[A.y][A.x]&&(m=!0),m||c.push(l(\"moveLocation\",i,e,a))}for(let i=t-1;i>=0;i--){let a=l=>{let n=!1;y.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());if(null!==u[e][i]&&(n=!0,f.removeChild(u[e][i])),u[e][i]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let t=document.createElement(\"tr\"),r=document.createElement(\"td\");r.textContent=++E,t.appendChild(r),(r=document.createElement(\"td\")).textContent=\"R\"+(n?\"x\":\"\")+o(i)+String(8-e),t.appendChild(r),document.getElementById(\"moveHistory\").appendChild(t),k=t}else{let t=document.createElement(\"td\");(t=document.createElement(\"td\")).textContent=\"R\"+(n?\"x\":\"\")+o(i)+String(8-e),k.appendChild(t),document.getElementById(\"moveHistory\").appendChild(k),k=null}\"white\"===r?0===t?x.wLeft=!0:x.wRight=!0:0===t?x.bLeft=!0:x.bRight=!0};if(null!==u[e][i]){if(n(u[e][i])!==r){let n=!1,o=Array.from(u,t=>Array.from(t));o[e][i]=o[e][t],o[e][t]=null,\"white\"===r?H(o)[p.y][p.x]&&(n=!0):I(o)[A.y][A.x]&&(n=!0),n||c.push(l(\"moveLocation\",i,e,a))}break}let m=!1,h=Array.from(u,t=>Array.from(t));h[e][i]=h[e][t],h[e][t]=null,\"white\"===r?H(h)[p.y][p.x]&&(m=!0):I(h)[A.y][A.x]&&(m=!0),m||c.push(l(\"moveLocation\",i,e,a))}for(let i=e+1;i<8;i++){let a=l=>{let n=!1;y.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());if(null!==u[i][t]&&(n=!0,f.removeChild(u[i][t])),u[i][t]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let e=document.createElement(\"tr\"),r=document.createElement(\"td\");r.textContent=++E,e.appendChild(r),(r=document.createElement(\"td\")).textContent=\"R\"+(n?\"x\":\"\")+o(t)+String(8-i),e.appendChild(r),document.getElementById(\"moveHistory\").appendChild(e),k=e}else{let e=document.createElement(\"td\");(e=document.createElement(\"td\")).textContent=\"R\"+(n?\"x\":\"\")+o(t)+String(8-i),k.appendChild(e),document.getElementById(\"moveHistory\").appendChild(k),k=null}\"white\"===r?0===t?x.wLeft=!0:x.wRight=!0:0===t?x.bLeft=!0:x.bRight=!0};if(null!==u[i][t]){if(n(u[i][t])!==r){let n=!1,o=Array.from(u,t=>Array.from(t));o[i][t]=o[e][t],o[e][t]=null,\"white\"===r?H(o)[p.y][p.x]&&(n=!0):I(o)[A.y][A.x]&&(n=!0),n||c.push(l(\"moveLocation\",t,i,a))}break}let m=!1,h=Array.from(u,t=>Array.from(t));h[i][t]=h[e][t],h[e][t]=null,\"white\"===r?H(h)[p.y][p.x]&&(m=!0):I(h)[A.y][A.x]&&(m=!0),m||c.push(l(\"moveLocation\",t,i,a))}for(let i=e-1;i>=0;i--){let a=l=>{let n=!1;y.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());if(null!==u[i][t]&&(n=!0,f.removeChild(u[i][t])),u[i][t]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let t=document.createElement(\"tr\"),r=document.createElement(\"td\");r.textContent=++E,t.appendChild(r),(r=document.createElement(\"td\")).textContent=\"R\"+(n?\"x\":\"\")+o(i)+String(8-e),t.appendChild(r),document.getElementById(\"moveHistory\").appendChild(t),k=t}else{let t=document.createElement(\"td\");(t=document.createElement(\"td\")).textContent=\"R\"+(n?\"x\":\"\")+o(i)+String(8-e),k.appendChild(t),document.getElementById(\"moveHistory\").appendChild(k),k=null}\"white\"===r?0===t?x.wLeft=!0:x.wRight=!0:0===t?x.bLeft=!0:x.bRight=!0};if(null!==u[i][t]){if(n(u[i][t])!==r){let n=!1,o=Array.from(u,t=>Array.from(t));o[i][t]=o[e][t],o[e][t]=null,\"white\"===r?H(o)[p.y][p.x]&&(n=!0):I(o)[A.y][A.x]&&(n=!0),n||c.push(l(\"moveLocation\",t,i,a))}break}let m=!1,h=Array.from(u,t=>Array.from(t));h[i][t]=h[e][t],h[e][t]=null,\"white\"===r?H(h)[p.y][p.x]&&(m=!0):I(h)[A.y][A.x]&&(m=!0),m||c.push(l(\"moveLocation\",t,i,a))}}function B(t,e,r){for(let i=1;e+i<8&&t+i<8;i++){let o=r=>{y.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());null!==u[e+i][t+i]&&f.removeChild(u[e+i][t+i]),u[e+i][t+i]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S()};if(null!==u[e+i][t+i]){if(n(u[e+i][t+i])!==r){let n=!1,a=Array.from(u,t=>Array.from(t));a[e+i][t+i]=a[e][t],a[e][t]=null,\"white\"===r?H(a)[p.y][p.x]&&(n=!0):I(a)[A.y][A.x]&&(n=!0),n||c.push(l(\"moveLocation\",t+i,e+i,o))}break}let a=!1,m=Array.from(u,t=>Array.from(t));m[e+i][t+i]=m[e][t],m[e][t]=null,\"white\"===r?H(m)[p.y][p.x]&&(a=!0):I(m)[A.y][A.x]&&(a=!0),a||c.push(l(\"moveLocation\",t+i,e+i,o))}for(let i=1;e-i>=0&&t-i>=0;i++){let o=r=>{y.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());null!==u[e-i][t-i]&&f.removeChild(u[e-i][t-i]),u[e-i][t-i]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S()};if(null!==u[e-i][t-i]){if(n(u[e-i][t-i])!==r){let n=!1,a=Array.from(u,t=>Array.from(t));a[e-i][t-i]=a[e][t],a[e][t]=null,\"white\"===r?H(a)[p.y][p.x]&&(n=!0):I(a)[A.y][A.x]&&(n=!0),n||c.push(l(\"moveLocation\",t-i,e-i,o))}break}let a=!1,m=Array.from(u,t=>Array.from(t));m[e-i][t-i]=m[e][t],m[e][t]=null,\"white\"===r?H(m)[p.y][p.x]&&(a=!0):I(m)[A.y][A.x]&&(a=!0),a||c.push(l(\"moveLocation\",t-i,e-i,o))}for(let i=1;e+i<8&&t-i>=0;i++){let o=r=>{y.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());null!==u[e+i][t-i]&&f.removeChild(u[e+i][t-i]),u[e+i][t-i]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S()};if(null!==u[e+i][t-i]){if(n(u[e+i][t-i])!==r){let n=!1,a=Array.from(u,t=>Array.from(t));a[e+i][t-i]=a[e][t],a[e][t]=null,\"white\"===r?H(a)[p.y][p.x]&&(n=!0):I(a)[A.y][A.x]&&(n=!0),n||c.push(l(\"moveLocation\",t-i,e+i,o))}break}let a=!1,m=Array.from(u,t=>Array.from(t));m[e+i][t-i]=m[e][t],m[e][t]=null,\"white\"===r?H(m)[p.y][p.x]&&(a=!0):I(m)[A.y][A.x]&&(a=!0),a||c.push(l(\"moveLocation\",t-i,e+i,o))}for(let i=1;e-i>=0&&t+i<8;i++){let o=r=>{y.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),y.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let t=0;t<c.length;)f.removeChild(c.shift());null!==u[e-i][t+i]&&f.removeChild(u[e-i][t+i]),u[e-i][t+i]=u[e][t],u[e][t]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S()};if(null!==u[e-i][t+i]){if(n(u[e-i][t+i])!==r){let n=!1,a=Array.from(u,t=>Array.from(t));a[e-i][t+i]=a[e][t],a[e][t]=null,\"white\"===r?H(a)[p.y][p.x]&&(n=!0):I(a)[A.y][A.x]&&(n=!0),n||c.push(l(\"moveLocation\",t+i,e-i,o))}break}let a=!1,m=Array.from(u,t=>Array.from(t));m[e-i][t+i]=m[e][t],m[e][t]=null,\"white\"===r?H(m)[p.y][p.x]&&(a=!0):I(m)[A.y][A.x]&&(a=!0),a||c.push(l(\"moveLocation\",t+i,e-i,o))}}function S(){m=I(u),h=H(u)}function I(t){let e=[[],[],[],[],[],[],[],[]];for(let t=0;t<8;t++)for(let r=0;r<8;r++)e[r][t]=!1;for(let r=0;r<8;r++)for(let l=0;l<8;l++)if(null!==t[l][r]&&\"black\"!==n(t[l][r]))switch(i(t[l][r])){case\"pawn\":_(r,l,e,\"white\");break;case\"knight\":R(r,l,e);break;case\"bishop\":N(r,l,e,t);break;case\"rook\":W(r,l,e,t);break;case\"queen\":W(r,l,e,t),N(r,l,e,t);case\"king\":P(r,l,e)}return e}function H(t){let e=[[],[],[],[],[],[],[],[]];for(let t=0;t<8;t++)for(let r=0;r<8;r++)e[r][t]=!1;for(let r=0;r<8;r++)for(let l=0;l<8;l++)if(null!==t[l][r]&&\"white\"!==n(t[l][r]))switch(i(t[l][r])){case\"pawn\":_(r,l,e,\"black\");break;case\"knight\":R(r,l,e);break;case\"bishop\":N(r,l,e,t);break;case\"rook\":W(r,l,e,t);break;case\"queen\":W(r,l,e,t),N(r,l,e,t);break;case\"king\":P(r,l,e)}return e}function _(t,e,r,l){\"white\"===l?(t-1>=0&&(r[e-1][t-1]=!0),t+1<8&&(r[e-1][t+1]=!0)):(t-1>=0&&(r[e+1][t-1]=!0),t+1<8&&(r[e+1][t+1]=!0))}function R(t,e,r){e+2<8&&t+1<8&&(r[e+2][t+1]=!0),e+2<8&&t-1>=0&&(r[e+2][t-1]=!0),e-2>=0&&t+1<8&&(r[e-2][t+1]=!0),e-2>=0&&t-1>=0&&(r[e-2][t-1]=!0),e+1<8&&t+2<8&&(r[e+1][t+2]=!0),e+1<8&&t-2>=0&&(r[e+1][t-2]=!0),e-1>=0&&t+2<8&&(r[e-1][t+2]=!0),e-1>=0&&t-2>=0&&(r[e-1][t-2]=!0)}function N(t,e,r,l){for(let n=1;t+n<8&&e+n<8&&(r[e+n][t+n]=!0,null===l[e+n][t+n]);n++);for(let n=1;t-n>=0&&e-n>=0&&(r[e-n][t-n]=!0,null===l[e-n][t-n]);n++);for(let n=1;t-n>=0&&e+n<8&&(r[e+n][t-n]=!0,null===l[e+n][t-n]);n++);for(let n=1;t+n<8&&e-n>=0&&(r[e-n][t+n]=!0,null===l[e-n][t+n]);n++);}function W(t,e,r,l){for(let n=1;t+n<8&&(r[e][t+n]=!0,null===l[e][t+n]);n++);for(let n=1;t-n>=0&&(r[e][t-n]=!0,null===l[e][t-n]);n++);for(let n=1;e+n<8&&(r[e+n][t]=!0,null===l[e+n][t]);n++);for(let n=1;e-n>=0&&(r[e-n][t]=!0,null===l[e-n][t]);n++);}function P(t,e,r){e+1<8&&t+1<8&&(r[e+1][t+1]=!0),e+1<8&&t-1>=0&&(r[e+1][t-1]=!0),e-1>=0&&t+1<8&&(r[e-1][t+1]=!0),e-1>=0&&t-1>=0&&(r[e-1][t-1]=!0),e+1<8&&(r[e+1][t]=!0),e-1>=0&&(r[e-1][t]=!0),t+1<8&&(r[e][t+1]=!0),t-1>=0&&(r[e][t-1]=!0)}function O(t,e,r){let l=\"white\"===r;if(null===u[l?e-1:e+1][t]){let r=Array.from(u,t=>Array.from(t));if(r[l?e-1:e+1][t]=r[e][t],r[e][t]=null,l){if(!H(r)[p.y][p.x])return console.log(\"up1\",t,e),!0}else if(!I(r)[A.y][A.x])return console.log(\"up1\",t,e),!0;if(null===u[l?e-2:e+2][t])if((r=Array.from(u,t=>Array.from(t)))[l?e-2:e+2][t]=r[e][t],r[e][t]=null,l){if(!H(r)[p.y][p.x])return console.log(\"up2\",t,e),!0}else if(!I(r)[A.y][A.x])return console.log(\"up2\",t,e),!0}if(t+1<8&&null!==u[l?e-1:e+1][t+1]&&n(u[l?e-1:e+1][t+1])!==r){let r=Array.from(u,t=>Array.from(t));if(r[l?e-1:e+1][t+1]=r[e][t],r[e][t]=null,l){if(!H(r)[p.y][p.x])return console.log(\"up1right1\",t,e),!0}else if(!I(r)[A.y][A.x])return console.log(\"up1right1\",t,e),!0}if(t-1>=0&&null!==u[l?e-1:e+1][t-1]&&n(u[l?e-1:e+1][t-1])!==r){let r=Array.from(u,t=>Array.from(t));if(r[l?e-1:e+1][t-1]=r[e][t],r[e][t]=null,l){if(!H(r)[p.y][p.x])return console.log(\"up1left1\",t,e),!0}else if(!I(r)[A.y][A.x])return console.log(\"up1left1\",t,e),!0}if(g.x===t-1&&g.y===e&&null===u[l?e-1:e+1][t-1]){let r=Array.from(u,t=>Array.from(t));if(r[l?e-1:e+1][t-1]=r[e][t],r[e][t]=null,r[e][t-1]=null,l){if(!H(r)[p.y][p.x])return console.log(\"epleft\",t,e),!0}else if(!I(r)[A.y][A.x])return console.log(\"epleft\",t,e),!0}if(g.x===t+1&&g.y===e&&null==u[l?e-1:e+1][t+1]){let r=Array.from(u,t=>Array.from(t));if(r[l?e-1:e+1][t-1]=r[e][t],r[e][t]=null,r[e][t+1]=null,l){if(!H(r)[p.y][p.x])return console.log(\"epright\",t,e),!0}else if(!I(r)[A.y][A.x])return console.log(\"epright\",t,e),!0}return!1}function Q(t,e,r){if(e<=5&&t<=6&&(null===u[e+2][t+1]||n(u[e+2][t+1])!==r)){let l=Array.from(u,t=>Array.from(t));if(l[e+2][t+1]=l[e][t],l[e][t]=null,\"white\"===r){if(!H(l)[p.y][p.x])return!0}else if(!I(l)[A.y][A.x])return!0}if(e>=2&&t>=1&&(null===u[e-2][t-1]||n(u[e-2][t-1])!==r)){let l=Array.from(u,t=>Array.from(t));if(l[e-2][t-1]=l[e][t],l[e][t]=null,\"white\"===r){if(!H(l)[p.y][p.x])return!0}else if(!I(l)[A.y][A.x])return!0}if(e<=5&&t>=1&&(null===u[e+2][t-1]||n(u[e+2][t-1])!==r)){let l=Array.from(u,t=>Array.from(t));if(l[e+2][t-1]=l[e][t],l[e][t]=null,\"white\"===r){if(!H(l)[p.y][p.x])return!0}else if(!I(l)[A.y][A.x])return!0}if(e>=2&&t<=6&&(null===u[e-2][t+1]||n(u[e-2][t+1])!==r)){let l=Array.from(u,t=>Array.from(t));if(l[e-2][t+1]=l[e][t],l[e][t]=null,\"white\"===r){if(!H(l)[p.y][p.x])return!0}else if(!I(l)[A.y][A.x])return!0}if(e<=6&&t<=5&&(null===u[e+1][t+2]||n(u[e+1][t+2])!==r)){let l=Array.from(u,t=>Array.from(t));if(l[e+1][t+2]=l[e][t],l[e][t]=null,\"white\"===r){if(!H(l)[p.y][p.x])return!0}else if(!I(l)[A.y][A.x])return!0}if(e>=1&&t>=2&&(null===u[e-1][t-2]||n(u[e-1][t-2])!==r)){let l=Array.from(u,t=>Array.from(t));if(l[e-1][t-2]=l[e][t],l[e][t]=null,\"white\"===r){if(!H(l)[p.y][p.x])return!0}else if(!I(l)[A.y][A.x])return!0}if(e>=1&&t<=5&&(null===u[e-1][t+2]||n(u[e-1][t+2])!==r)){let l=Array.from(u,t=>Array.from(t));if(l[e-1][t+2]=l[e][t],l[e][t]=null,\"white\"===r){if(!H(l)[p.y][p.x])return!0}else if(!I(l)[A.y][A.x])return!0}if(e<=6&&t>=2&&(null===u[e+1][t-2]||n(u[e+1][t-2])!==r)){let l=Array.from(u,t=>Array.from(t));if(l[e+1][t-2]=l[e][t],l[e][XMLHttpRequestUpload]=null,\"white\"===r){if(!H(l)[p.y][p.x])return!0}else if(!I(l)[A.y][A.x])return!0}return!1}function j(t,e,r){for(let l=1;e+l<8&&t+l<8;l++){if(null===u[e+l][t+l]||n(u[e+l][t+l])!==r){let n=Array.from(u,t=>Array.from(t));if(n[e+l][t+l]=n[e][t],n[e][t]=null,\"white\"===r){if(!H(n)[p.y][p.x])return!0}else if(!I(n)[A.y][A.x])return!0}if(null!==u[e+l][t+1])break}for(let l=1;e-l>=0&&t-l>=0;l++){if(null===u[e-l][t-l]||n(u[e-l][t-l])!==r){let n=Array.from(u,t=>Array.from(t));if(n[e-l][t-l]=n[e][t],n[e][t]=null,\"white\"===r){if(!H(n)[p.y][p.x])return!0}else if(!I(n)[A.y][A.x])return!0}if(null!==u[e-l][t-l])break}for(let l=1;e+l<8&&t-l>=0;l++){if(null===u[e+l][t-l]||n(u[e+l][t-l])!==r){let n=Array.from(u,t=>Array.from(t));if(n[e+l][t-l]=n[e][t],n[e][t]=null,\"white\"===r){if(!H(n)[p.y][p.x])return!0}else if(!I(n)[A.y][A.x])return!0}if(null===u[e+l][t-l])break}for(let l=1;e-l>=0&&t+l<8;l++){if(null===u[e-l][t+l]||n(u[e-l][t+l])!==r){let n=Array.from(u,t=>Array.from(t));if(n[e-l][t+l]=n[e][t],n[e][t]=null,\"white\"===r){if(!H(n)[p.y][p.x])return!0}else if(!I(n)[A.y][A.x])return!0}if(null!==u[e-l][t-l])break}return!1}function M(t,e,r){for(let l=t+1;l<8;l++){if(null!==u[e][l]){if(n(u[e][l])!==r){let n=Array.from(u,t=>Array.from(t));if(n[e][l]=n[e][t],n[e][t]=null,\"white\"===r){if(!H(n)[p.y][p.x])return!0}else if(!I(n)[A.y][A.x])return!0}break}let i=Array.from(u,t=>Array.from(t));if(i[e][l]=i[e][t],i[e][t]=null,\"white\"===r){if(!H(i)[p.y][p.x])return!0}else if(!I(i)[A.y][A.x])return!0}for(let l=t-1;l>=0;l--){if(null!==u[e][l]){if(n(u[e][l])!==r){let n=Array.from(u,t=>Array.from(t));if(n[e][l]=n[e][t],n[e][t]=null,\"white\"===r){if(!H(n)[p.y][p.x])return!0}else if(!I(n)[A.y][A.x])return!0}break}let i=Array.from(u,t=>Array.from(t));if(i[e][l]=i[e][t],i[e][t]=null,\"white\"===r){if(!H(i)[p.y][p.x])return!0}else if(!I(i)[A.y][A.x])return!0}for(let l=e+1;l<8;l++){if(null!==u[l][t]){if(n(u[l][t])!==r){let n=Array.from(u,t=>Array.from(t));if(n[l][t]=n[e][t],n[e][t]=null,\"white\"===r){if(!H(n)[p.y][p.x])return!0}else if(!I(n)[A.y][A.x])return!0}break}let i=Array.from(u,t=>Array.from(t));if(i[l][t]=i[e][t],i[e][t]=null,\"white\"===r){if(!H(i)[p.y][p.x])return!0}else if(!I(i)[A.y][A.x])return!0}for(let l=e-1;l>=0;l--){if(null!==u[l][t]){if(n(u[l][t])!==r){let n=Array.from(u,t=>Array.from(t));if(n[l][t]=n[e][t],n[e][t]=null,\"white\"===r){if(!H(n)[p.y][p.x])return!0}else if(!I(n)[A.y][A.x])return!0}break}let i=Array.from(u,t=>Array.from(t));if(i[l][t]=i[e][t],i[e][t]=null,\"white\"===r){if(!H(i)[p.y][p.x])return!0}else if(!I(i)[A.y][A.x])return!0}return!1}function K(t,e,r){if(e+1<8&&t+1<8&&null!==u[e+1][t+1]&&n(u[e+1][t+1])!==r){let l=Array.from(u,t=>Array.from(t));if(l[e+1][t+1]=l[e][t],l[e][t]=null,\"white\"===r){if(!H(l)[p.y+1][p.x+1])return!0}else if(!I(l)[A.y+1][A.x+1])return!0}else if(e+1<8&&t+1<8&&null===u[e+1][t+1]){let l=Array.from(u,t=>Array.from(t));if(l[e+1][t+1]=l[e][t],l[e][t]=null,\"white\"===r){if(!H(l)[p.y+1][p.x+1])return!0}else if(!I(l)[A.y+1][A.x+1])return!0}if(e-1>=0&&t-1>=0&&null!==u[e-1][t-1]&&n(u[e-1][t-1])!==r){let l=Array.from(u,t=>Array.from(t));if(l[e-1][t-1]=l[e][t],l[e][t]=null,\"white\"===r){if(!H(l)[p.y-1][p.x-1])return!0}else if(!I(l)[A.y-1][A.x-1])return!0}else if(e-1>=0&&t-1>=0&&null===u[e-1][t-1]){let l=Array.from(u,t=>Array.from(t));if(l[e-1][t-1]=l[e][t],l[e][t]=null,\"white\"===r){if(!H(l)[p.y-1][p.x-1])return!0}else if(!I(l)[A.y-1][A.x-1])return!0}if(e-1>=0&&t+1<8&&null!==u[e-1][t+1]&&n(u[e-1][t+1])!==r){let l=Array.from(u,t=>Array.from(t));if(l[e-1][t-1]=l[e][t],l[e][t]=null,\"white\"===r){if(!H(l)[p.y-1][p.x-1])return!0}else if(!I(l)[A.y-1][A.x-1])return!0}else if(e-1>=0&&t+1<8&&null===u[e-1][t+1]){let l=Array.from(u,t=>Array.from(t));if(l[e-1][t+1]=l[e][t],l[e][t]=null,\"white\"===r){if(!H(l)[p.y-1][p.x+1])return!0}else if(!I(l)[A.y-1][A.x+1])return!0}if(e+1<8&&t-1>=0&&null!==u[e+1][t-1]&&n(u[e+1][t-1])!==r){let l=Array.from(u,t=>Array.from(t));if(l[e+1][t-1]=l[e][t],l[e][t]=null,\"white\"===r){if(!H(l)[p.y+1][p.x-1])return!0}else if(!I(l)[A.y+1][A.x-1])return!0}else if(e+1<8&&t-1>=0&&null===u[e+1][t-1]){let l=Array.from(u,t=>Array.from(t));if(l[e+1][t-1]=l[e][t],l[e][t]=null,\"white\"===r){if(!H(l)[p.y+1][p.x-1])return!0}else if(!I(l)[A.y+1][A.x-1])return!0}if(e+1<8&&null!==u[e+1][t]&&n(u[e+1][t])!==r){let l=Array.from(u,t=>Array.from(t));if(l[e+1][t]=l[e][t],l[e][t]=null,\"white\"===r){if(!H(l)[p.y+1][p.x])return!0}else if(!I(l)[A.y+1][A.x])return!0}else if(e+1<8&&null===u[e+1][t]){let l=Array.from(u,t=>Array.from(t));if(l[e+1][t]=l[e][t],l[e][t]=null,\"white\"===r){if(!H(l)[p.y+1][p.x])return!0}else if(!I(l)[A.y+1][A.x])return!0}if(e-1>=0&&null!==u[e-1][t]&&n(u[e-1][t])!==r){let l=Array.from(u,t=>Array.from(t));if(l[e-1][t]=l[e][t],l[e][t]=null,\"white\"===r){if(!H(l)[p.y-1][p.x])return!0}else if(!I(l)[A.y-1][A.x])return!0}else if(e-1>=0&&null===u[e-1][t]){let l=Array.from(u,t=>Array.from(t));if(l[e-1][t]=l[e][t],l[e][t]=null,\"white\"===r){if(!H(l)[p.y-1][p.x])return!0}else if(!I(l)[A.y-1][A.x])return!0}if(t+1<8&&null!==u[e][t+1]&&n(u[e][t+1])!==r){let l=Array.from(u,t=>Array.from(t));if(l[e][t+1]=l[e][t],l[e][t]=null,\"white\"===r){if(!H(l)[p.y][p.x+1])return!0}else if(!I(l)[A.y][A.x+1])return!0}else if(t+1<8&&null===u[e][t+1]){let l=Array.from(u,t=>Array.from(t));if(l[e][t+1]=l[e][t],l[e][t]=null,\"white\"===r){if(!H(l)[p.y][p.x+1])return!0}else if(!I(l)[A.y][A.x+1])return!0}if(t-1>=0&&null!==u[e][t-1]&&n(u[e][t-1])!==r){let l=Array.from(u,t=>Array.from(t));if(l[e][t-1]=l[e][t],l[e][t]=null,\"white\"===r){if(!H(l)[p.y][p.x-1])return!0}else if(!I(l)[A.y][A.x-1])return!0}else if(t-1>=0&&null===u[e][t-1]){let l=Array.from(u,t=>Array.from(t));if(l[e][t-1]=l[e][t],l[e][t]=null,\"white\"===r){if(!H(l)[p.y][p.x-1])return!0}else if(!I(l)[A.y][A.x-1])return!0}return!1}window.addEventListener(\"load\",t=>{a=document.getElementById(\"board\"),f=document.getElementById(\"g\");for(let t=0;t<64;t++){let e=document.createElementNS(\"http://www.w3.org/2000/svg\",\"rect\");e.setAttribute(\"x\",50*Math.floor(t/8)),e.setAttribute(\"y\",t%8*50),e.setAttribute(\"width\",\"50\"),e.setAttribute(\"height\",\"50\"),e.setAttribute(\"class\",\"tile\"),e.setAttribute(\"fill\",(Math.floor(t/8)+t%8)%2==0?\"white\":\"black\"),f.appendChild(e)}!function(){for(let t=0;t<8;t++)u[6][t]=l(\"Pawn_White.png\",t,6,v),u[1][t]=l(\"Pawn_Black.png\",t,1,v);for(let t=0;t<8;t++)u[2][t]=null,u[3][t]=null,u[4][t]=null,u[5][t]=null;u[0][0]=l(\"Rook_Black.png\",0,0,v),u[7][0]=l(\"Rook_White.png\",0,7,v),u[0][7]=l(\"Rook_Black.png\",7,0,v),u[7][7]=l(\"Rook_White.png\",7,7,v),u[0][6]=l(\"Knight_Black.png\",6,0,v),u[7][6]=l(\"Knight_White.png\",6,7,v),u[0][1]=l(\"Knight_Black.png\",1,0,v),u[7][1]=l(\"Knight_White.png\",1,7,v),u[0][5]=l(\"Bishop_Black.png\",5,0,v),u[7][5]=l(\"Bishop_White.png\",5,7,v),u[0][2]=l(\"Bishop_Black.png\",2,0,v),u[7][2]=l(\"Bishop_White.png\",2,7,v),u[0][4]=l(\"King_Black.png\",4,0,v),u[7][4]=l(\"King_White.png\",4,7,v),u[0][3]=l(\"Queen_Black.png\",3,0,v),u[7][3]=l(\"Queen_White.png\",3,7,v)}(),S();let e=setInterval(()=>{if(w&&function(){for(let t=0;t<8;t++)for(let e=0;e<8;e++)if(null!==u[e][t]&&n(u[e][t])===s)switch(i(u[e][t])){case\"pawn\":if(O(t,e,s))return!1;break;case\"knight\":if(Q(t,e,s))return!1;break;case\"bishop\":if(j(t,e,s))return!1;break;case\"rook\":if(M(t,e,s))return!1;break;case\"queen\":if(j(t,e,s)||M(t,e,s))return!1;break;case\"king\":if(K(t,e,s))return!1}return!0}()&&(alert(\"Game Over!\\n\"+(\"white\"===s?\"Black\":\"White\")+\" wins!\"),clearInterval(e)),\"white\"===s)if(h[p.y][p.x]){null!==b&&(f.removeChild(b),b=null);let t=document.createElementNS(\"http://www.w3.org/2000/svg\",\"circle\");t.setAttribute(\"cx\",50*p.x+25),t.setAttribute(\"cy\",50*p.y+25),t.setAttribute(\"r\",25),t.setAttribute(\"fill\",\"url(#grad1)\"),t.setAttribute(\"id\",\"checkCircle\"),t.addEventListener(\"click\",t=>{C=t}),f.appendChild(t),b=t,w=!0}else null!==b?(f.removeChild(b),b=null,w=!1):w=!1;else if(\"black\"===s)if(m[A.y][A.x]){null!==b&&(f.removeChild(b),b=null);let t=document.createElementNS(\"http://www.w3.org/2000/svg\",\"circle\");t.setAttribute(\"cx\",50*A.x+25),t.setAttribute(\"cy\",50*A.y+25),t.setAttribute(\"r\",25),t.setAttribute(\"fill\",\"url(#grad1)\"),t.setAttribute(\"id\",\"checkCircle\"),t.addEventListener(\"click\",t=>{C=t}),f.appendChild(t),b=t,w=!0}else null!==b?(f.removeChild(b),b=null,w=!1):w=!1;null!==C&&(u[\"white\"===s?p.y:A.y][\"white\"===s?p.x:A.x].dispatchEvent(C),C=null)},250)}),document.addEventListener(\"click\",t=>{if(t.target===document.body||t.target===a||\"tile\"===t.target.getAttribute(\"class\")){y=null;for(let t=0;t<c.length;)f.removeChild(c.shift())}})}]);","extractedComments":[]}