{"code":"!function(e){var t={};function l(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=t,l.d=function(e,t,r){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},l.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(l.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var n in e)l.d(r,n,function(t){return e[t]}.bind(null,n));return r},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,\"a\",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p=\"\",l(l.s=0)}([function(e,t,l){\"use strict\";function r(e,t,l,r){if(\"moveLocation\"===e){if(void 0===r)return void console.log(\"You must provide behavior for the moveLocation\");let e=document.createElementNS(\"http://www.w3.org/2000/svg\",\"circle\");return e.setAttribute(\"cx\",50*t+25),e.setAttribute(\"cy\",50*l+25),e.setAttribute(\"r\",14),e.setAttribute(\"class\",\"moveLocation\"),e.setAttribute(\"onclick\",'\"event.stopPropogation()\"'),e.addEventListener(\"click\",r),m.appendChild(e),e}if(\"checkCircle\"!==e){if(void 0===r)return void console.log(\"You must provide behavior for the piece!\");let n=document.createElementNS(\"http://www.w3.org/2000/svg\",\"image\");return n.setAttribute(\"href\",e),n.setAttribute(\"x\",50*t),n.setAttribute(\"y\",50*l),n.setAttribute(\"width\",50),n.setAttribute(\"height\",50),n.setAttribute(\"onclick\",'\"event.stopPropogation()\"'),n.addEventListener(\"click\",r),m.appendChild(n),n}}function n(e){return e.getAttribute(\"href\").slice(0,e.getAttribute(\"href\").length-4).toLowerCase().split(\"_\")[1]}function i(e){return e.getAttribute(\"href\").slice(0,e.getAttribute(\"href\").length-4).toLowerCase().split(\"_\")[0]}function o(e){switch(e){case 0:return\"a\";case 1:return\"b\";case 2:return\"c\";case 3:return\"d\";case 4:return\"e\";case 5:return\"f\";case 6:return\"g\";case 7:return\"h\"}}l.r(t),l.d(t,\"g\",function(){return m});const u=[[],[],[],[],[],[],[],[]];var a,m,d=[[],[],[],[],[],[],[],[]],f=[[],[],[],[],[],[],[],[]],c=null;const h=[];const y={white:!1,black:!1},x={bLeft:!1,bRight:!1,wLeft:!1,wRight:!1};var s=\"white\";const g={x:-1,y:-1},p={x:4,y:0},A={x:4,y:7};var b=null,C=!1;let w=null;const v=e=>{let t=Number(e.target.getAttribute(\"x\")),l=Number(e.target.getAttribute(\"y\")),a=i(e.target),d=n(e.target);for(let e=0;e<h.length;)m.removeChild(h.shift());c=e.target,function(e,t,l,i){if(i!==s)return;switch(l){case\"pawn\":!function(e,t,l){let i=\"white\"===l;if(null===u[i?t-1:t+1][e]){let l=!1,n=Array.from(u,e=>Array.from(e));if(n[i?t-1:t+1][e]=n[t][e],n[t][e]=null,i?H(n)[A.y][A.x]&&(l=!0):I(n)[p.y][p.x]&&(l=!0),!l)if(t===(i?1:6)){let l=l=>{for(let e=0;e<h.length;)m.removeChild(h.shift());m.removeChild(u[t][e]),u[t][e]=null,u[i?t-1:t+1][e]=r(i?\"Queen_White.png\":\"Queen_Black.png\",e,i?t-1:t+1,v),s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S()};h.push(r(\"moveLocation\",e,t,l))}else{let l=l=>{c.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());if(u[i?t-1:t+1][e]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let l=document.createElement(\"tr\"),r=document.createElement(\"td\");r.textContent=++E,l.appendChild(r),(r=document.createElement(\"td\")).textContent=o(e)+String(8-(t-1)),l.appendChild(r),document.getElementById(\"moveHistory\").appendChild(l),k=l}else{let l=document.createElement(\"td\");(l=document.createElement(\"td\")).textContent=o(e)+String(8-(t+1)),k.appendChild(l),document.getElementById(\"moveHistory\").appendChild(k),k=null}};h.push(r(\"moveLocation\",e,i?t-1:t+1,l))}if((t===i||1)&&(l=!1,(n=Array.from(u,e=>Array.from(e)))[i?t-2:t+2][e]=n[t][e],n[t][e]=null,i?H(n)[A.y][A.x]&&(l=!0):I(n)[p.y][p.x]&&(l=!0),!l&&t===(i?6:1)&&null===u[i?t-2:t+2][e])){let l=l=>{c.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());if(u[i?t-2:t+2][e]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=e,g.y=i?t-2:t+2,S(),null===k){let l=document.createElement(\"tr\"),r=document.createElement(\"td\");r.textContent=++E,l.appendChild(r),(r=document.createElement(\"td\")).textContent=o(e)+String(8-(t-2)),l.appendChild(r),document.getElementById(\"moveHistory\").appendChild(l),k=l}else{let l=document.createElement(\"td\");(l=document.createElement(\"td\")).textContent=o(e)+String(8-(t+2)),k.appendChild(l),document.getElementById(\"moveHistory\").appendChild(k),k=null}};h.push(r(\"moveLocation\",e,i?t-2:t+2,l))}}if(e+1<8&&null!==u[i?t-1:t+1][e+1]&&n(u[i?t-1:t+1][e+1])!==l){let l=!1,n=Array.from(u,e=>Array.from(e));if(n[i?t-1:t+1][e+1]=n[t][e],n[t][e]=null,i?H(n)[A.y][A.x]&&(l=!0):I(n)[p.y][p.x]&&(l=!0),!l)if(t===(i?1:6)){let l=l=>{for(let e=0;e<h.length;)m.removeChild(h.shift());m.removeChild(u[t][e]),u[t][e]=null;let n=r(i?\"Queen_White.png\":\"Queen_Black.png\",e+1,i?t-1:t+1,v);if(m.appendChild(n),m.removeChild(u[i?t-1:t+1][e+1]),u[i?t-1:t+1][e+1]=n,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let l=document.createElement(\"tr\"),r=document.createElement(\"td\");r.textContent=++E,l.appendChild(r),(r=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e+1)+String(8-(t-1)+\"=♕\"),l.appendChild(r),document.getElementById(\"moveHistory\").appendChild(l),k=l}else{let l=document.createElement(\"td\");(l=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e+1)+String(8-(t+1)+\"=♛\"),k.appendChild(l),document.getElementById(\"moveHistory\").appendChild(k),k=null}};h.push(r(\"moveLocation\",e+1,i?t-1:t+1,l))}else{let l=l=>{c.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());let r=u[i?t-1:t+1][e+1];if(m.removeChild(r),u[i?t-1:t+1][e+1]=null,u[i?t-1:t+1][e+1]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let l=document.createElement(\"tr\"),r=document.createElement(\"td\");r.textContent=++E,l.appendChild(r),(r=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e+1)+String(8-(t-1)),l.appendChild(r),document.getElementById(\"moveHistory\").appendChild(l),k=l}else{let l=document.createElement(\"td\");(l=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e+1)+String(8-(t+1)),k.appendChild(l),document.getElementById(\"moveHistory\").appendChild(k),k=null}};h.push(r(\"moveLocation\",e+1,i?t-1:t+1,l))}}if(e-1>=0&&null!==u[i?t-1:t+1][e-1]&&n(u[i?t-1:t+1][e-1])!==l){let l=!1,n=Array.from(u,e=>Array.from(e));if(n[i?t-1:t+1][e-1]=n[t][e],n[t][e]=null,i?H(n)[A.y][A.x]&&(l=!0):I(n)[p.y][p.x]&&(l=!0),!l)if(t===(i?1:6)){let l=l=>{for(let e=0;e<h.length;)m.removeChild(h.shift());m.removeChild(u[t][e]),u[t][e]=null;let n=r(i?\"Queen_White.png\":\"Queen_Black.png\",e-1,i?t-1:t+1,v);if(m.appendChild(n),m.removeChild(u[i?t-1:t+1][e-1]),u[i?t-1:t+1][e-1]=n,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let l=document.createElement(\"tr\"),r=document.createElement(\"td\");r.textContent=++E,l.appendChild(r),(r=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e-1)+String(8-(t-1)+\"=♕\"),l.appendChild(r),document.getElementById(\"moveHistory\").appendChild(l),k=l}else{let l=document.createElement(\"td\");(l=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e-1)+String(8-(t+1)+\"=♛\"),k.appendChild(l),document.getElementById(\"moveHistory\").appendChild(k),k=null}};h.push(r(\"moveLocation\",e-1,i?t-1:t+1,l))}else{let l=l=>{c.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());if(m.removeChild(u[i?t-1:t+1][e-1]),u[i?t-1:t+1][e-1]=null,u[i?t-1:t+1][e-1]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let l=document.createElement(\"tr\"),r=document.createElement(\"td\");r.textContent=++E,l.appendChild(r),(r=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e-1)+String(8-(t-1)),l.appendChild(r),document.getElementById(\"moveHistory\").appendChild(l),k=l}else{let l=document.createElement(\"td\");(l=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e-1)+String(8-(t+1)),k.appendChild(l),document.getElementById(\"moveHistory\").appendChild(k),k=null}};h.push(r(\"moveLocation\",e-1,i?t-1:t+1,l))}}if(g.x===e-1&&g.y===t&&null===u[i?t-1:t+1][e-1]){let l=!1,n=Array.from(u,e=>Array.from(e));if(n[i?t-1:t+1][e-1]=n[t][e],n[t][e]=null,n[t][e-1]=null,i?H(n)[A.y][A.x]&&(l=!0):I(n)[p.y][p.x]&&(l=!0),!l){let l=l=>{c.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());if(m.removeChild(u[t][e-1]),u[t][e-1]=null,u[i?t-1:t+1][e-1]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let l=document.createElement(\"tr\"),r=document.createElement(\"td\");r.textContent=++E,l.appendChild(r),(r=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e-1)+String(8-(t-1)),l.appendChild(r),document.getElementById(\"moveHistory\").appendChild(l),k=l}else{let l=document.createElement(\"td\");(l=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e-1)+String(8-(t+1)),k.appendChild(l),document.getElementById(\"moveHistory\").appendChild(k),k=null}};h.push(r(\"moveLocation\",e-1,i?t-1:t+1,l))}}if(g.x===e+1&&g.y===t&&null==u[i?t-1:t+1][e+1]){let l=!1,n=Array.from(u,e=>Array.from(e));if(n[i?t-1:t+1][e-1]=n[t][e],n[t][e]=null,n[t][e+1]=null,i?H(n)[A.y][A.x]&&(l=!0):I(n)[p.y][p.x]&&(l=!0),!l){let l=l=>{c.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());if(m.removeChild(u[t][e+1]),u[t][e+1]=null,u[i?t-1:t+1][e+1]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let l=document.createElement(\"tr\"),r=document.createElement(\"td\");r.textContent=++E,l.appendChild(r),(r=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e+1)+String(8-(t-1)),l.appendChild(r),document.getElementById(\"moveHistory\").appendChild(l),k=l}else{let l=document.createElement(\"td\");(l=document.createElement(\"td\")).textContent=o(e)+\"x\"+o(e+1)+String(8-(t+1)),k.appendChild(l),document.getElementById(\"moveHistory\").appendChild(k),k=null}};h.push(r(\"moveLocation\",e+1,i?t-1:t+1,l))}}}(e/50,t/50,i);break;case\"knight\":!function(e,t,l){if(t<=5&&e<=6&&(null===u[t+2][e+1]||n(u[t+2][e+1])!==l)){let n=!1,i=Array.from(u,e=>Array.from(e));if(i[t+2][e+1]=i[t][e],i[t][e]=null,\"white\"===l?H(i)[A.y][A.x]&&(n=!0):I(i)[p.y][p.x]&&(n=!0),!n){let l=l=>{let r=!1;c.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());if(null!==u[t+2][e+1]&&(r=!0,m.removeChild(u[t+2][e+1])),u[t+2][e+1]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let l=document.createElement(\"tr\"),n=document.createElement(\"td\");n.textContent=++E,l.appendChild(n),(n=document.createElement(\"td\")).textContent=\"N\"+(r?\"x\":\"\")+o(e+1)+String(8-(t+2)),l.appendChild(n),document.getElementById(\"moveHistory\").appendChild(l),k=l}else{let l=document.createElement(\"td\");(l=document.createElement(\"td\")).textContent=\"N\"+(r?\"x\":\"\")+o(e+1)+String(8-(t+2)),k.appendChild(l),document.getElementById(\"moveHistory\").appendChild(k),k=null}};h.push(r(\"moveLocation\",e+1,t+2,l))}}if(t>=2&&e>=1&&(null===u[t-2][e-1]||n(u[t-2][e-1])!==l)){let n=!1,i=Array.from(u,e=>Array.from(e));if(i[t-2][e-1]=i[t][e],i[t][e]=null,\"white\"===l?H(i)[A.y][A.x]&&(n=!0):I(i)[p.y][p.x]&&(n=!0),!n){let l=l=>{let r=!1;c.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());if(null!==u[t-2][e-1]&&(r=!0,m.removeChild(u[t-2][e-1])),u[t-2][e-1]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let l=document.createElement(\"tr\"),n=document.createElement(\"td\");n.textContent=++E,l.appendChild(n),(n=document.createElement(\"td\")).textContent=\"N\"+(r?\"x\":\"\")+o(e-1)+String(8-(t-2)),l.appendChild(n),document.getElementById(\"moveHistory\").appendChild(l),k=l}else{let l=document.createElement(\"td\");(l=document.createElement(\"td\")).textContent=\"N\"+(r?\"x\":\"\")+o(e-1)+String(8-(t-2)),k.appendChild(l),document.getElementById(\"moveHistory\").appendChild(k),k=null}};h.push(r(\"moveLocation\",e-1,t-2,l))}}if(t<=5&&e>=1&&(null===u[t+2][e-1]||n(u[t+2][e-1])!==l)){let n=!1,i=Array.from(u,e=>Array.from(e));if(i[t+2][e-1]=i[t][e],i[t][e]=null,\"white\"===l?H(i)[A.y][A.x]&&(n=!0):I(i)[p.y][p.x]&&(n=!0),!n){let l=l=>{let r=!1;c.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());if(null!==u[t+2][e-1]&&(r=!0,m.removeChild(u[t+2][e-1])),u[t+2][e-1]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let l=document.createElement(\"tr\"),n=document.createElement(\"td\");n.textContent=++E,l.appendChild(n),(n=document.createElement(\"td\")).textContent=\"N\"+(r?\"x\":\"\")+o(e-1)+String(8-(t+2)),l.appendChild(n),document.getElementById(\"moveHistory\").appendChild(l),k=l}else{let l=document.createElement(\"td\");(l=document.createElement(\"td\")).textContent=\"N\"+(r?\"x\":\"\")+o(e-1)+String(8-(t+2)),k.appendChild(l),document.getElementById(\"moveHistory\").appendChild(k),k=null}};h.push(r(\"moveLocation\",e-1,t+2,l))}}if(t>=2&&e<=6&&(null===u[t-2][e+1]||n(u[t-2][e+1])!==l)){let n=!1,i=Array.from(u,e=>Array.from(e));if(i[t-2][e+1]=i[t][e],i[t][e]=null,\"white\"===l?H(i)[A.y][A.x]&&(n=!0):I(i)[p.y][p.x]&&(n=!0),!n){let l=l=>{let r=!1;c.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());if(null!==u[t-2][e+1]&&(r=!0,m.removeChild(u[t-2][e+1])),u[t-2][e+1]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let l=document.createElement(\"tr\"),n=document.createElement(\"td\");n.textContent=++E,l.appendChild(n),(n=document.createElement(\"td\")).textContent=\"N\"+(r?\"x\":\"\")+o(e+1)+String(8-(t-2)),l.appendChild(n),document.getElementById(\"moveHistory\").appendChild(l),k=l}else{let l=document.createElement(\"td\");(l=document.createElement(\"td\")).textContent=\"N\"+(r?\"x\":\"\")+o(e+1)+String(8-(t-2)),k.appendChild(l),document.getElementById(\"moveHistory\").appendChild(k),k=null}};h.push(r(\"moveLocation\",e+1,t-2,l))}}if(t<=6&&e<=5&&(null===u[t+1][e+2]||n(u[t+1][e+2])!==l)){let n=!1,i=Array.from(u,e=>Array.from(e));if(i[t+1][e+2]=i[t][e],i[t][e]=null,\"white\"===l?H(i)[A.y][A.x]&&(n=!0):I(i)[p.y][p.x]&&(n=!0),!n){let l=l=>{let r=!1;c.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());if(null!==u[t+1][e+2]&&(r=!0,m.removeChild(u[t+1][e+2])),u[t+1][e+2]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let l=document.createElement(\"tr\"),n=document.createElement(\"td\");n.textContent=++E,l.appendChild(n),(n=document.createElement(\"td\")).textContent=\"N\"+(r?\"x\":\"\")+o(e+2)+String(8-(t+1)),l.appendChild(n),document.getElementById(\"moveHistory\").appendChild(l),k=l}else{let l=document.createElement(\"td\");(l=document.createElement(\"td\")).textContent=\"N\"+(r?\"x\":\"\")+o(e+2)+String(8-(t+1)),k.appendChild(l),document.getElementById(\"moveHistory\").appendChild(k),k=null}};h.push(r(\"moveLocation\",e+2,t+1,l))}}if(t>=1&&e>=2&&(null===u[t-1][e-2]||n(u[t-1][e-2])!==l)){let n=!1,i=Array.from(u,e=>Array.from(e));if(i[t-1][e-2]=i[t][e],i[t][e]=null,\"white\"===l?H(i)[A.y][A.x]&&(n=!0):I(i)[p.y][p.x]&&(n=!0),!n){let l=l=>{let r=!1;c.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());if(null!==u[t-1][e-2]&&(r=!0,m.removeChild(u[t-1][e-2])),u[t-1][e-2]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let l=document.createElement(\"tr\"),n=document.createElement(\"td\");n.textContent=++E,l.appendChild(n),(n=document.createElement(\"td\")).textContent=\"N\"+(r?\"x\":\"\")+o(e-2)+String(8-(t-1)),l.appendChild(n),document.getElementById(\"moveHistory\").appendChild(l),k=l}else{let l=document.createElement(\"td\");(l=document.createElement(\"td\")).textContent=\"N\"+(r?\"x\":\"\")+o(e-2)+String(8-(t-1)),k.appendChild(l),document.getElementById(\"moveHistory\").appendChild(k),k=null}};h.push(r(\"moveLocation\",e-2,t-1,l))}}if(t>=1&&e<=5&&(null===u[t-1][e+2]||n(u[t-1][e+2])!==l)){let n=!1,i=Array.from(u,e=>Array.from(e));if(i[t-1][e+2]=i[t][e],i[t][e]=null,\"white\"===l?H(i)[A.y][A.x]&&(n=!0):I(i)[p.y][p.x]&&(n=!0),!n){let l=l=>{let r=!1;c.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());if(null!==u[t-1][e+2]&&(r=!0,m.removeChild(u[t-1][e+2])),u[t-1][e+2]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let l=document.createElement(\"tr\"),n=document.createElement(\"td\");n.textContent=++E,l.appendChild(n),(n=document.createElement(\"td\")).textContent=\"N\"+(r?\"x\":\"\")+o(e+2)+String(8-(t-1)),l.appendChild(n),document.getElementById(\"moveHistory\").appendChild(l),k=l}else{let l=document.createElement(\"td\");(l=document.createElement(\"td\")).textContent=\"N\"+(r?\"x\":\"\")+o(e+2)+String(8-(t-1)),k.appendChild(l),document.getElementById(\"moveHistory\").appendChild(k),k=null}};h.push(r(\"moveLocation\",e+2,t-1,l))}}if(t<=6&&e>=2&&(null===u[t+1][e-2]||n(u[t+1][e-2])!==l)){let n=!1,i=Array.from(u,e=>Array.from(e));if(i[t+1][e-2]=i[t][e],i[t][e]=null,\"white\"===l?H(i)[A.y][A.x]&&(n=!0):I(i)[p.y][p.x]&&(n=!0),!n){let l=l=>{let r=!1;c.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());if(null!==u[t+1][e-2]&&(r=!0,m.removeChild(u[t+1][e-2])),u[t+1][e-2]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let l=document.createElement(\"tr\"),n=document.createElement(\"td\");n.textContent=++E,l.appendChild(n),(n=document.createElement(\"td\")).textContent=\"N\"+(r?\"x\":\"\")+o(e-2)+String(8-(t+1)),l.appendChild(n),document.getElementById(\"moveHistory\").appendChild(l),k=l}else{let l=document.createElement(\"td\");(l=document.createElement(\"td\")).textContent=\"N\"+(r?\"x\":\"\")+o(e-2)+String(8-(t+1)),k.appendChild(l),document.getElementById(\"moveHistory\").appendChild(k),k=null}};h.push(r(\"moveLocation\",e-2,t+1,l))}}}(e/50,t/50,i);break;case\"rook\":L(e/50,t/50,i,!1);break;case\"bishop\":B(e/50,t/50,i,!1);break;case\"queen\":L(e/50,t/50,i,!0),B(e/50,t/50,i,!0);break;case\"king\":!function(e,t,l){if(t+1<8&&e+1<8&&null!==u[t+1][e+1]&&n(u[t+1][e+1])!==l){let n=!1,i=Array.from(u,e=>Array.from(e));if(i[t+1][e+1]=i[t][e],i[t][e]=null,\"white\"===l?H(i)[A.y+1][A.x+1]&&(n=!0):I(i)[p.y+1][p.x+1]&&(n=!0),!n){let n=r=>{c.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());m.removeChild(u[t+1][e+1]),u[t+1][e+1]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===l?(y.white=!0,A.x=e+1,A.y=t+1):(y.black=!0,p.x=e+1,p.y=t+1)};h.push(r(\"moveLocation\",e+1,t+1,n))}}else if(t+1<8&&e+1<8&&null===u[t+1][e+1]){let n=!1,i=Array.from(u,e=>Array.from(e));if(i[t+1][e+1]=i[t][e],i[t][e]=null,\"white\"===l?H(i)[A.y+1][A.x+1]&&(n=!0):I(i)[p.y+1][p.x+1]&&(n=!0),!n){let n=r=>{c.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());u[t+1][e+1]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===l?(y.white=!0,A.x=e+1,A.y=t+1):(y.black=!0,p.x=e+1,p.y=t+1)};h.push(r(\"moveLocation\",e+1,t+1,n))}}if(t-1>=0&&e-1>=0&&null!==u[t-1][e-1]&&n(u[t-1][e-1])!==l){let n=!1,i=Array.from(u,e=>Array.from(e));if(i[t-1][e-1]=i[t][e],i[t][e]=null,\"white\"===l?H(i)[A.y-1][A.x-1]&&(n=!0):I(i)[p.y-1][p.x-1]&&(n=!0),!n){let n=r=>{c.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());m.removeChild(u[t-1][e-1]),u[t-1][e-1]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===l?(y.white=!0,A.x=e-1,A.y=t-1):(y.black=!0,p.x=e-1,p.y=t-1)};h.push(r(\"moveLocation\",e-1,t-1,n))}}else if(t-1>=0&&e-1>=0&&null===u[t-1][e-1]){let n=!1,i=Array.from(u,e=>Array.from(e));if(i[t-1][e-1]=i[t][e],i[t][e]=null,\"white\"===l?H(i)[A.y-1][A.x-1]&&(n=!0):I(i)[p.y-1][p.x-1]&&(n=!0),!n){let n=r=>{c.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());u[t-1][e-1]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===l?(y.white=!0,A.x=e-1,A.y=t-1):(y.black=!0,p.x=e-1,p.y=t-1)};h.push(r(\"moveLocation\",e-1,t-1,n))}}if(t-1>=0&&e+1<8&&null!==u[t-1][e+1]&&n(u[t-1][e+1])!==l){let n=!1,i=Array.from(u,e=>Array.from(e));if(i[t-1][e+1]=i[t][e],i[t][e]=null,\"white\"===l?H(i)[A.y-1][A.x-1]&&(n=!0):I(i)[p.y-1][p.x-1]&&(n=!0),!n){let n=r=>{c.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());m.removeChild(u[t-1][e+1]),u[t-1][e+1]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===l?(y.white=!0,A.x=e+1,A.y=t-1):(y.black=!0,p.x=e+1,p.y=t-1)};h.push(r(\"moveLocation\",e+1,t-1,n))}}else if(t-1>=0&&e+1<8&&null===u[t-1][e+1]){let n=!1,i=Array.from(u,e=>Array.from(e));if(i[t-1][e+1]=i[t][e],i[t][e]=null,\"white\"===l?H(i)[A.y-1][A.x+1]&&(n=!0):I(i)[p.y-1][p.x+1]&&(n=!0),!n){let n=r=>{c.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());u[t-1][e+1]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===l?(y.white=!0,A.x=e+1,A.y=t-1):(y.black=!0,p.x=e+1,p.y=t-1)};h.push(r(\"moveLocation\",e+1,t-1,n))}}if(t+1<8&&e-1>=0&&null!==u[t+1][e-1]&&n(u[t+1][e-1])!==l){let n=!1,i=Array.from(u,e=>Array.from(e));if(i[t+1][e-1]=i[t][e],i[t][e]=null,\"white\"===l?H(i)[A.y+1][A.x-1]&&(n=!0):I(i)[p.y+1][p.x-1]&&(n=!0),!n){let n=r=>{c.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());m.removeChild(u[t+1][e-1]),u[t+1][e-1]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===l?(y.white=!0,A.x=e-1,A.y=t+1):(y.black=!0,p.x=e-1,p.y=t+1)};h.push(r(\"moveLocation\",e-1,t+1,n))}}else if(t+1<8&&e-1>=0&&null===u[t+1][e-1]){let n=!1,i=Array.from(u,e=>Array.from(e));if(i[t+1][e-1]=i[t][e],i[t][e]=null,\"white\"===l?H(i)[A.y+1][A.x-1]&&(n=!0):I(i)[p.y+1][p.x-1]&&(n=!0),!n){let n=r=>{c.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());u[t+1][e-1]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===l?(y.white=!0,A.x=e-1,A.y=t+1):(y.black=!0,p.x=e-1,p.y=t+1)};h.push(r(\"moveLocation\",e-1,t+1,n))}}if(t+1<8&&null!==u[t+1][e]&&n(u[t+1][e])!==l){let n=!1,i=Array.from(u,e=>Array.from(e));if(i[t+1][e]=i[t][e],i[t][e]=null,\"white\"===l?H(i)[A.y+1][A.x]&&(n=!0):I(i)[p.y+1][p.x]&&(n=!0),!n){let n=r=>{c.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());m.removeChild(u[t+1][e]),u[t+1][e]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===l?(y.white=!0,A.x=e,A.y=t+1):(y.black=!0,p.x=e,p.y=t+1)};h.push(r(\"moveLocation\",e,t+1,n))}}else if(t+1<8&&null===u[t+1][e]){let n=!1,i=Array.from(u,e=>Array.from(e));if(i[t+1][e]=i[t][e],i[t][e]=null,\"white\"===l?H(i)[A.y+1][A.x]&&(n=!0):I(i)[p.y+1][p.x]&&(n=!0),!n){let n=r=>{c.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());u[t+1][e]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===l?(y.white=!0,A.x=e,A.y=t+1):(y.black=!0,p.x=e,p.y=t+1)};h.push(r(\"moveLocation\",e,t+1,n))}}if(t-1>=0&&null!==u[t-1][e]&&n(u[t-1][e])!==l){let n=!1,i=Array.from(u,e=>Array.from(e));if(i[t-1][e]=i[t][e],i[t][e]=null,\"white\"===l?H(i)[A.y-1][A.x]&&(n=!0):I(i)[p.y-1][p.x]&&(n=!0),!n){let n=r=>{c.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());m.removeChild(u[t-1][e]),u[t-1][e]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===l?(y.white=!0,A.x=e,A.y=t-1):(y.black=!0,p.x=e,p.y=t-1)};h.push(r(\"moveLocation\",e,t-1,n))}}else if(t-1>=0&&null===u[t-1][e]){let n=!1,i=Array.from(u,e=>Array.from(e));if(i[t-1][e]=i[t][e],i[t][e]=null,\"white\"===l?H(i)[A.y-1][A.x]&&(n=!0):I(i)[p.y-1][p.x]&&(n=!0),!n){let n=r=>{c.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());u[t-1][e]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===l?(y.white=!0,A.x=e,A.y=t-1):(y.black=!0,p.x=e,p.y=t-1)};h.push(r(\"moveLocation\",e,t-1,n))}}if(e+1<8&&null!==u[t][e+1]&&n(u[t][e+1])!==l){let n=!1,i=Array.from(u,e=>Array.from(e));if(i[t][e+1]=i[t][e],i[t][e]=null,\"white\"===l?H(i)[A.y][A.x+1]&&(n=!0):I(i)[p.y][p.x+1]&&(n=!0),!n){let n=r=>{c.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());m.removeChild(u[t][e+1]),u[t][e+1]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===l?(y.white=!0,A.x=e+1,A.y=t):(y.black=!0,p.x=e+1,p.y=t)};h.push(r(\"moveLocation\",e+1,t,n))}}else if(e+1<8&&null===u[t][e+1]){let n=!1,i=Array.from(u,e=>Array.from(e));if(i[t][e+1]=i[t][e],i[t][e]=null,\"white\"===l?H(i)[A.y][A.x+1]&&(n=!0):I(i)[p.y][p.x+1]&&(n=!0),!n){let n=r=>{c.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());u[t][e+1]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===l?(y.white=!0,A.x=e+1,A.y=t):(y.black=!0,p.x=e+1,p.y=t)};h.push(r(\"moveLocation\",e+1,t,n))}}if(e-1>=0&&null!==u[t][e-1]&&n(u[t][e-1])!==l){let n=!1,i=Array.from(u,e=>Array.from(e));if(i[t][e-1]=i[t][e],i[t][e]=null,\"white\"===l?H(i)[A.y][A.x-1]&&(n=!0):I(i)[p.y][p.x-1]&&(n=!0),!n){let n=r=>{c.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());m.removeChild(u[t][e-1]),u[t][e-1]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===l?(y.white=!0,A.x=e-1,A.y=t):(y.black=!0,p.x=e-1,p.y=t)};h.push(r(\"moveLocation\",e-1,t,n))}}else if(e-1>=0&&null===u[t][e-1]){let n=!1,i=Array.from(u,e=>Array.from(e));if(i[t][e-1]=i[t][e],i[t][e]=null,\"white\"===l?H(i)[A.y][A.x-1]&&(n=!0):I(i)[p.y][p.x-1]&&(n=!0),!n){let n=r=>{c.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());u[t][e-1]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===l?(y.white=!0,A.x=e-1,A.y=t):(y.black=!0,p.x=e-1,p.y=t)};h.push(r(\"moveLocation\",e-1,t,n))}}let i=\"white\"===l?y.white:y.black;if(!i&&!C){if(!(i=\"white\"===l?x.wLeft:x.bLeft)&&null===u[\"white\"===l?7:0][1]&&null===u[\"white\"===l?7:0][2]&&null===u[\"white\"===l?7:0][3]){let n=r=>{c.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());let n=u[\"white\"===l?7:0][0];n.setAttribute(\"x\",50*(e-1)),u[t][e-2]=u[t][e],u[t][e-1]=n,u[t][e]=null,u[\"white\"===l?7:0][0]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===l?(y.white=!0,A.x=e-2,A.y=t,x.wLeft=!0):(y.black=!0,p.x=e-2,p.y=t,x.bLeft=!0)};h.push(r(\"moveLocation\",e-2,t,n))}if(!(i=(\"white\"===l?x.wRight:x.bRight)||(\"white\"===l?y.white:y.black))&&null===u[\"white\"===l?7:0][5]&&null===u[\"white\"===l?7:0][6]){let n=r=>{c.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());let n=u[\"white\"===l?7:0][7];n.setAttribute(\"x\",50*(e+1)),u[t][e+2]=u[t][e],u[t][e+1]=n,u[t][e]=null,u[\"white\"===l?7:0][7]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),\"white\"===l?(y.white=!0,A.x=e+2,A.y=t,x.wRight=!0):(y.black=!0,p.x=e+2,p.y=t,x.bRight=!0)};h.push(r(\"moveLocation\",e+2,t,n))}}}(e/50,t/50,i)}}(t,l,a,d)};let E=0,k=null;function L(e,t,l,i){for(let a=e+1;a<8;a++){let d=r=>{let n=!1;c.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());if(null!==u[t][a]&&(n=!0,m.removeChild(u[t][a])),u[t][a]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let e=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++E,e.appendChild(l),(l=document.createElement(\"td\")).textContent=i?\"Q\":\"R\"+(n?\"x\":\"\")+o(a)+String(8-t),e.appendChild(l),document.getElementById(\"moveHistory\").appendChild(e),k=e}else{let e=document.createElement(\"td\");(e=document.createElement(\"td\")).textContent=i?\"Q\":\"R\"+(n?\"x\":\"\")+o(a)+String(8-t),k.appendChild(e),document.getElementById(\"moveHistory\").appendChild(k),k=null}\"white\"===l?0===e?x.wLeft=!0:x.wRight=!0:0===e?x.bLeft=!0:x.bRight=!0};if(null!==u[t][a]){if(n(u[t][a])!==l){let n=!1,i=Array.from(u,e=>Array.from(e));i[t][a]=i[t][e],i[t][e]=null,\"white\"===l?H(i)[A.y][A.x]&&(n=!0):I(i)[p.y][p.x]&&(n=!0),n||h.push(r(\"moveLocation\",a,t,d))}break}let f=!1,y=Array.from(u,e=>Array.from(e));y[t][a]=y[t][e],y[t][e]=null,\"white\"===l?H(y)[A.y][A.x]&&(f=!0):I(y)[p.y][p.x]&&(f=!0),f||h.push(r(\"moveLocation\",a,t,d))}for(let a=e-1;a>=0;a--){let d=r=>{let n=!1;c.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());if(null!==u[t][a]&&(n=!0,m.removeChild(u[t][a])),u[t][a]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let e=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++E,e.appendChild(l),(l=document.createElement(\"td\")).textContent=i?\"Q\":\"R\"+(n?\"x\":\"\")+o(a)+String(8-t),e.appendChild(l),document.getElementById(\"moveHistory\").appendChild(e),k=e}else{let e=document.createElement(\"td\");(e=document.createElement(\"td\")).textContent=i?\"Q\":\"R\"+(n?\"x\":\"\")+o(a)+String(8-t),k.appendChild(e),document.getElementById(\"moveHistory\").appendChild(k),k=null}\"white\"===l?0===e?x.wLeft=!0:x.wRight=!0:0===e?x.bLeft=!0:x.bRight=!0};if(null!==u[t][a]){if(n(u[t][a])!==l){let n=!1,i=Array.from(u,e=>Array.from(e));i[t][a]=i[t][e],i[t][e]=null,\"white\"===l?H(i)[A.y][A.x]&&(n=!0):I(i)[p.y][p.x]&&(n=!0),n||h.push(r(\"moveLocation\",a,t,d))}break}let f=!1,y=Array.from(u,e=>Array.from(e));y[t][a]=y[t][e],y[t][e]=null,\"white\"===l?H(y)[A.y][A.x]&&(f=!0):I(y)[p.y][p.x]&&(f=!0),f||h.push(r(\"moveLocation\",a,t,d))}for(let a=t+1;a<8;a++){let d=r=>{let n=!1;c.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());if(null!==u[a][e]&&(n=!0,m.removeChild(u[a][e])),u[a][e]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let t=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++E,t.appendChild(l),(l=document.createElement(\"td\")).textContent=i?\"Q\":\"R\"+(n?\"x\":\"\")+o(e)+String(8-a),t.appendChild(l),document.getElementById(\"moveHistory\").appendChild(t),k=t}else{let t=document.createElement(\"td\");(t=document.createElement(\"td\")).textContent=i?\"Q\":\"R\"+(n?\"x\":\"\")+o(e)+String(8-a),k.appendChild(t),document.getElementById(\"moveHistory\").appendChild(k),k=null}\"white\"===l?0===e?x.wLeft=!0:x.wRight=!0:0===e?x.bLeft=!0:x.bRight=!0};if(null!==u[a][e]){if(n(u[a][e])!==l){let n=!1,i=Array.from(u,e=>Array.from(e));i[a][e]=i[t][e],i[t][e]=null,\"white\"===l?H(i)[A.y][A.x]&&(n=!0):I(i)[p.y][p.x]&&(n=!0),n||h.push(r(\"moveLocation\",e,a,d))}break}let f=!1,y=Array.from(u,e=>Array.from(e));y[a][e]=y[t][e],y[t][e]=null,\"white\"===l?H(y)[A.y][A.x]&&(f=!0):I(y)[p.y][p.x]&&(f=!0),f||h.push(r(\"moveLocation\",e,a,d))}for(let a=t-1;a>=0;a--){let d=r=>{let n=!1;c.setAttribute(\"x\",r.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",r.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());if(null!==u[a][e]&&(n=!0,m.removeChild(u[a][e])),u[a][e]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let t=document.createElement(\"tr\"),l=document.createElement(\"td\");l.textContent=++E,t.appendChild(l),(l=document.createElement(\"td\")).textContent=i?\"Q\":\"R\"+(n?\"x\":\"\")+o(e)+String(8-a),t.appendChild(l),document.getElementById(\"moveHistory\").appendChild(t),k=t}else{let t=document.createElement(\"td\");(t=document.createElement(\"td\")).textContent=i?\"Q\":\"R\"+(n?\"x\":\"\")+o(e)+String(8-a),k.appendChild(t),document.getElementById(\"moveHistory\").appendChild(k),k=null}\"white\"===l?0===e?x.wLeft=!0:x.wRight=!0:0===e?x.bLeft=!0:x.bRight=!0};if(null!==u[a][e]){if(n(u[a][e])!==l){let n=!1,i=Array.from(u,e=>Array.from(e));i[a][e]=i[t][e],i[t][e]=null,\"white\"===l?H(i)[A.y][A.x]&&(n=!0):I(i)[p.y][p.x]&&(n=!0),n||h.push(r(\"moveLocation\",e,a,d))}break}let f=!1,y=Array.from(u,e=>Array.from(e));y[a][e]=y[t][e],y[t][e]=null,\"white\"===l?H(y)[A.y][A.x]&&(f=!0):I(y)[p.y][p.x]&&(f=!0),f||h.push(r(\"moveLocation\",e,a,d))}}function B(e,t,l,i){console.log(i);for(let a=1;t+a<8&&e+a<8;a++){let d=l=>{let r=!1;c.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());if(null!==u[t+a][e+a]&&(r=!0,m.removeChild(u[t+a][e+a])),u[t+a][e+a]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let l=document.createElement(\"tr\"),n=document.createElement(\"td\");n.textContent=++E,l.appendChild(n),(n=document.createElement(\"td\")).textContent=i?\"Q\":\"B\"+(r?\"x\":\"\")+o(e+a)+String(8-(t+a)),l.appendChild(n),document.getElementById(\"moveHistory\").appendChild(l),k=l}else{let l=document.createElement(\"td\");(l=document.createElement(\"td\")).textContent=i?\"Q\":\"B\"+(r?\"x\":\"\")+o(e+a)+String(8-(t+a)),k.appendChild(l),document.getElementById(\"moveHistory\").appendChild(k),k=null}};if(null!==u[t+a][e+a]){if(n(u[t+a][e+a])!==l){let n=!1,i=Array.from(u,e=>Array.from(e));i[t+a][e+a]=i[t][e],i[t][e]=null,\"white\"===l?H(i)[A.y][A.x]&&(n=!0):I(i)[p.y][p.x]&&(n=!0),n||h.push(r(\"moveLocation\",e+a,t+a,d))}break}let f=!1,y=Array.from(u,e=>Array.from(e));y[t+a][e+a]=y[t][e],y[t][e]=null,\"white\"===l?H(y)[A.y][A.x]&&(f=!0):I(y)[p.y][p.x]&&(f=!0),f||h.push(r(\"moveLocation\",e+a,t+a,d))}for(let a=1;t-a>=0&&e-a>=0;a++){let d=l=>{let r=!1;c.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());if(null!==u[t-a][e-a]&&(r=!0,m.removeChild(u[t-a][e-a])),u[t-a][e-a]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let l=document.createElement(\"tr\"),n=document.createElement(\"td\");n.textContent=++E,l.appendChild(n),(n=document.createElement(\"td\")).textContent=i?\"Q\":\"B\"+(r?\"x\":\"\")+o(e-a)+String(8-(t-a)),l.appendChild(n),document.getElementById(\"moveHistory\").appendChild(l),k=l}else{let l=document.createElement(\"td\");(l=document.createElement(\"td\")).textContent=i?\"Q\":\"B\"+(r?\"x\":\"\")+o(e-a)+String(8-(t-a)),k.appendChild(l),document.getElementById(\"moveHistory\").appendChild(k),k=null}};if(null!==u[t-a][e-a]){if(n(u[t-a][e-a])!==l){let n=!1,i=Array.from(u,e=>Array.from(e));i[t-a][e-a]=i[t][e],i[t][e]=null,\"white\"===l?H(i)[A.y][A.x]&&(n=!0):I(i)[p.y][p.x]&&(n=!0),n||h.push(r(\"moveLocation\",e-a,t-a,d))}break}let f=!1,y=Array.from(u,e=>Array.from(e));y[t-a][e-a]=y[t][e],y[t][e]=null,\"white\"===l?H(y)[A.y][A.x]&&(f=!0):I(y)[p.y][p.x]&&(f=!0),f||h.push(r(\"moveLocation\",e-a,t-a,d))}for(let a=1;t+a<8&&e-a>=0;a++){let d=l=>{let r=!1;c.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());if(null!==u[t+a][e-a]&&(r=!0,m.removeChild(u[t+a][e-a])),u[t+a][e-a]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let l=document.createElement(\"tr\"),n=document.createElement(\"td\");n.textContent=++E,l.appendChild(n),(n=document.createElement(\"td\")).textContent=i?\"Q\":\"B\"+(r?\"x\":\"\")+o(e-a)+String(8-(t+a)),l.appendChild(n),document.getElementById(\"moveHistory\").appendChild(l),k=l}else{let l=document.createElement(\"td\");(l=document.createElement(\"td\")).textContent=i?\"Q\":\"B\"+(r?\"x\":\"\")+o(e-a)+String(8-(t+a)),k.appendChild(l),document.getElementById(\"moveHistory\").appendChild(k),k=null}};if(null!==u[t+a][e-a]){if(n(u[t+a][e-a])!==l){let n=!1,i=Array.from(u,e=>Array.from(e));i[t+a][e-a]=i[t][e],i[t][e]=null,\"white\"===l?H(i)[A.y][A.x]&&(n=!0):I(i)[p.y][p.x]&&(n=!0),n||h.push(r(\"moveLocation\",e-a,t+a,d))}break}let f=!1,y=Array.from(u,e=>Array.from(e));y[t+a][e-a]=y[t][e],y[t][e]=null,\"white\"===l?H(y)[A.y][A.x]&&(f=!0):I(y)[p.y][p.x]&&(f=!0),f||h.push(r(\"moveLocation\",e-a,t+a,d))}for(let a=1;t-a>=0&&e+a<8;a++){let d=l=>{let r=!1;c.setAttribute(\"x\",l.target.getAttribute(\"cx\")-25),c.setAttribute(\"y\",l.target.getAttribute(\"cy\")-25);for(let e=0;e<h.length;)m.removeChild(h.shift());if(null!==u[t-a][e+a]&&(r=!0,m.removeChild(u[t-a][e+a])),u[t-a][e+a]=u[t][e],u[t][e]=null,s=\"white\"===s?\"black\":\"white\",g.x=-1,g.y=-1,S(),null===k){let l=document.createElement(\"tr\"),n=document.createElement(\"td\");n.textContent=++E,l.appendChild(n),(n=document.createElement(\"td\")).textContent=i?\"Q\":\"B\"+(r?\"x\":\"\")+o(e+a)+String(8-(t-a)),l.appendChild(n),document.getElementById(\"moveHistory\").appendChild(l),k=l}else{let l=document.createElement(\"td\");(l=document.createElement(\"td\")).textContent=i?\"Q\":\"B\"+(r?\"x\":\"\")+o(e+a)+String(8-(t-a)),k.appendChild(l),document.getElementById(\"moveHistory\").appendChild(k),k=null}};if(null!==u[t-a][e+a]){if(n(u[t-a][e+a])!==l){let n=!1,i=Array.from(u,e=>Array.from(e));i[t-a][e+a]=i[t][e],i[t][e]=null,\"white\"===l?H(i)[A.y][A.x]&&(n=!0):I(i)[p.y][p.x]&&(n=!0),n||h.push(r(\"moveLocation\",e+a,t-a,d))}break}let f=!1,y=Array.from(u,e=>Array.from(e));y[t-a][e+a]=y[t][e],y[t][e]=null,\"white\"===l?H(y)[A.y][A.x]&&(f=!0):I(y)[p.y][p.x]&&(f=!0),f||h.push(r(\"moveLocation\",e+a,t-a,d))}}function S(){d=I(u),f=H(u)}function I(e){let t=[[],[],[],[],[],[],[],[]];for(let e=0;e<8;e++)for(let l=0;l<8;l++)t[l][e]=!1;for(let l=0;l<8;l++)for(let r=0;r<8;r++)if(null!==e[r][l]&&\"black\"!==n(e[r][l]))switch(i(e[r][l])){case\"pawn\":_(l,r,t,\"white\");break;case\"knight\":R(l,r,t);break;case\"bishop\":Q(l,r,t,e);break;case\"rook\":N(l,r,t,e);break;case\"queen\":N(l,r,t,e),Q(l,r,t,e);case\"king\":W(l,r,t)}return t}function H(e){let t=[[],[],[],[],[],[],[],[]];for(let e=0;e<8;e++)for(let l=0;l<8;l++)t[l][e]=!1;for(let l=0;l<8;l++)for(let r=0;r<8;r++)if(null!==e[r][l]&&\"white\"!==n(e[r][l]))switch(i(e[r][l])){case\"pawn\":_(l,r,t,\"black\");break;case\"knight\":R(l,r,t);break;case\"bishop\":Q(l,r,t,e);break;case\"rook\":N(l,r,t,e);break;case\"queen\":N(l,r,t,e),Q(l,r,t,e);break;case\"king\":W(l,r,t)}return t}function _(e,t,l,r){\"white\"===r?(e-1>=0&&(l[t-1][e-1]=!0),e+1<8&&(l[t-1][e+1]=!0)):(e-1>=0&&(l[t+1][e-1]=!0),e+1<8&&(l[t+1][e+1]=!0))}function R(e,t,l){t+2<8&&e+1<8&&(l[t+2][e+1]=!0),t+2<8&&e-1>=0&&(l[t+2][e-1]=!0),t-2>=0&&e+1<8&&(l[t-2][e+1]=!0),t-2>=0&&e-1>=0&&(l[t-2][e-1]=!0),t+1<8&&e+2<8&&(l[t+1][e+2]=!0),t+1<8&&e-2>=0&&(l[t+1][e-2]=!0),t-1>=0&&e+2<8&&(l[t-1][e+2]=!0),t-1>=0&&e-2>=0&&(l[t-1][e-2]=!0)}function Q(e,t,l,r){for(let n=1;e+n<8&&t+n<8&&(l[t+n][e+n]=!0,null===r[t+n][e+n]);n++);for(let n=1;e-n>=0&&t-n>=0&&(l[t-n][e-n]=!0,null===r[t-n][e-n]);n++);for(let n=1;e-n>=0&&t+n<8&&(l[t+n][e-n]=!0,null===r[t+n][e-n]);n++);for(let n=1;e+n<8&&t-n>=0&&(l[t-n][e+n]=!0,null===r[t-n][e+n]);n++);}function N(e,t,l,r){for(let n=1;e+n<8&&(l[t][e+n]=!0,null===r[t][e+n]);n++);for(let n=1;e-n>=0&&(l[t][e-n]=!0,null===r[t][e-n]);n++);for(let n=1;t+n<8&&(l[t+n][e]=!0,null===r[t+n][e]);n++);for(let n=1;t-n>=0&&(l[t-n][e]=!0,null===r[t-n][e]);n++);}function W(e,t,l){t+1<8&&e+1<8&&(l[t+1][e+1]=!0),t+1<8&&e-1>=0&&(l[t+1][e-1]=!0),t-1>=0&&e+1<8&&(l[t-1][e+1]=!0),t-1>=0&&e-1>=0&&(l[t-1][e-1]=!0),t+1<8&&(l[t+1][e]=!0),t-1>=0&&(l[t-1][e]=!0),e+1<8&&(l[t][e+1]=!0),e-1>=0&&(l[t][e-1]=!0)}function P(e,t,l){let r=\"white\"===l;if(null===u[r?t-1:t+1][e]){let l=Array.from(u,e=>Array.from(e));if(l[r?t-1:t+1][e]=l[t][e],l[t][e]=null,r){if(!H(l)[A.y][A.x])return console.log(\"up1\",e,t),!0}else if(!I(l)[p.y][p.x])return console.log(\"up1\",e,t),!0;if(null===u[r?t-2:t+2][e])if((l=Array.from(u,e=>Array.from(e)))[r?t-2:t+2][e]=l[t][e],l[t][e]=null,r){if(!H(l)[A.y][A.x])return console.log(\"up2\",e,t),!0}else if(!I(l)[p.y][p.x])return console.log(\"up2\",e,t),!0}if(e+1<8&&null!==u[r?t-1:t+1][e+1]&&n(u[r?t-1:t+1][e+1])!==l){let l=Array.from(u,e=>Array.from(e));if(l[r?t-1:t+1][e+1]=l[t][e],l[t][e]=null,r){if(!H(l)[A.y][A.x])return console.log(\"up1right1\",e,t),!0}else if(!I(l)[p.y][p.x])return console.log(\"up1right1\",e,t),!0}if(e-1>=0&&null!==u[r?t-1:t+1][e-1]&&n(u[r?t-1:t+1][e-1])!==l){let l=Array.from(u,e=>Array.from(e));if(l[r?t-1:t+1][e-1]=l[t][e],l[t][e]=null,r){if(!H(l)[A.y][A.x])return console.log(\"up1left1\",e,t),!0}else if(!I(l)[p.y][p.x])return console.log(\"up1left1\",e,t),!0}if(g.x===e-1&&g.y===t&&null===u[r?t-1:t+1][e-1]){let l=Array.from(u,e=>Array.from(e));if(l[r?t-1:t+1][e-1]=l[t][e],l[t][e]=null,l[t][e-1]=null,r){if(!H(l)[A.y][A.x])return console.log(\"epleft\",e,t),!0}else if(!I(l)[p.y][p.x])return console.log(\"epleft\",e,t),!0}if(g.x===e+1&&g.y===t&&null==u[r?t-1:t+1][e+1]){let l=Array.from(u,e=>Array.from(e));if(l[r?t-1:t+1][e-1]=l[t][e],l[t][e]=null,l[t][e+1]=null,r){if(!H(l)[A.y][A.x])return console.log(\"epright\",e,t),!0}else if(!I(l)[p.y][p.x])return console.log(\"epright\",e,t),!0}return!1}function O(e,t,l){if(t<=5&&e<=6&&(null===u[t+2][e+1]||n(u[t+2][e+1])!==l)){let r=Array.from(u,e=>Array.from(e));if(r[t+2][e+1]=r[t][e],r[t][e]=null,\"white\"===l){if(!H(r)[A.y][A.x])return!0}else if(!I(r)[p.y][p.x])return!0}if(t>=2&&e>=1&&(null===u[t-2][e-1]||n(u[t-2][e-1])!==l)){let r=Array.from(u,e=>Array.from(e));if(r[t-2][e-1]=r[t][e],r[t][e]=null,\"white\"===l){if(!H(r)[A.y][A.x])return!0}else if(!I(r)[p.y][p.x])return!0}if(t<=5&&e>=1&&(null===u[t+2][e-1]||n(u[t+2][e-1])!==l)){let r=Array.from(u,e=>Array.from(e));if(r[t+2][e-1]=r[t][e],r[t][e]=null,\"white\"===l){if(!H(r)[A.y][A.x])return!0}else if(!I(r)[p.y][p.x])return!0}if(t>=2&&e<=6&&(null===u[t-2][e+1]||n(u[t-2][e+1])!==l)){let r=Array.from(u,e=>Array.from(e));if(r[t-2][e+1]=r[t][e],r[t][e]=null,\"white\"===l){if(!H(r)[A.y][A.x])return!0}else if(!I(r)[p.y][p.x])return!0}if(t<=6&&e<=5&&(null===u[t+1][e+2]||n(u[t+1][e+2])!==l)){let r=Array.from(u,e=>Array.from(e));if(r[t+1][e+2]=r[t][e],r[t][e]=null,\"white\"===l){if(!H(r)[A.y][A.x])return!0}else if(!I(r)[p.y][p.x])return!0}if(t>=1&&e>=2&&(null===u[t-1][e-2]||n(u[t-1][e-2])!==l)){let r=Array.from(u,e=>Array.from(e));if(r[t-1][e-2]=r[t][e],r[t][e]=null,\"white\"===l){if(!H(r)[A.y][A.x])return!0}else if(!I(r)[p.y][p.x])return!0}if(t>=1&&e<=5&&(null===u[t-1][e+2]||n(u[t-1][e+2])!==l)){let r=Array.from(u,e=>Array.from(e));if(r[t-1][e+2]=r[t][e],r[t][e]=null,\"white\"===l){if(!H(r)[A.y][A.x])return!0}else if(!I(r)[p.y][p.x])return!0}if(t<=6&&e>=2&&(null===u[t+1][e-2]||n(u[t+1][e-2])!==l)){let r=Array.from(u,e=>Array.from(e));if(r[t+1][e-2]=r[t][e],r[t][XMLHttpRequestUpload]=null,\"white\"===l){if(!H(r)[A.y][A.x])return!0}else if(!I(r)[p.y][p.x])return!0}return!1}function j(e,t,l){for(let r=1;t+r<8&&e+r<8;r++){if(null===u[t+r][e+r]||n(u[t+r][e+r])!==l){let n=Array.from(u,e=>Array.from(e));if(n[t+r][e+r]=n[t][e],n[t][e]=null,\"white\"===l){if(!H(n)[A.y][A.x])return!0}else if(!I(n)[p.y][p.x])return!0}if(null!==u[t+r][e+1])break}for(let r=1;t-r>=0&&e-r>=0;r++){if(null===u[t-r][e-r]||n(u[t-r][e-r])!==l){let n=Array.from(u,e=>Array.from(e));if(n[t-r][e-r]=n[t][e],n[t][e]=null,\"white\"===l){if(!H(n)[A.y][A.x])return!0}else if(!I(n)[p.y][p.x])return!0}if(null!==u[t-r][e-r])break}for(let r=1;t+r<8&&e-r>=0;r++){if(null===u[t+r][e-r]||n(u[t+r][e-r])!==l){let n=Array.from(u,e=>Array.from(e));if(n[t+r][e-r]=n[t][e],n[t][e]=null,\"white\"===l){if(!H(n)[A.y][A.x])return!0}else if(!I(n)[p.y][p.x])return!0}if(null===u[t+r][e-r])break}for(let r=1;t-r>=0&&e+r<8;r++){if(null===u[t-r][e+r]||n(u[t-r][e+r])!==l){let n=Array.from(u,e=>Array.from(e));if(n[t-r][e+r]=n[t][e],n[t][e]=null,\"white\"===l){if(!H(n)[A.y][A.x])return!0}else if(!I(n)[p.y][p.x])return!0}if(null!==u[t-r][e-r])break}return!1}function q(e,t,l){for(let r=e+1;r<8;r++){if(null!==u[t][r]){if(n(u[t][r])!==l){let n=Array.from(u,e=>Array.from(e));if(n[t][r]=n[t][e],n[t][e]=null,\"white\"===l){if(!H(n)[A.y][A.x])return!0}else if(!I(n)[p.y][p.x])return!0}break}let i=Array.from(u,e=>Array.from(e));if(i[t][r]=i[t][e],i[t][e]=null,\"white\"===l){if(!H(i)[A.y][A.x])return!0}else if(!I(i)[p.y][p.x])return!0}for(let r=e-1;r>=0;r--){if(null!==u[t][r]){if(n(u[t][r])!==l){let n=Array.from(u,e=>Array.from(e));if(n[t][r]=n[t][e],n[t][e]=null,\"white\"===l){if(!H(n)[A.y][A.x])return!0}else if(!I(n)[p.y][p.x])return!0}break}let i=Array.from(u,e=>Array.from(e));if(i[t][r]=i[t][e],i[t][e]=null,\"white\"===l){if(!H(i)[A.y][A.x])return!0}else if(!I(i)[p.y][p.x])return!0}for(let r=t+1;r<8;r++){if(null!==u[r][e]){if(n(u[r][e])!==l){let n=Array.from(u,e=>Array.from(e));if(n[r][e]=n[t][e],n[t][e]=null,\"white\"===l){if(!H(n)[A.y][A.x])return!0}else if(!I(n)[p.y][p.x])return!0}break}let i=Array.from(u,e=>Array.from(e));if(i[r][e]=i[t][e],i[t][e]=null,\"white\"===l){if(!H(i)[A.y][A.x])return!0}else if(!I(i)[p.y][p.x])return!0}for(let r=t-1;r>=0;r--){if(null!==u[r][e]){if(n(u[r][e])!==l){let n=Array.from(u,e=>Array.from(e));if(n[r][e]=n[t][e],n[t][e]=null,\"white\"===l){if(!H(n)[A.y][A.x])return!0}else if(!I(n)[p.y][p.x])return!0}break}let i=Array.from(u,e=>Array.from(e));if(i[r][e]=i[t][e],i[t][e]=null,\"white\"===l){if(!H(i)[A.y][A.x])return!0}else if(!I(i)[p.y][p.x])return!0}return!1}function M(e,t,l){if(t+1<8&&e+1<8&&null!==u[t+1][e+1]&&n(u[t+1][e+1])!==l){let r=Array.from(u,e=>Array.from(e));if(r[t+1][e+1]=r[t][e],r[t][e]=null,\"white\"===l){if(!H(r)[A.y+1][A.x+1])return!0}else if(!I(r)[p.y+1][p.x+1])return!0}else if(t+1<8&&e+1<8&&null===u[t+1][e+1]){let r=Array.from(u,e=>Array.from(e));if(r[t+1][e+1]=r[t][e],r[t][e]=null,\"white\"===l){if(!H(r)[A.y+1][A.x+1])return!0}else if(!I(r)[p.y+1][p.x+1])return!0}if(t-1>=0&&e-1>=0&&null!==u[t-1][e-1]&&n(u[t-1][e-1])!==l){let r=Array.from(u,e=>Array.from(e));if(r[t-1][e-1]=r[t][e],r[t][e]=null,\"white\"===l){if(!H(r)[A.y-1][A.x-1])return!0}else if(!I(r)[p.y-1][p.x-1])return!0}else if(t-1>=0&&e-1>=0&&null===u[t-1][e-1]){let r=Array.from(u,e=>Array.from(e));if(r[t-1][e-1]=r[t][e],r[t][e]=null,\"white\"===l){if(!H(r)[A.y-1][A.x-1])return!0}else if(!I(r)[p.y-1][p.x-1])return!0}if(t-1>=0&&e+1<8&&null!==u[t-1][e+1]&&n(u[t-1][e+1])!==l){let r=Array.from(u,e=>Array.from(e));if(r[t-1][e-1]=r[t][e],r[t][e]=null,\"white\"===l){if(!H(r)[A.y-1][A.x-1])return!0}else if(!I(r)[p.y-1][p.x-1])return!0}else if(t-1>=0&&e+1<8&&null===u[t-1][e+1]){let r=Array.from(u,e=>Array.from(e));if(r[t-1][e+1]=r[t][e],r[t][e]=null,\"white\"===l){if(!H(r)[A.y-1][A.x+1])return!0}else if(!I(r)[p.y-1][p.x+1])return!0}if(t+1<8&&e-1>=0&&null!==u[t+1][e-1]&&n(u[t+1][e-1])!==l){let r=Array.from(u,e=>Array.from(e));if(r[t+1][e-1]=r[t][e],r[t][e]=null,\"white\"===l){if(!H(r)[A.y+1][A.x-1])return!0}else if(!I(r)[p.y+1][p.x-1])return!0}else if(t+1<8&&e-1>=0&&null===u[t+1][e-1]){let r=Array.from(u,e=>Array.from(e));if(r[t+1][e-1]=r[t][e],r[t][e]=null,\"white\"===l){if(!H(r)[A.y+1][A.x-1])return!0}else if(!I(r)[p.y+1][p.x-1])return!0}if(t+1<8&&null!==u[t+1][e]&&n(u[t+1][e])!==l){let r=Array.from(u,e=>Array.from(e));if(r[t+1][e]=r[t][e],r[t][e]=null,\"white\"===l){if(!H(r)[A.y+1][A.x])return!0}else if(!I(r)[p.y+1][p.x])return!0}else if(t+1<8&&null===u[t+1][e]){let r=Array.from(u,e=>Array.from(e));if(r[t+1][e]=r[t][e],r[t][e]=null,\"white\"===l){if(!H(r)[A.y+1][A.x])return!0}else if(!I(r)[p.y+1][p.x])return!0}if(t-1>=0&&null!==u[t-1][e]&&n(u[t-1][e])!==l){let r=Array.from(u,e=>Array.from(e));if(r[t-1][e]=r[t][e],r[t][e]=null,\"white\"===l){if(!H(r)[A.y-1][A.x])return!0}else if(!I(r)[p.y-1][p.x])return!0}else if(t-1>=0&&null===u[t-1][e]){let r=Array.from(u,e=>Array.from(e));if(r[t-1][e]=r[t][e],r[t][e]=null,\"white\"===l){if(!H(r)[A.y-1][A.x])return!0}else if(!I(r)[p.y-1][p.x])return!0}if(e+1<8&&null!==u[t][e+1]&&n(u[t][e+1])!==l){let r=Array.from(u,e=>Array.from(e));if(r[t][e+1]=r[t][e],r[t][e]=null,\"white\"===l){if(!H(r)[A.y][A.x+1])return!0}else if(!I(r)[p.y][p.x+1])return!0}else if(e+1<8&&null===u[t][e+1]){let r=Array.from(u,e=>Array.from(e));if(r[t][e+1]=r[t][e],r[t][e]=null,\"white\"===l){if(!H(r)[A.y][A.x+1])return!0}else if(!I(r)[p.y][p.x+1])return!0}if(e-1>=0&&null!==u[t][e-1]&&n(u[t][e-1])!==l){let r=Array.from(u,e=>Array.from(e));if(r[t][e-1]=r[t][e],r[t][e]=null,\"white\"===l){if(!H(r)[A.y][A.x-1])return!0}else if(!I(r)[p.y][p.x-1])return!0}else if(e-1>=0&&null===u[t][e-1]){let r=Array.from(u,e=>Array.from(e));if(r[t][e-1]=r[t][e],r[t][e]=null,\"white\"===l){if(!H(r)[A.y][A.x-1])return!0}else if(!I(r)[p.y][p.x-1])return!0}return!1}window.addEventListener(\"load\",e=>{a=document.getElementById(\"board\"),m=document.getElementById(\"g\");for(let e=0;e<64;e++){let t=document.createElementNS(\"http://www.w3.org/2000/svg\",\"rect\");t.setAttribute(\"x\",50*Math.floor(e/8)),t.setAttribute(\"y\",e%8*50),t.setAttribute(\"width\",\"50\"),t.setAttribute(\"height\",\"50\"),t.setAttribute(\"class\",\"tile\"),t.setAttribute(\"fill\",(Math.floor(e/8)+e%8)%2==0?\"white\":\"black\"),m.appendChild(t)}!function(){for(let e=0;e<8;e++)u[6][e]=r(\"Pawn_White.png\",e,6,v),u[1][e]=r(\"Pawn_Black.png\",e,1,v);for(let e=0;e<8;e++)u[2][e]=null,u[3][e]=null,u[4][e]=null,u[5][e]=null;u[0][0]=r(\"Rook_Black.png\",0,0,v),u[7][0]=r(\"Rook_White.png\",0,7,v),u[0][7]=r(\"Rook_Black.png\",7,0,v),u[7][7]=r(\"Rook_White.png\",7,7,v),u[0][6]=r(\"Knight_Black.png\",6,0,v),u[7][6]=r(\"Knight_White.png\",6,7,v),u[0][1]=r(\"Knight_Black.png\",1,0,v),u[7][1]=r(\"Knight_White.png\",1,7,v),u[0][5]=r(\"Bishop_Black.png\",5,0,v),u[7][5]=r(\"Bishop_White.png\",5,7,v),u[0][2]=r(\"Bishop_Black.png\",2,0,v),u[7][2]=r(\"Bishop_White.png\",2,7,v),u[0][4]=r(\"King_Black.png\",4,0,v),u[7][4]=r(\"King_White.png\",4,7,v),u[0][3]=r(\"Queen_Black.png\",3,0,v),u[7][3]=r(\"Queen_White.png\",3,7,v)}(),S();let t=setInterval(()=>{if(C&&function(){for(let e=0;e<8;e++)for(let t=0;t<8;t++)if(null!==u[t][e]&&n(u[t][e])===s)switch(i(u[t][e])){case\"pawn\":if(P(e,t,s))return!1;break;case\"knight\":if(O(e,t,s))return!1;break;case\"bishop\":if(j(e,t,s))return!1;break;case\"rook\":if(q(e,t,s))return!1;break;case\"queen\":if(j(e,t,s)||q(e,t,s))return!1;break;case\"king\":if(M(e,t,s))return!1}return!0}()&&(alert(\"Game Over!\\n\"+(\"white\"===s?\"Black\":\"White\")+\" wins!\"),clearInterval(t)),\"white\"===s)if(f[A.y][A.x]){null!==b&&(m.removeChild(b),b=null);let e=document.createElementNS(\"http://www.w3.org/2000/svg\",\"circle\");e.setAttribute(\"cx\",50*A.x+25),e.setAttribute(\"cy\",50*A.y+25),e.setAttribute(queen?\"Q\":\"R\",25),e.setAttribute(\"fill\",\"url(#grad1)\"),e.setAttribute(\"id\",\"checkCircle\"),e.addEventListener(\"click\",e=>{w=e}),m.appendChild(e),b=e,C=!0}else null!==b?(m.removeChild(b),b=null,C=!1):C=!1;else if(\"black\"===s)if(d[p.y][p.x]){null!==b&&(m.removeChild(b),b=null);let e=document.createElementNS(\"http://www.w3.org/2000/svg\",\"circle\");e.setAttribute(\"cx\",50*p.x+25),e.setAttribute(\"cy\",50*p.y+25),e.setAttribute(queen?\"Q\":\"R\",25),e.setAttribute(\"fill\",\"url(#grad1)\"),e.setAttribute(\"id\",\"checkCircle\"),e.addEventListener(\"click\",e=>{w=e}),m.appendChild(e),b=e,C=!0}else null!==b?(m.removeChild(b),b=null,C=!1):C=!1;null!==w&&(u[\"white\"===s?A.y:p.y][\"white\"===s?A.x:p.x].dispatchEvent(w),w=null)},250)}),document.addEventListener(\"click\",e=>{if(e.target===document.body||e.target===a||\"tile\"===e.target.getAttribute(\"class\")){c=null;for(let e=0;e<h.length;)m.removeChild(h.shift())}})}]);","extractedComments":[]}